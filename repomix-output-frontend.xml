This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitignore
eslint.config.js
index.html
manifest.json
package.json
postcss.config.js
public/vite.svg
README.md
src/App.css
src/App.jsx
src/assets/react.svg
src/components/BottomNav.jsx
src/components/ForgotPassword.jsx
src/components/Header.jsx
src/components/Icons.jsx
src/components/ProductCard.jsx
src/components/ProtectedRoute.jsx
src/contexts/AuthContext.jsx
src/contexts/CartContext.jsx
src/index.css
src/main.jsx
src/pages/CartPage.jsx
src/pages/CheckoutPage.jsx
src/pages/FlashSalePage.jsx
src/pages/HomePage.jsx
src/pages/index.js
src/pages/Login.jsx
src/pages/MenuPage.jsx
src/pages/OrderSuccessPage.jsx
src/pages/ProfilePage.jsx
src/pages/Register.jsx
src/utils/api.js
src/utils/format.js
src/utils/orderService.js
sw.js
tailwind.config.js
vite.config.js
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
</file>

<file path="eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{js,jsx}'],
    extends: [
      js.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
      parserOptions: {
        ecmaVersion: 'latest',
        ecmaFeatures: { jsx: true },
        sourceType: 'module',
      },
    },
    rules: {
      'no-unused-vars': ['error', { varsIgnorePattern: '^[A-Z_]' }],
    },
  },
])
</file>

<file path="index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#92400E" />
    <meta name="description" content="Caffinity - Your coffee paradise. Order delicious drinks and pastries online." />
    
    <!-- Open Graph tags for social sharing -->
    <meta property="og:title" content="Caffinity - Coffee Shop" />
    <meta property="og:description" content="Your coffee paradise. Order delicious drinks and pastries online." />
    <meta property="og:image" content="/og-image.png" />
    <meta property="og:url" content="https://caffinity.com" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    
    <!-- PWA -->
    <link rel="manifest" href="/manifest.json" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <title>Caffinity - Your Coffee Paradise</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
</file>

<file path="manifest.json">
{
  "name": "Caffinity",
  "short_name": "Caffinity",
  "start_url": "/",
  "display": "standalone",
  "theme_color": "#000000",
  "background_color": "#ffffff"
}
</file>

<file path="package.json">
{
  "name": "caffinity-front-end",
  "version": "0.0.0",
  "private": true,
  "proxy": "http://localhost:5000", 
  "scripts": {
    "dev": "vite",
    "start": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext js,jsx --report-unused-disable-directives --max-warnings 0"
  },
  "dependencies": {
    "axios": "^1.13.2",
    "formik": "^2.4.6",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-hot-toast": "^2.5.0",
    "react-icons": "^5.4.0",
    "react-router-dom": "^6.30.2",
    "yup": "^1.4.0"
  },
  "devDependencies": {
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "@vitejs/plugin-react": "^4.0.0",
    "autoprefixer": "^10.4.22",
    "eslint": "^8.55.0",
    "eslint-plugin-react": "^7.33.2",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.4.0",
    "postcss": "^8.4.45",
    "tailwindcss": "^3.4.18",
    "vite": "^4.5.0"
  }
}
</file>

<file path="postcss.config.js">
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</file>

<file path="public/vite.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>
</file>

<file path="README.md">
# React + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend using TypeScript with type-aware lint rules enabled. Check out the [TS template](https://github.com/vitejs/vite/tree/main/packages/create-vite/template-react-ts) for information on how to integrate TypeScript and [`typescript-eslint`](https://typescript-eslint.io) in your project.
</file>

<file path="src/App.css">
#root {
  margin: 0 auto;
  padding: 0;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}

/* HAPUS INI:
nav, .navbar, .bottom-nav, .navigation {
    display: none !important;
}
*/

/* Chat Modal Styles */
.chat-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: white;
  z-index: 1000;
  display: flex;
  flex-direction: column;
}

.chat-header {
  padding: 16px;
  border-bottom: 1px solid #e5e5e5;
  display: flex;
  align-items: center;
  gap: 12px;
}

.back-button {
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
}

.chat-title h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
}

.online-status {
  margin: 0;
  font-size: 12px;
  color: #666;
}

.chat-messages {
  flex: 1;
  padding: 16px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.message {
  max-width: 80%;
  padding: 12px;
  border-radius: 18px;
  align-self: flex-start;
}

.message.user {
  align-self: flex-end;
  background-color: #92400E;
  color: white;
}

.message.support {
  background-color: #f0f0f0;
  color: #333;
}

.message-time {
  font-size: 10px;
  color: #999;
  display: block;
  margin-top: 4px;
}

.chat-input-container {
  padding: 16px;
  border-top: 1px solid #e5e5e5;
  display: flex;
  gap: 8px;
}

.chat-input-container input {
  flex: 1;
  padding: 12px 16px;
  border: 1px solid #ddd;
  border-radius: 24px;
  font-size: 14px;
}

.send-button {
  background-color: #92400E;
  color: white;
  border: none;
  border-radius: 24px;
  padding: 12px 20px;
  font-weight: 600;
  cursor: pointer;
}

/* Tambahkan style untuk modal chat fullscreen */
.chat-modal-fullscreen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: white;
  z-index: 9999;
  display: flex;
  flex-direction: column;
}

/* Animasi untuk chat modal */
@keyframes slideUp {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.chat-modal-fullscreen {
  animation: slideUp 0.3s ease-out;
}

/* Style untuk bottom navigation saat chat terbuka */
.chat-open .safe-bottom {
  display: none !important;
}

.chat-open nav.bottom-nav {
  display: none !important;
}

/* Backdrop untuk modal */
.chat-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 9998;
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Floating Chat Button */
.floating-chat-button {
  position: fixed;
  bottom: 80px;
  right: 20px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background-color: #92400E;
  color: white;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px rgba(146, 64, 14, 0.3);
  cursor: pointer;
  z-index: 40;
  transition: all 0.3s ease;
}

.floating-chat-button:hover {
  background-color: #7c350b;
  transform: scale(1.05);
}
</file>

<file path="src/App.jsx">
// src/App.jsx
import React, { useState, useEffect } from 'react';
import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';
import BottomNav from './components/BottomNav';
import Login from './pages/Login'; 
import HomePage from './pages/HomePage';
import MenuPage from './pages/MenuPage';
import CartPage from './pages/CartPage';
import CheckoutPage from './pages/CheckoutPage';
import OrderSuccessPage from './pages/OrderSuccessPage';
import ProfilePage from './pages/ProfilePage';
import './App.css';

function App() {
  const [isAuthenticated, setIsAuthenticated] = useState(false);
  const [loading, setLoading] = useState(true);
  const [cartItems, setCartItems] = useState([]);
  const [appliedPromo, setAppliedPromo] = useState(null);
  const [isChatOpen, setIsChatOpen] = useState(false);

  // Cek authentication saat component mount
  useEffect(() => {
    const checkAuth = () => {
      const authStatus = localStorage.getItem('isAuthenticated') === 'true';
      console.log('üîê Auth check:', authStatus);
      setIsAuthenticated(authStatus);
      setLoading(false);
    };
    
    checkAuth();
    
    const handleAuthChange = () => {
      console.log('üéØ Auth change event received');
      checkAuth();
    };
    
    window.addEventListener('auth-change', handleAuthChange);
    window.addEventListener('storage', checkAuth);
    
    return () => {
      window.removeEventListener('auth-change', handleAuthChange);
      window.removeEventListener('storage', checkAuth);
    };
  }, []);

  // Fungsi logout
  const handleLogout = () => {
    localStorage.removeItem('isAuthenticated');
    localStorage.removeItem('user');
    localStorage.removeItem('token');
    window.dispatchEvent(new Event('storage'));
    window.dispatchEvent(new CustomEvent('auth-change'));
    setIsAuthenticated(false);
  };

  const cartCount = cartItems.reduce((sum, item) => sum + item.quantity, 0);
  const openChat = () => setIsChatOpen(true);
  const closeChat = () => setIsChatOpen(false);

  const handleOrderSuccess = () => {
    setCartItems([]);
    setAppliedPromo(null);
  };

  // Layout untuk protected pages
  const ProtectedLayout = ({ children }) => (
    <div className={`min-h-screen bg-gray-50 pb-16 ${isChatOpen ? 'chat-open' : ''}`}>
      {children}
      {!isChatOpen && <BottomNav cartCount={cartCount} isAuthenticated={isAuthenticated} />}
    </div>
  );

  // Loading state
  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-amber-900 to-amber-700">
        <div className="text-white text-center">
          <div className="w-16 h-16 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
          <p className="text-xl">Loading...</p>
        </div>
      </div>
    );
  }

  console.log('üöÄ App rendering, isAuthenticated:', isAuthenticated);

  return (
    <Router>
      <Routes>
        {/* Public route - Login */}
        <Route path="/login" element={<Login />} />
        
        {/* Protected routes - hanya bisa diakses jika authenticated */}
        {isAuthenticated ? (
          <>
            <Route 
              path="/" 
              element={
                <ProtectedLayout>
                  <HomePage openChat={openChat} handleLogout={handleLogout} />
                </ProtectedLayout>
              } 
            />
            <Route 
              path="/home" 
              element={
                <ProtectedLayout>
                  <HomePage openChat={openChat} handleLogout={handleLogout} />
                </ProtectedLayout>
              } 
            />
            
            <Route 
              path="/menu" 
              element={
                <ProtectedLayout>
                  <MenuPage 
                    openChat={openChat} 
                    cartItems={cartItems}
                    setCartItems={setCartItems}
                  />
                </ProtectedLayout>
              } 
            />
            
            <Route 
              path="/cart" 
              element={
                <ProtectedLayout>
                  <CartPage 
                    openChat={openChat}
                    cartItems={cartItems}
                    setCartItems={setCartItems}
                    appliedPromo={appliedPromo}
                    setAppliedPromo={setAppliedPromo}
                  />
                </ProtectedLayout>
              } 
            />
            
            <Route 
              path="/checkout" 
              element={
                <ProtectedLayout>
                  <CheckoutPage 
                    cartItems={cartItems}
                    appliedPromo={appliedPromo}
                    openChat={openChat}
                  />
                </ProtectedLayout>
              } 
            />
            
            <Route 
              path="/order-success" 
              element={
                <ProtectedLayout>
                  <OrderSuccessPage 
                    onOrderComplete={handleOrderSuccess}
                  />
                </ProtectedLayout>
              } 
            />
            
            <Route 
              path="/profile" 
              element={
                <ProtectedLayout>
                  <ProfilePage openChat={openChat} handleLogout={handleLogout} />
                </ProtectedLayout>
              } 
            />
          </>
        ) : (
          // Jika tidak authenticated, redirect semua route ke login
          <Route path="*" element={<Navigate to="/login" replace />} />
        )}
      </Routes>
    </Router>
  );
}

export default App;
</file>

<file path="src/assets/react.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>
</file>

<file path="src/components/BottomNav.jsx">
// src/components/BottomNav.jsx
import React from 'react';
import { Link, useLocation } from 'react-router-dom';
import { HomeIcon, CoffeeIcon, CartIcon, ProfileIcon } from './Icons';

// Tambahkan ChatIcon ke dalam icons.js atau langsung di sini:
const ChatIcon = ({ active = false, size = 24 }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M8 10H16" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
    <path d="M8 14H12" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
    <path d="M8 18H14" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
    <circle cx="18" cy="6" r="1.5" fill={active ? "#92400E" : "#9CA3AF"} />
  </svg>
);

const BottomNav = ({ cartCount = 0, openChat }) => {
  const location = useLocation();
  
  const navItems = [
    {
      id: 'home',
      label: 'Home',
      icon: (active) => <HomeIcon active={active} size={24} />,
      path: '/home',
      activePaths: ['/', '/home']
    },
    {
      id: 'menu',
      label: 'Menu',
      icon: (active) => <CoffeeIcon active={active} size={24} />,
      path: '/menu',
      activePaths: ['/menu']
    },
    {
      id: 'cart',
      label: 'Cart',
      icon: (active) => <CartIcon active={active} size={24} count={cartCount} />,
      path: '/cart',
      activePaths: ['/cart']
    },
    {
      id: 'profile',
      label: 'Profile',
      icon: (active) => <ProfileIcon active={active} size={24} />,
      path: '/profile',
      activePaths: ['/profile']
    }
  ];

  const isActive = (item) => {
    return item.activePaths.includes(location.pathname);
  };

  return (
    <nav className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-hard py-1 px-3 md:px-6 z-50 safe-bottom">
      <div className="flex justify-between max-w-4xl mx-auto">
        {navItems.map((item) => {
          const active = isActive(item);
          return (
            <Link
              key={item.id}
              to={item.path}
              className="flex flex-col items-center p-2 relative flex-1 group"
            >
              {/* Icon */}
              <div className={`transition-normal ${active ? 'text-amber-800 scale-110' : 'text-gray-400 group-hover:text-amber-600'}`}>
                {item.icon(active)}
              </div>
              
              {/* Label */}
              <span className={`text-xs mt-1 transition-normal ${active ? 'text-amber-800 font-bold' : 'text-gray-500 group-hover:text-amber-700'}`}>
                {item.label}
              </span>
              
              {/* Active indicator */}
              {active && (
                <div className="absolute -top-1 w-1.5 h-1.5 bg-amber-700 rounded-full animate-pulse"></div>
              )}
            </Link>
          );
        })}
      </div>
    </nav>
  );
};

export default BottomNav;
</file>

<file path="src/components/ForgotPassword.jsx">
// src/components/ForgotPassword.jsx
import React, { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';

const ForgotPassword = () => {
  const navigate = useNavigate();
  const [email, setEmail] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const [isSent, setIsSent] = useState(false);
  const [error, setError] = useState('');

  const handleSubmit = async (e) => {
    e.preventDefault();
    
    if (!email) {
      setError('Please enter your email address');
      return;
    }
    
    if (!/\S+@\S+\.\S+/.test(email)) {
      setError('Please enter a valid email address');
      return;
    }
    
    setIsLoading(true);
    setError('');
    
    try {
      // Simulate API call
      await new Promise(resolve => setTimeout(resolve, 1500));
      
      setIsSent(true);
      
      // Auto redirect after 3 seconds
      setTimeout(() => {
        navigate('/login');
      }, 3000);
      
    } catch (err) {
      setError('Failed to send reset email. Please try again.');
    } finally {
      setIsLoading(false);
    }
  };

  if (isSent) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-amber-900 via-amber-800 to-amber-700 flex items-center justify-center p-4">
        <div className="w-full max-w-md">
          <div className="text-center mb-8">
            <div className="w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-6">
              <svg className="w-10 h-10 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7" />
              </svg>
            </div>
            <h1 className="text-3xl font-bold text-white mb-2">Email Sent!</h1>
            <p className="text-amber-200">
              Check your inbox for password reset instructions
            </p>
          </div>
          
          <div className="bg-white rounded-3xl shadow-2xl p-8 text-center">
            <p className="text-gray-600 mb-6">
              We've sent a password reset link to <strong>{email}</strong>
            </p>
            <p className="text-sm text-gray-500 mb-6">
              Redirecting to login page in 3 seconds...
            </p>
            <Link 
              to="/login" 
              className="inline-block w-full bg-gradient-to-r from-amber-700 to-amber-900 text-white py-3.5 rounded-xl font-bold hover:shadow-xl transition-all duration-300"
            >
              Back to Login
            </Link>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-amber-900 via-amber-800 to-amber-700 flex items-center justify-center p-4">
      <div className="w-full max-w-md">
        {/* Logo & Header */}
        <div className="text-center mb-8">
          <div className="flex items-center justify-center gap-3 mb-6">
            <div className="w-16 h-16 bg-white rounded-2xl flex items-center justify-center shadow-xl">
              <div className="w-12 h-12 bg-gradient-to-br from-amber-600 to-amber-800 rounded-xl flex items-center justify-center">
                <span className="text-white text-2xl font-bold">üîí</span>
              </div>
            </div>
          </div>
          <h1 className="text-3xl font-bold text-white mb-2">Reset Password</h1>
          <p className="text-amber-200">
            Enter your email to receive reset instructions
          </p>
        </div>

        {/* Form Container */}
        <div className="bg-white rounded-3xl shadow-2xl p-8">
          <form onSubmit={handleSubmit} className="space-y-6">
            {error && (
              <div className="p-3 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm">
                {error}
              </div>
            )}
            
            <div>
              <label className="block text-gray-700 mb-2 font-medium">
                Email Address
              </label>
              <div className="relative">
                <input
                  type="email"
                  value={email}
                  onChange={(e) => {
                    setEmail(e.target.value);
                    setError('');
                  }}
                  placeholder="Enter your registered email"
                  className="w-full px-4 py-3.5 bg-gray-50 border-2 border-amber-200 rounded-xl focus:outline-none focus:border-amber-500 focus:ring-2 focus:ring-amber-200 transition-all pr-10"
                  disabled={isLoading}
                />
                <div className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                  <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                  </svg>
                </div>
              </div>
            </div>

            <button
              type="submit"
              disabled={isLoading}
              className="w-full bg-gradient-to-r from-amber-700 to-amber-900 text-white py-4 rounded-xl font-bold text-lg hover:shadow-xl active:scale-[0.98] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
            >
              {isLoading ? (
                <>
                  <svg className="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  Sending...
                </>
              ) : (
                'Send Reset Link'
              )}
            </button>

            <div className="text-center pt-4">
              <p className="text-gray-600">
                Remember your password?{' '}
                <Link 
                  to="/login" 
                  className="text-amber-700 font-bold hover:text-amber-800 transition-colors"
                >
                  Back to Login
                </Link>
              </p>
            </div>
          </form>
        </div>
      </div>
    </div>
  );
};

export default ForgotPassword;
</file>

<file path="src/components/Header.jsx">
// src/components/Header.jsx
import React from 'react';
import { Link, useLocation, useNavigate } from 'react-router-dom';
import { SearchIcon, BellIcon } from './icons';

const Header = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const cartCount = 3; // In real app, get from context/state
  
  const pageTitles = {
    '/home': 'Good Morning ‚òÄÔ∏è',
    '/menu': 'Menu üìã',
    '/cart': 'Your Cart üõí',
    '/profile': 'My Profile üë§'
  };
  
  const pageSubtitles = {
    '/home': 'What would you like to drink today?',
    '/menu': 'Discover our delicious drinks',
    '/cart': `${cartCount} items ‚Ä¢ Ready to checkout`,
    '/profile': 'Manage your account & preferences'
  };

  const title = pageTitles[location.pathname] || 'Caffinity';
  const subtitle = pageSubtitles[location.pathname] || 'Your coffee paradise';

  return (
    <header className="sticky top-0 z-40 bg-white/95 backdrop-blur-sm border-b border-gray-100">
      <div className="section-padding py-4">
        {/* Top Row */}
        <div className="flex items-center justify-between">
          {/* Logo */}
          <Link to="/home" className="flex items-center gap-2">
            <div className="w-10 h-10 bg-gradient-to-br from-amber-600 to-amber-800 rounded-xl flex items-center justify-center">
              <span className="text-white text-lg font-bold">C</span>
            </div>
            <h1 className="text-xl font-bold text-gray-900 hidden sm:block">
              Caffinity
            </h1>
          </Link>

          {/* Search Bar (on menu page) */}
          {location.pathname === '/menu' && (
            <div className="flex-1 max-w-md mx-4">
              <div className="relative">
                <input
                  type="text"
                  placeholder="Search drinks, pastries..."
                  className="input-primary input-with-icon"
                />
                <div className="absolute left-4 top-1/2 transform -translate-y-1/2">
                  <SearchIcon />
                </div>
              </div>
            </div>
          )}

          {/* Action Icons */}
          <div className="flex items-center gap-3">
          

            {/* Cart */}
            <Link to="/cart" className="relative p-2 hover:bg-gray-100 rounded-full transition-colors">
              <div className="relative">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 22C9.55228 22 10 21.5523 10 21C10 20.4477 9.55228 20 9 20C8.44772 20 8 20.4477 8 21C8 21.5523 8.44772 22 9 22Z" 
                        stroke="#92400E" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                  <path d="M20 22C20.5523 22 21 21.5523 21 21C21 20.4477 20.5523 20 20 20C19.4477 20 19 20.4477 19 21C19 21.5523 19.4477 22 20 22Z" 
                        stroke="#92400E" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                  <path d="M1 1H5L7.68 14.39C7.77144 14.8504 8.02191 15.264 8.38755 15.5583C8.75318 15.8526 9.2107 16.009 9.68 16H19.4C19.8693 16.009 20.3268 15.8526 20.6925 15.5583C21.0581 15.264 21.3086 14.8504 21.4 14.39L23 6H6" 
                        stroke="#92400E" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                </svg>
                {cartCount > 0 && (
                  <span className="badge-primary absolute -top-1 -right-1">
                    {cartCount}
                  </span>
                )}
              </div>
            </Link>

               {/* Profile - Changed to icon */}
            <Link to="/profile" className="relative p-2 hover:bg-gray-100 rounded-full transition-colors">
              <div className="relative">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" 
                  xmlns="http://www.w3.org/2000/svg"stroke="#92400E" strokeWidth="2"
                >
                  <path 
                    d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" 
                    strokeLinecap="round" strokeLinejoin="round"
                  />
                  <path 
                    d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z" 
                    strokeLinecap="round" strokeLinejoin="round"
                  />
                </svg>
              </div>
            </Link>
          </div>
        </div>

        {/* Search Bar (on home page) */}
        {location.pathname === '/home' && (
          <div className="mt-4">
            <div className="relative">
              <input
                type="text"
                placeholder="Search coffee, tea, pastries..."
                className="input-primary input-with-icon"
              />
              <div className="absolute left-4 top-1/2 transform -translate-y-1/2">
                <SearchIcon />
              </div>
              <button className="absolute right-3 top-1/2 transform -translate-y-1/2 bg-amber-600 text-white px-4 py-1.5 rounded-lg text-sm font-medium hover:bg-amber-700 transition-colors">
                Search
              </button>
            </div>
          </div>
        )}
      </div>
    </header>
  );
};

export default Header;
</file>

<file path="src/components/Icons.jsx">
// src/components/Icons.jsx
import React from 'react';

export const HomeIcon = ({ size = 24, color = "currentColor", active = false }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M3 10L12 3L21 10V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V10Z" 
          stroke={active ? "#92400E" : color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M9 22V12H15V22" 
          stroke={active ? "#92400E" : color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const CoffeeIcon = ({ size = 24, color = "currentColor", active = false }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M18 8H19C20.0609 8 21.0783 8.42143 21.8284 9.17157C22.5786 9.92172 23 10.9391 23 12C23 13.0609 22.5786 14.0783 21.8284 14.8284C21.0783 15.5786 20.0609 16 19 16H18" 
          stroke={active ? "#92400E" : color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M2 8H18V17C18 18.0609 17.5786 19.0783 16.8284 19.8284C16.0783 20.5786 15.0609 21 14 21H6C4.93913 21 3.92172 20.5786 3.17157 19.8284C2.42143 19.0783 2 18.0609 2 17V8Z" 
          stroke={active ? "#92400E" : color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M6 1V4" 
          stroke={active ? "#92400E" : color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M10 1V4" 
          stroke={active ? "#92400E" : color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M14 1V4" 
          stroke={active ? "#92400E" : color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const CartIcon = ({ size = 24, color = "currentColor", active = false, count = 0 }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M9 22C9.55228 22 10 21.5523 10 21C10 20.4477 9.55228 20 9 20C8.44772 20 8 20.4477 8 21C8 21.5523 8.44772 22 9 22Z" 
          stroke={active ? "#92400E" : color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M20 22C20.5523 22 21 21.5523 21 21C21 20.4477 20.5523 20 20 20C19.4477 20 19 20.4477 19 21C19 21.5523 19.4477 22 20 22Z" 
          stroke={active ? "#92400E" : color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M1 1H5L7.68 14.39C7.77144 14.8504 8.02191 15.264 8.38755 15.5583C8.75318 15.8526 9.2107 16.009 9.68 16H19.4C19.8693 16.009 20.3268 15.8526 20.6925 15.5583C21.0581 15.264 21.3086 14.8504 21.4 14.39L23 6H6" 
          stroke={active ? "#92400E" : color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    {count > 0 && (
      <circle cx="20" cy="4" r="4" fill="#EF4444" stroke="white" strokeWidth="1">
        <text x="20" y="6" textAnchor="middle" fill="white" fontSize="7" fontWeight="bold">
          {count > 9 ? "9+" : count}
        </text>
      </circle>
    )}
  </svg>
);

export const ProfileIcon = ({ size = 24, color = "currentColor", active = false }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" 
          stroke={active ? "#92400E" : color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z" 
          stroke={active ? "#92400E" : color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const SearchIcon = ({ size = 20, color = "#9CA3AF" }) => (
  <svg width={size} height={size} viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M9 17C13.4183 17 17 13.4183 17 9C17 4.58172 13.4183 1 9 1C4.58172 1 1 4.58172 1 9C1 13.4183 4.58172 17 9 17Z" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M19 19L14.65 14.65" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const BellIcon = ({ size = 24, color = "#92400E" }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M13.73 21C13.5542 21.3031 13.3018 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const StarIcon = ({ size = 16, filled = false, color = "#F59E0B" }) => (
  <svg width={size} height={size} viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M8 1L9.79611 5.52786L14 5.52786L10.5 8.94427L12.2961 13.4721L8 10.0557L3.70388 13.4721L5.5 8.94427L2 5.52786L6.20388 5.52786L8 1Z" 
          fill={filled ? color : "none"} 
          stroke={color} 
          strokeWidth="1" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const ArrowRight = ({ size = 16, color = "currentColor" }) => (
  <svg width={size} height={size} viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M6 12L10 8L6 4" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const PlusIcon = ({ size = 24, color = "white" }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12 5V19" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M5 12H19" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const MinusIcon = ({ size = 24, color = "currentColor" }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M5 12H19" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const TrashIcon = ({ size = 20, color = "#9CA3AF" }) => (
  <svg width={size} height={size} viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M3 6H17M16 6L15.7294 15.1875C15.5901 18.3923 15.5204 20 13 20H7C4.4796 20 4.4099 18.3923 4.27064 15.1875L4 6M8 9V15M12 9V15M9 4V2H11V4M5 6H15" 
          stroke={color} 
          strokeWidth="1.5" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const EditIcon = ({ size = 20, color = "currentColor" }) => (
  <svg width={size} height={size} viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V16C2 16.5304 2.21071 17.0391 2.58579 17.4142C2.96086 17.7893 3.46957 18 4 18H14C14.5304 18 15.0391 17.7893 15.4142 17.4142C15.7893 17.0391 16 16.5304 16 16V9" 
          stroke={color} 
          strokeWidth="1.5" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M14.5 2.5C14.8978 2.10217 15.4374 1.87868 16 1.87868C16.2786 1.87868 16.5544 1.93355 16.8118 2.04015C17.0692 2.14676 17.303 2.30301 17.5 2.5C17.697 2.69698 17.8532 2.93083 17.9598 3.1882C18.0665 3.44557 18.1213 3.72142 18.1213 4C18.1213 4.27858 18.0665 4.55443 17.9598 4.8118C17.8532 5.06917 17.697 5.30302 17.5 5.5L9 14L5 15L6 11L14.5 2.5Z" 
          stroke={color} 
          strokeWidth="1.5" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const CheckIcon = ({ size = 20, color = "#10B981" }) => (
  <svg width={size} height={size} viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M16 6L8 14L4 10" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const Counterflow = ({ size = 24, color = "currentColor" }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const CounterGo = ({ size = 24, color = "currentColor" }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12 2V22M12 2L8 6M12 2L16 6M12 22L8 18M12 22L16 18" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const CrownIcon = ({ size = 24, color = "currentColor" }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2 5L7 10L12 2L17 10L22 5" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M4 11V19H20V11" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M12 15V19" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const FlashIcon = ({ size = 24, color = "currentColor" }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M13 2L4 14H12L11 22L20 10H12L13 2Z" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);

export const GiftIcon = ({ size = 24, color = "currentColor" }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M20 12V22H4V12" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
    <path d="M22 7H2V12H22V7Z" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
    <path d="M12 22V7" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
    <path d="M12 7H7.5C6.83696 7 6.20107 6.73661 5.73223 6.26777C5.26339 5.79893 5 5.16304 5 4.5C5 3.83696 5.26339 3.20107 5.73223 2.73223C6.20107 2.26339 6.83696 2 7.5 2C11 2 12 7 12 7Z" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
    <path d="M12 7H16.5C17.163 7 17.7989 6.73661 18.2678 6.26777C18.7366 5.79893 19 5.16304 19 4.5C19 3.83696 18.7366 3.20107 18.2678 2.73223C17.7989 2.26339 17.163 2 16.5 2C13 2 12 7 12 7Z" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
  </svg>
);

export const TrophyIcon = ({ size = 24, color = "currentColor" }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M6 9H4C3.44772 9 3 9.44772 3 10V12C3 13.6569 4.34315 15 6 15H7" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M18 9H20C20.5523 9 21 9.44772 21 10V12C21 13.6569 19.6569 15 18 15H17" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M12 15V18" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M12 18C9.79086 18 8 19.7909 8 22H16C16 19.7909 14.2091 18 12 18Z" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
    <path d="M12 15C14.2091 15 16 13.2091 16 11V4H8V11C8 13.2091 9.79086 15 12 15Z" 
          stroke={color} 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round"/>
  </svg>
);
</file>

<file path="src/components/ProductCard.jsx">
// src/components/ProductCard.jsx
import React, { useState } from 'react';
import { Link } from 'react-router-dom';
import { StarIcon } from './icons';
import { formatPrice } from '../utils/format';

const ProductCard = ({
  product,
  variant = 'default',
  showAddToCart = true,
  onAddToCart = null,
  className = ''
}) => {
  const [isHovered, setIsHovered] = useState(false);
  const [isLiked, setIsLiked] = useState(product.isLiked || false);
  const [quantity, setQuantity] = useState(1);

  const handleAddToCart = () => {
    if (onAddToCart) {
      onAddToCart(product, quantity);
    } else {
      // Default behavior
      console.log('Added to cart:', product, quantity);
      // Show toast notification
      alert(`Added ${quantity} ${product.name} to cart!`);
    }
  };

  const handleLike = (e) => {
    e.stopPropagation();
    setIsLiked(!isLiked);
  };

  const getCategoryColor = (category) => {
    const colors = {
      coffee: 'bg-amber-100 text-amber-800',
      tea: 'bg-green-100 text-green-800',
      pastries: 'bg-orange-100 text-orange-800',
      special: 'bg-purple-100 text-purple-800',
      default: 'bg-gray-100 text-gray-800'
    };
    return colors[category] || colors.default;
  };

  const variants = {
    default: {
      container: 'card card-hover',
      image: 'w-full h-48 md:h-56 object-cover rounded-t-2xl',
      content: 'p-4 md:p-5',
      title: 'text-lg md:text-xl font-bold text-gray-900',
      description: 'text-gray-600 text-sm mt-1 line-clamp-2',
      price: 'text-xl md:text-2xl font-bold text-amber-800'
    },
    compact: {
      container: 'card card-hover',
      image: 'w-full h-40 object-cover rounded-t-xl',
      content: 'p-3',
      title: 'font-bold text-gray-900 text-sm',
      description: 'text-gray-600 text-xs mt-1 line-clamp-1',
      price: 'font-bold text-amber-800 text-sm'
    },
    featured: {
      container: 'card card-hover border-2 border-amber-200',
      image: 'w-full h-56 md:h-64 object-cover rounded-t-2xl',
      content: 'p-5 md:p-6',
      title: 'text-xl md:text-2xl font-bold text-gray-900',
      description: 'text-gray-600 mt-2',
      price: 'text-2xl md:text-3xl font-bold text-amber-800'
    },
    horizontal: {
      container: 'card card-hover flex flex-col sm:flex-row',
      image: 'w-full sm:w-32 h-48 sm:h-32 object-cover rounded-t-xl sm:rounded-l-xl sm:rounded-tr-none',
      content: 'p-4 flex-1',
      title: 'text-lg font-bold text-gray-900',
      description: 'text-gray-600 text-sm mt-1 line-clamp-2',
      price: 'text-xl font-bold text-amber-800'
    }
  };

  const styles = variants[variant] || variants.default;

  return (
    <div 
      className={`${styles.container} ${className}`}
      onMouseEnter={() => setIsHovered(true)}
      onMouseLeave={() => setIsHovered(false)}
    >
      {/* Product Image */}
      <div className="relative overflow-hidden">
        <img 
          src={product.image} 
          alt={product.name}
          className={`${styles.image} ${isHovered ? 'scale-110' : 'scale-100'} transition-transform duration-500`}
        />
        
        {/* Badges */}
        <div className="absolute top-3 left-3 flex gap-2">
          {product.discount && (
            <span className="badge-secondary bg-red-500 text-white">
              -{product.discount}%
            </span>
          )}
          {product.isNew && (
            <span className="badge-secondary bg-green-500 text-white">
              NEW
            </span>
          )}
        </div>
        
        {/* Like Button */}
        <button 
          onClick={handleLike}
          className="absolute top-3 right-3 w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-colors shadow-md"
          aria-label={isLiked ? "Unlike" : "Like"}
        >
          <span className="text-lg">{isLiked ? '‚ù§Ô∏è' : 'ü§ç'}</span>
        </button>
        
        {/* Category */}
        <div className={`absolute bottom-3 left-3 ${getCategoryColor(product.category)} text-xs font-medium px-3 py-1 rounded-full`}>
          {product.category}
        </div>
      </div>
      
      {/* Product Content */}
      <div className={styles.content}>
        {/* Rating */}
        <div className="flex items-center gap-1 mb-2">
          <div className="flex">
            {[...Array(5)].map((_, i) => (
              <StarIcon 
                key={i} 
                filled={i < Math.floor(product.rating)}
              />
            ))}
          </div>
          <span className="text-xs text-gray-500 ml-1">({product.rating})</span>
        </div>
        
        {/* Title & Description */}
        <h3 className={styles.title}>{product.name}</h3>
        <p className={styles.description}>{product.description}</p>
        
        {/* Tags */}
        {product.tags && product.tags.length > 0 && (
          <div className="flex flex-wrap gap-1 mt-2">
            {product.tags.map((tag, index) => (
              <span 
                key={index} 
                className="badge-secondary"
              >
                {tag}
              </span>
            ))}
          </div>
        )}
        
        {/* Price & Actions */}
        <div className="flex justify-between items-center mt-4">
          <div>
            <p className={styles.price}>{formatPrice(product.price)}</p>
            {product.originalPrice && (
              <p className="price-original">
                {formatPrice(product.originalPrice)}
              </p>
            )}
          </div>
          
          {/* Add to Cart Button */}
          {showAddToCart && (
            <button 
              onClick={handleAddToCart}
              className="btn-primary py-2.5 px-4 text-sm md:text-base"
              aria-label={`Add ${product.name} to cart`}
            >
              <span className="hidden sm:inline">Add to Cart</span>
              <span className="sm:hidden">Add</span>
            </button>
          )}
        </div>
        
        {/* Quantity Selector for featured variant */}
        {variant === 'featured' && showAddToCart && (
          <div className="flex items-center justify-between mt-6">
            <div className="quantity-selector">
              <button 
                onClick={() => setQuantity(Math.max(1, quantity - 1))}
                className="quantity-btn"
                aria-label="Decrease quantity"
              >
                -
              </button>
              <span className="font-bold text-gray-900 min-w-[40px] text-center">
                {quantity}
              </span>
              <button 
                onClick={() => setQuantity(quantity + 1)}
                className="quantity-btn"
                aria-label="Increase quantity"
              >
                +
              </button>
            </div>
            <p className="text-lg font-bold text-amber-800">
              {formatPrice(product.price * quantity)}
            </p>
          </div>
        )}
      </div>
    </div>
  );
};

ProductCard.defaultProps = {
  product: {
    id: 1,
    name: "Caramel Macchiato",
    description: "Rich espresso with vanilla syrup and caramel drizzle",
    price: 4.99,
    rating: 4.8,
    category: "coffee",
    image: "https://images.unsplash.com/photo-1570598912132-0ba1dc952b7d?w=400&h=300&fit=crop",
    tags: ["Popular", "Sweet"],
    isNew: false,
    discount: null,
    isLiked: false,
    originalPrice: null
  }
};

export default ProductCard;
</file>

<file path="src/components/ProtectedRoute.jsx">
import React from 'react';
import { Navigate } from 'react-router-dom';

const ProtectedRoute = ({ children }) => {
  const token = localStorage.getItem('token');
  
  if (!token) {
    // Redirect to login if not authenticated
    return <Navigate to="/login" replace />;
  }
  
  return children;
};

export default ProtectedRoute;
</file>

<file path="src/contexts/AuthContext.jsx">
import React, { createContext, useState, useContext, useEffect } from 'react';
import { userAPI } from '../utils/api';

const AuthContext = createContext({});

export const useAuth = () => useContext(AuthContext);

export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // Check if user is logged in on mount
    const token = localStorage.getItem('token');
    const savedUser = localStorage.getItem('user');
    
    if (token && savedUser) {
      setUser(JSON.parse(savedUser));
      // Optional: Validate token with backend
      validateToken();
    }
    
    setLoading(false);
  }, []);

  const validateToken = async () => {
    try {
      await userAPI.getProfile();
    } catch (error) {
      logout();
    }
  };

  const login = (userData, token) => {
    localStorage.setItem('token', token);
    localStorage.setItem('user', JSON.stringify(userData));
    setUser(userData);
  };

  const logout = () => {
    localStorage.removeItem('token');
    localStorage.removeItem('user');
    setUser(null);
    window.location.href = '/login';
  };

  const updateUser = (updatedUser) => {
    localStorage.setItem('user', JSON.stringify(updatedUser));
    setUser(updatedUser);
  };

  return (
    <AuthContext.Provider value={{ user, login, logout, updateUser, loading }}>
      {children}
    </AuthContext.Provider>
  );
};
</file>

<file path="src/contexts/CartContext.jsx">
// src/contexts/CartContext.jsx
import React, { createContext, useContext, useState, useEffect } from 'react';

const CartContext = createContext();

export const useCart = () => {
  const context = useContext(CartContext);
  if (!context) {
    throw new Error('useCart must be used within CartProvider');
  }
  return context;
};

export const CartProvider = ({ children }) => {
  const [cartItems, setCartItems] = useState(() => {
    const savedCart = localStorage.getItem('cart');
    return savedCart ? JSON.parse(savedCart) : [];
  });

  const [cartCount, setCartCount] = useState(0);

  // Update cart count whenever cartItems change
  useEffect(() => {
    const count = cartItems.reduce((sum, item) => sum + item.quantity, 0);
    setCartCount(count);
    localStorage.setItem('cart', JSON.stringify(cartItems));
  }, [cartItems]);

  const addToCart = (product, quantity = 1) => {
    setCartItems(prevItems => {
      const existingItem = prevItems.find(item => item.id === product.id);
      
      if (existingItem) {
        return prevItems.map(item =>
          item.id === product.id
            ? { ...item, quantity: item.quantity + quantity }
            : item
        );
      } else {
        return [...prevItems, { ...product, quantity }];
      }
    });
  };

  const updateQuantity = (id, quantity) => {
    if (quantity < 1) {
      removeFromCart(id);
      return;
    }
    
    setCartItems(prevItems =>
      prevItems.map(item =>
        item.id === id ? { ...item, quantity } : item
      )
    );
  };

  const removeFromCart = (id) => {
    setCartItems(prevItems => prevItems.filter(item => item.id !== id));
  };

  const clearCart = () => {
    setCartItems([]);
  };

  const getCartTotal = () => {
    return cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
  };

  return (
    <CartContext.Provider value={{
      cartItems,
      cartCount,
      addToCart,
      updateQuantity,
      removeFromCart,
      clearCart,
      getCartTotal
    }}>
      {children}
    </CartContext.Provider>
  );
};
</file>

<file path="src/index.css">
/* src/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --color-primary: #92400E;
    --color-secondary: #FBBF24;
    --color-accent: #DC2626;
  }

  * {
    @apply box-border;
  }

  body {
    @apply bg-gray-50 text-gray-900;
    -webkit-tap-highlight-color: transparent;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-gray-100;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-amber-300 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-amber-400;
  }
}

@layer components {
  /* Button Styles */
  .btn-primary {
    @apply bg-gradient-to-r from-amber-600 to-amber-700 text-white 
           px-6 py-3.5 rounded-xl font-bold hover:shadow-xl 
           active:scale-95 transition-all duration-300 
           disabled:opacity-50 disabled:cursor-not-allowed
           w-full md:w-auto;
  }

  .btn-secondary {
    @apply bg-white text-amber-700 border-2 border-amber-200 
           px-6 py-3 rounded-xl font-medium hover:bg-amber-50 
           transition-all duration-300 w-full md:w-auto;
  }

  .btn-outline {
    @apply border-2 border-gray-300 text-gray-700 
           px-4 py-2 rounded-lg hover:bg-gray-50 
           transition-colors w-full md:w-auto;
  }

  /* Input Styles */
  .input-primary {
    @apply w-full px-4 py-3.5 rounded-xl border-2 border-amber-100 
           bg-white focus:border-amber-500 focus:ring-2 
           focus:ring-amber-200 focus:outline-none 
           transition-all duration-300 text-gray-900;
  }

  .input-with-icon {
    @apply pl-12 pr-10;
  }

  /* Card Styles */
  .card {
    @apply bg-white rounded-2xl p-5 shadow-lg hover:shadow-xl 
           transition-all duration-300 border border-gray-100;
  }

  .card-hover {
    @apply hover:-translate-y-1 hover:border-amber-200;
  }

  /* Navigation */
  .nav-item {
    @apply flex flex-col items-center justify-center p-2 
           transition-all duration-200 hover:text-amber-700;
  }

  .nav-item-active {
    @apply text-amber-700 font-bold;
  }

  /* Badge */
  .badge-primary {
    @apply bg-red-500 text-white text-xs font-bold 
           min-w-[20px] h-[20px] rounded-full flex 
           items-center justify-center;
  }

  .badge-secondary {
    @apply bg-amber-100 text-amber-800 text-xs px-2 py-1 
           rounded-full font-medium;
  }

  /* Modal Backdrop */
  .modal-backdrop {
    @apply fixed inset-0 bg-black bg-opacity-50 z-50 
           flex items-center justify-center p-4;
  }

  /* Responsive Grid */
  .responsive-grid {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 
           xl:grid-cols-4 gap-4 md:gap-6;
  }

  /* Section Padding */
  .section-padding {
    @apply px-4 sm:px-6 lg:px-8;
  }

  /* Container */
  .container-responsive {
    @apply max-w-7xl mx-auto;
  }

  /* Typography */
  .heading-1 {
    @apply text-3xl md:text-4xl font-bold text-gray-900;
  }

  .heading-2 {
    @apply text-2xl md:text-3xl font-bold text-gray-900;
  }

  .heading-3 {
    @apply text-xl md:text-2xl font-bold text-gray-900;
  }

  .body-text {
    @apply text-gray-600 text-sm md:text-base;
  }

  /* Price Display */
  .price-display {
    @apply text-2xl font-bold text-amber-800;
  }

  .price-original {
    @apply text-gray-400 text-sm line-through;
  }

  /* Quantity Selector */
  .quantity-selector {
    @apply flex items-center gap-3 bg-gray-100 rounded-xl px-3 py-2;
  }

  .quantity-btn {
    @apply w-8 h-8 rounded-full bg-white text-gray-700 
           flex items-center justify-center hover:bg-gray-200 
           transition-colors border border-gray-300;
  }

  /* Toast/Success Message */
  .toast-success {
    @apply fixed top-4 right-4 bg-green-500 text-white 
           px-6 py-3 rounded-lg shadow-lg z-50 animate-slide-in;
  }

  /* Animation */
  @keyframes slide-in {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  .animate-slide-in {
    animation: slide-in 0.3s ease-out;
  }

  /* Loading Skeleton */
  .skeleton {
    @apply animate-pulse bg-gray-200 rounded;
  }
}

/* Responsive Utilities */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }

  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }

  .line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
  }

  /* Hide scrollbar but keep functionality */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Smooth transitions */
  .transition-fast {
    @apply transition-all duration-200;
  }

  .transition-normal {
    @apply transition-all duration-300;
  }

  .transition-slow {
    @apply transition-all duration-500;
  }

  /* Aspect ratios */
  .aspect-square {
    aspect-ratio: 1 / 1;
  }

  .aspect-video {
    aspect-ratio: 16 / 9;
  }
}

/* Print styles */
@media print {
  .no-print {
    display: none !important;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Smooth transitions */
.login-enter {
  opacity: 0;
  transform: translateY(20px);
}

.login-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition: opacity 300ms, transform 300ms;
}

/* Gradient animations */
@keyframes gradient-shift {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.animate-gradient {
  background-size: 200% 200%;
  animation: gradient-shift 15s ease infinite;
}

/* Floating animation */
@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

/* Button hover effects */
.btn-gradient:hover {
  transform: translateY(-2px);
  box-shadow: 0 20px 40px rgba(146, 64, 14, 0.3);
}

/* Input focus effects */
.input-focus:focus {
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
}

/* Loading spinner */
.spinner {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Shake animation for errors */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
  20%, 40%, 60%, 80% { transform: translateX(5px); }
}

.animate-shake {
  animation: shake 0.5s ease-in-out;
}
</file>

<file path="src/main.jsx">
// src/main.jsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)
</file>

<file path="src/pages/CartPage.jsx">
import React, { useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';

// Fungsi format Rupiah
const formatRupiah = (amount) => {
  return new Intl.NumberFormat('id-ID', {
    style: 'currency',
    currency: 'IDR',
    minimumFractionDigits: 0,
    maximumFractionDigits: 0
  }).format(amount);
};

// Ikon SVG
const HomeIcon = ({ active = false }) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M9 17H15" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
    <path d="M12 9V13" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
    <path d="M9 13H15" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const CoffeeIcon = ({ active = false }) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M8 12H16" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
    <path d="M10 8V12H14V8" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
    <path d="M8 16H16" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
  </svg>
);

const CartIcon = ({ count = 0, active = false }) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M8 16H16" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
    <path d="M10 10V12" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
    <path d="M14 10V12" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
    <path d="M7.5 16L8.5 10H15.5L16.5 16H7.5Z" 
          stroke={active ? "#92400E" : "#9CA3AF"} 
          strokeWidth="1.5" 
          fill="none" 
          strokeLinejoin="round" />
    
    {count > 0 && (
      <>
        <circle 
          cx="18" 
          cy="6" 
          r="6" 
          fill="#EF4444" 
          stroke="white" 
          strokeWidth="1.5"
        />
        <text 
          x="18" 
          y="8.5" 
          textAnchor="middle" 
          fill="white" 
          fontSize="7" 
          fontWeight="bold"
          fontFamily="Arial, sans-serif"
        >
          {count > 9 ? "9+" : count}
        </text>
      </>
    )}
  </svg>
);

const ProfileIcon = ({ active = false }) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <circle cx="12" cy="9" r="3" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M6 20C6 16 9 13 12 13C15 13 18 16 18 20" 
          stroke={active ? "#92400E" : "#9CA3AF"} 
          strokeWidth="1.5" 
          strokeLinecap="round" />
  </svg>
);

const CartPage = () => {
  const navigate = useNavigate();
  
  // Initialize with sample cart items (no loading)
  const [cartItems, setCartItems] = useState([
    {
      id: 1,
      product_id: 'prod_1',
      name: 'Caramel Macchiato',
      description: "Rich espresso with vanilla syrup",
      price: 35000,
      quantity: 2,
      image: "https://dinnerthendessert.com/wp-content/uploads/2023/10/Caramel-Macchiato-7-500x500.jpg",
      category: "coffee"

    },
    {
      id: 2,
      product_id: 'prod_2',
      name: 'Chocolate Croissant',
      description: "Flaky, buttery french croissant",
      price: 22000,
      quantity: 1,
      image: "https://sallysbakingaddiction.com/wp-content/uploads/2018/03/chocolate-croissants-2.jpg",
      category: 'Pastry'
    }
  ]);
  
  const [appliedPromo, setAppliedPromo] = useState(null);
  const [promoCode, setPromoCode] = useState('');
  const [showPromoModal, setShowPromoModal] = useState(false);

  // Available promos (dalam Rupiah)
  const availablePromos = [
    {
      id: 1,
      code: "STEALDEAL",
      name: "STEALDEAL",
      description: "Save Rp 110.000 on this order!",
      details: "Use code STEALDEAL & GET 60% OFF on orders above Rp 175.000. Maximum discount: Rp 110.000",
      discountType: "percentage",
      discountValue: 60,
      minOrder: 175000,
      maxDiscount: 110000
    },
    {
      id: 2,
      code: "CAFFINITY10",
      name: "CAFFINITY10",
      description: "Get 10% off your order",
      details: "Get 10% discount on all orders. No minimum purchase required.",
      discountType: "percentage",
      discountValue: 10,
      minOrder: 0,
      maxDiscount: 50000
    },
    {
      id: 3,
      code: "FREESHIP",
      name: "FREESHIP",
      description: "Free delivery on your order",
      details: "Free delivery for orders above Rp 50.000",
      discountType: "delivery",
      discountValue: 100,
      minOrder: 50000,
      maxDiscount: 20000
    }
  ];

  // Update quantity - langsung tanpa loading
  const updateQuantity = (productId, newQuantity) => {
    if (newQuantity === 0) {
      // Remove item
      setCartItems(prev => prev.filter(item => (item.product_id || item.id) !== productId));
    } else {
      // Update quantity
      setCartItems(prev => 
        prev.map(item => 
          (item.product_id || item.id) === productId 
            ? { ...item, quantity: newQuantity }
            : item
        )
      );
    }
  };

  // Remove item from cart
  const removeItem = (productId) => {
    setCartItems(prev => prev.filter(item => (item.product_id || item.id) !== productId));
  };

  // Clear all items
  const clearAllItems = () => {
    if (window.confirm('Are you sure you want to clear all items from your cart?')) {
      setCartItems([]);
    }
  };

  // Apply promo code
  const applyPromoCode = (code) => {
    const promo = availablePromos.find(p => p.code === code);
    
    if (!promo) {
      alert("Kode promo tidak valid!");
      return;
    }

    const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    
    if (subtotal < promo.minOrder) {
      alert(`Minimum pembelian ${formatRupiah(promo.minOrder)} untuk promo ini.`);
      return;
    }

    setAppliedPromo(promo);
    setShowPromoModal(false);
  };

  // Remove promo
  const removePromo = () => {
    setAppliedPromo(null);
    setPromoCode('');
  };

  // Calculate totals
  const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
  const tax = subtotal * 0.11; 
  const deliveryFee = subtotal > 0 ? 10000 : 0;
  
  // Calculate promo discount
  let promoDiscount = 0;
  let deliveryDiscount = 0;
  
  if (appliedPromo) {
    if (appliedPromo.discountType === "percentage") {
      const discount = (subtotal * appliedPromo.discountValue) / 100;
      promoDiscount = Math.min(discount, appliedPromo.maxDiscount || discount);
    } else if (appliedPromo.discountType === "fixed") {
      promoDiscount = appliedPromo.discountValue;
    } else if (appliedPromo.discountType === "delivery") {
      deliveryDiscount = deliveryFee; // Free delivery
    }
  }
  
  const total = Math.max(0, subtotal + tax + deliveryFee - promoDiscount - deliveryDiscount);
  const totalCartItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);

  // Promo Modal Component
  const PromoModal = () => {
    if (!showPromoModal) return null;

    return (
      <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div className="bg-white rounded-2xl w-full max-w-sm max-h-[70vh] overflow-hidden mb-16">
          <div className="sticky top-0 bg-white border-b border-gray-200 p-4">
            <div className="flex justify-between items-center">
              <h2 className="text-xl font-bold text-gray-900">DISCOUNT</h2>
              <button 
                onClick={() => setShowPromoModal(false)}
                className="text-gray-500 hover:text-gray-700"
              >
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="9" stroke="currentColor" strokeWidth="1.5" fill="none"/>
                  <path d="M8 8L16 16" stroke="currentColor" strokeWidth="2" strokeLinecap="round"/>
                  <path d="M8 16L16 8" stroke="currentColor" strokeWidth="2" strokeLinecap="round"/>
                </svg>
              </button>
            </div>
            <div className="mt-2">
              <div className="text-2xl md:text-3xl font-bold text-amber-900">
                Total keranjang {formatRupiah(subtotal)}
              </div>
            </div>
          </div>

          <div className="overflow-y-auto max-h-[60vh] p-4">
            <div className="mb-6">
              <div className="flex gap-2 mb-4">
                <input
                  type="text"
                  placeholder="Masukkan Kode Promo"
                  value={promoCode}
                  onChange={(e) => setPromoCode(e.target.value.toUpperCase())}
                  className="flex-1 px-4 py-3 rounded-xl border-2 border-amber-200 focus:outline-none focus:border-amber-500"
                />
                <button 
                  onClick={() => applyPromoCode(promoCode)}
                  className="bg-amber-700 text-white px-6 py-3 rounded-xl font-medium hover:bg-amber-800 transition-colors whitespace-nowrap"
                >
                  TERAPKAN
                </button>
              </div>
            </div>

            <div className="mb-6">
              <div className="flex items-center gap-2 mb-3">
                <div className="w-1 h-6 bg-amber-500 rounded-full"></div>
                <h3 className="font-bold text-gray-900">Promo for You</h3>
              </div>
              
              {availablePromos.map((promo) => (
                <div key={promo.id} className="bg-gradient-to-r from-amber-50 to-amber-100 rounded-xl p-4 mb-3 border-2 border-amber-300">
                  <div className="flex justify-between items-start mb-2">
                    <div>
                      <div className="flex items-center gap-2 mb-1">
                        <span className="text-red-600 font-bold text-lg">
                          {promo.discountType === "percentage" ? `${promo.discountValue}% OFF` : 
                           promo.discountType === "delivery" ? "FREE DELIVERY" : 
                           `${formatRupiah(promo.discountValue)} OFF`}
                        </span>
                        <span className="bg-white text-amber-700 px-2 py-1 rounded text-xs font-bold">
                          {promo.name}
                        </span>
                      </div>
                      <h4 className="font-bold text-gray-900">{promo.description}</h4>
                    </div>
                    {promo.id === 1 && (
                      <span className="bg-amber-500 text-white text-xs px-2 py-1 rounded-full">
                        TERBAIK
                      </span>
                    )}
                  </div>
                  
                  <p className="text-gray-600 text-sm mb-3">{promo.details}</p>
                  
                  <div className="flex justify-between items-center">
                    <span className="text-xs text-gray-500">
                      Min. purchase: {formatRupiah(promo.minOrder)}
                    </span>
                    <button
                      onClick={() => {
                        setPromoCode(promo.code);
                        applyPromoCode(promo.code);
                      }}
                      className="bg-amber-700 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-amber-800 transition-colors"
                    >
                      TERAPKAN
                    </button>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    );
  };

  // Empty cart state
  if (cartItems.length === 0) {
    return (
      <div className="min-h-screen bg-gradient-to-b from-amber-50 to-white pb-24">
        {/* Header */}
        <header className="px-6 pt-10 pb-6">
          <h1 className="text-3xl font-bold text-gray-900">Your Cart</h1>
          <p className="text-gray-600 mt-2">Your favorite drinks and foods</p>
        </header>

        {/* Empty Cart */}
        <div className="px-6 mt-8">
          <div className="bg-white rounded-3xl p-8 shadow-lg text-center">
            <div className="w-24 h-24 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-6">
              <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="24" cy="24" r="22" stroke="#92400E" strokeWidth="1.5" fill="none" />
                <circle cx="18" cy="18" r="4" stroke="#92400E" strokeWidth="1.5" fill="none" />
                <circle cx="30" cy="18" r="4" stroke="#92400E" strokeWidth="1.5" fill="none" />
                <path d="M12 36L18 18" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M36 36L30 18" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M12 36H36" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
              </svg>
            </div>
            <h2 className="text-2xl font-bold text-gray-900 mb-3">Your cart is empty</h2>
            <p className="text-gray-600 mb-8 max-w-md mx-auto">
              It looks like you haven't added any drinks or food to your cart.
            </p>
            <Link 
              to="/menu" 
              className="inline-block bg-amber-700 text-white px-8 py-3.5 rounded-2xl font-bold hover:bg-amber-800 active:scale-95 transition-all duration-300 shadow-lg hover:shadow-xl"
            >
              See Menu
            </Link>
          </div>
        </div>

        {/* Bottom Navigation */}
        <nav className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-2xl py-3">
          <div className="flex justify-center">
            <div className="flex justify-between w-full max-w-md px-6">
              <Link to="/" className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group">
                <div className="group-hover:scale-110 transition-transform duration-200">
                  <HomeIcon />
                </div>
                <span className="text-xs font-medium mt-1">Home</span>
              </Link>
              
              <Link to="/menu" className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group">
                <div className="group-hover:scale-110 transition-transform duration-200">
                  <CoffeeIcon />
                </div>
                <span className="text-xs font-medium mt-1">Menu</span>
              </Link>
              
              <Link to="/cart" className="flex flex-col items-center text-amber-700 flex-1 group">
                <div className="group-hover:scale-110 transition-transform duration-200">
                  <CartIcon active={true} count={0} />
                </div>
                <span className="text-xs font-bold mt-1">Cart</span>
              </Link>
              
              <Link to="/profile" className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group">
                <div className="group-hover:scale-110 transition-transform duration-200">
                  <ProfileIcon />
                </div>
                <span className="text-xs font-medium mt-1">Me</span>
              </Link>
            </div>
          </div>
        </nav>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-b from-amber-50 to-white pb-24">
      {/* Promo Modal */}
      <PromoModal />

      {/* Header */}
      <header className="px-6 pt-10 pb-6 bg-white/80 backdrop-blur-sm sticky top-0 z-10">
        <div className="flex justify-between items-center">
          <div>
            <h1 className="text-2xl md:text-3xl font-bold text-amber-900">Cart</h1>
            <p className="text-gray-600 mt-2">{cartItems.length} item ‚Ä¢ {formatRupiah(total)} total</p>
          </div>
          <button 
            onClick={clearAllItems}
            className="text-red-600 text-sm font-medium hover:text-red-700 px-4 py-2 rounded-lg hover:bg-red-50 transition-colors"
          >
            Delete All
          </button>
        </div>
      </header>

      {/* Cart Items */}
      <section className="px-6 mt-4">
        <div className="space-y-4">
          {cartItems.map(item => (
            <div key={item.id} className="bg-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all duration-300 border border-amber-100">
              <div className="flex gap-4">
                {/* Product Image */}
                <div className="relative w-20 h-20 rounded-xl overflow-hidden flex-shrink-0">
                  <img 
                    src={item.image} 
                    alt={item.name}
                    className="w-full h-full object-cover"
                  />
                  <span className="absolute top-1 right-1 bg-amber-700 text-white text-xs px-2 py-0.5 rounded-full">
                    {item.category}
                  </span>
                </div>

                {/* Product Details */}
                <div className="flex-1">
                  <div className="flex justify-between items-start">
                    <div>
                      <h3 className="font-bold text-gray-900">{item.name}</h3>
                      <p className="text-gray-600 text-sm mt-1">{item.description}</p>
                      <p className="text-amber-800 font-bold text-lg mt-2">{formatRupiah(item.price)}</p>
                    </div>
                    <button 
                      onClick={() => removeItem(item.product_id || item.id)}
                      className="text-gray-400 hover:text-red-500 p-2 transition-colors"
                    >
                      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="10" cy="10" r="9" stroke="currentColor" strokeWidth="1.5" fill="none" />
                        <line x1="6" y1="6" x2="14" y2="14" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
                        <line x1="6" y1="14" x2="14" y2="6" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
                      </svg>
                    </button>
                  </div>

                  {/* Quantity Controls */}
                  <div className="flex justify-between items-center mt-4">
                    <div className="flex items-center gap-3">
                      <button 
                        onClick={() => updateQuantity(item.product_id || item.id, item.quantity - 1)}
                        className="w-8 h-8 rounded-full bg-amber-100 text-amber-700 flex items-center justify-center hover:bg-amber-200 transition-colors"
                      >
                        <span className="text-lg font-bold">-</span>
                      </button>
                      <span className="font-bold text-gray-900 min-w-[40px] text-center">
                        {item.quantity}
                      </span>
                      <button 
                        onClick={() => updateQuantity(item.product_id || item.id, item.quantity + 1)}
                        className="w-8 h-8 rounded-full bg-amber-100 text-amber-700 flex items-center justify-center hover:bg-amber-200 transition-colors"
                      >
                        <span className="text-lg font-bold">+</span>
                      </button>
                    </div>
                    <div className="text-right">
                      <p className="text-sm text-gray-500">Subtotal</p>
                      <p className="text-xl font-bold text-amber-800">
                        {formatRupiah(item.price * item.quantity)}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          ))}
        </div>
      </section>

      {/* Order Summary */}
      <section className="px-6 mt-8">
        <div className="bg-white rounded-2xl p-6 shadow-lg border border-amber-100">
          <h2 className="text-xl font-bold text-gray-900 mb-6">Order Summary</h2>
          
          <div className="space-y-4">
            <div className="flex justify-between">
              <span className="text-gray-600">Subtotal</span>
              <span className="font-medium">{formatRupiah(subtotal)}</span>
            </div>
            
            <div className="flex justify-between">
              <span className="text-gray-600">Tax</span>
              <span className="font-medium">{formatRupiah(tax)}</span>
            </div>
            
            <div className="flex justify-between">
              <span className="text-gray-600">Delivery Cost</span>
              <span className="font-medium">{formatRupiah(deliveryFee)}</span>
            </div>
            
            {/* Promo Discount */}
            {appliedPromo && (
              <>
                {promoDiscount > 0 && (
                  <div className="flex justify-between text-green-600">
                    <div className="flex items-center gap-2">
                      <span>Discount ({appliedPromo.code})</span>
                      <button 
                        onClick={removePromo}
                        className="text-red-500 hover:text-red-700 text-xs"
                      >
                        Delete
                      </button>
                    </div>
                    <span className="font-medium">-{formatRupiah(promoDiscount)}</span>
                  </div>
                )}
                
                {deliveryDiscount > 0 && (
                  <div className="flex justify-between text-green-600">
                    <div className="flex items-center gap-2">
                      <span>Free  ({appliedPromo.code})</span>
                      <button 
                        onClick={removePromo}
                        className="text-red-500 hover:text-red-700 text-xs"
                      >
                        Delete
                      </button>
                    </div>
                    <span className="font-medium">-{formatRupiah(deliveryDiscount)}</span>
                  </div>
                )}
              </>
            )}
            
            <div className="border-t border-gray-200 pt-4 mt-4">
              <div className="flex justify-between items-center">
                <div>
                  <span className="text-lg font-bold text-gray-900">Total</span>
                  <p className="text-gray-500 text-sm">Including all taxes and fees</p>
                </div>
                <span className="text-2xl font-bold text-amber-800">{formatRupiah(total)}</span>
              </div>
            </div>
          </div>

          {/* Promo Code Section */}
          <div className="mt-8">
            <div className="flex items-center justify-between mb-4">
              <h3 className="font-bold text-gray-900">Promo Code</h3>
              <button 
                onClick={() => setShowPromoModal(true)}
                className="text-amber-700 font-medium hover:text-amber-800 flex items-center gap-1"
              >
                See All
                <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="6" cy="6" r="5" stroke="#92400E" strokeWidth="1" fill="none"/>
                  <path d="M5 4L7 6L5 8" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round"/>
                </svg>
              </button>
            </div>
            
            <div className="flex gap-2">
              <input
                type="text"
                placeholder="Enter Promo Code"
                value={promoCode}
                onChange={(e) => setPromoCode(e.target.value.toUpperCase())}
                className="flex-1 px-4 py-3 rounded-xl border-2 border-amber-200 focus:outline-none focus:border-amber-500"
              />
              <button 
                onClick={() => {
                  if (promoCode) {
                    applyPromoCode(promoCode);
                  } else {
                    setShowPromoModal(true);
                  }
                }}
                className="bg-amber-700 text-white px-6 py-3 rounded-xl font-medium hover:bg-amber-800 transition-colors whitespace-nowrap"
              >
                {promoCode ? "APPLY" : "Details Promo"}
              </button>
            </div>
            
            {/* Applied Promo Display */}
            {appliedPromo && (
              <div className="mt-4 p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200">
                <div className="flex justify-between items-center">
                  <div>
                    <div className="flex items-center gap-2">
                      <span className="font-bold text-green-700">{appliedPromo.code}</span>
                      <span className="text-sm text-green-600">Terpasang</span>
                    </div>
                    <p className="text-sm text-gray-600 mt-1">{appliedPromo.description}</p>
                  </div>
                  <button 
                    onClick={removePromo}
                    className="text-red-500 hover:text-red-700 text-sm font-medium"
                  >
                    Delete
                  </button>
                </div>
              </div>
            )}
          </div>

          {/* Checkout Button */}
          <button
            onClick={() => {
              const orderData = {
                items: cartItems.map(item => ({
                  product_id: item.product_id || item.id,
                  quantity: item.quantity,
                  price: item.price,
                  name: item.name,
                  image_url: item.image
                })),
                subtotal,
                tax,
                deliveryFee,
                promoDiscount,
                deliveryDiscount,
                total,
                appliedPromo
              };
              
              navigate('/checkout', { state: orderData });
            }}
            className="mt-8 w-full bg-gradient-to-r from-amber-700 to-amber-900 text-white py-4 rounded-2xl font-bold text-lg hover:shadow-2xl active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-3"
          >
            <span>Continue Payment</span>
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="10" cy="10" r="9" stroke="white" strokeWidth="1.5" fill="none" />
              <path d="M8 6L12 10L8 14" stroke="white" strokeWidth="2" strokeLinecap="round" />
            </svg>
          </button>

          <p className="text-center text-gray-500 text-sm mt-4">
            Free shipping for orders above {formatRupiah(15000)}
          </p>
        </div>
      </section>

      {/* Continue Shopping */}
      <section className="px-6 mt-6 mb-8">
        <Link 
          to="/menu" 
          className="block w-full border-2 border-amber-700 text-amber-700 py-3.5 rounded-2xl font-bold text-center hover:bg-amber-50 transition-colors duration-300"
        >
          + Continue Shopping
        </Link>
      </section>

      {/* Bottom Navigation */}
      <nav className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-2xl py-3">
        <div className="flex justify-center">
          <div className="flex justify-between w-full max-w-md px-6">
            <Link 
              to="/" 
              className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <HomeIcon />
              </div>
              <span className="text-xs font-medium mt-1">Home</span>
            </Link>
            
            <Link 
              to="/menu" 
              className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <CoffeeIcon />
              </div>
              <span className="text-xs font-medium mt-1">Menu</span>
            </Link>
            
            <Link 
              to="/cart" 
              className="flex flex-col items-center text-amber-700 flex-1 group"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <CartIcon active={true} count={totalCartItems} />
              </div>
              <span className="text-xs font-bold mt-1">Cart</span>
            </Link>
            
            <Link 
              to="/profile" 
              className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <ProfileIcon />
              </div>
              <span className="text-xs font-medium mt-1">Me</span>
            </Link>
          </div>
        </div>
      </nav>
    </div>
  );
};

export default CartPage;
</file>

<file path="src/pages/CheckoutPage.jsx">
import React, { useState } from 'react';
import { Link, useLocation } from 'react-router-dom';

// Fungsi format Rupiah
const formatRupiah = (amount) => {
  return new Intl.NumberFormat('id-ID', {
    style: 'currency',
    currency: 'IDR',
    minimumFractionDigits: 0,
    maximumFractionDigits: 0
  }).format(amount);
};

// Komponen CheckoutPage
const CheckoutPage = ({ cartItems, appliedPromo, openChat, onOrderComplete }) => {
  const location = useLocation();
  const [deliveryTip, setDeliveryTip] = useState(null);
  const [platformFee] = useState(3000); // Rp 3.000
  
  // Ambil data dari location state (dari CartPage)
  const stateData = location.state || {};
  
  // Prioritaskan data dari state CartPage, jika tidak ada gunakan props
  const stateCartItems = stateData.cartItems || [];
  const stateOrderSummary = stateData.orderSummary || {};
  const stateAppliedPromo = stateData.appliedPromo || appliedPromo;
  
  // Gunakan data dari state CartPage jika ada, jika tidak gunakan props
  const currentCartItems = stateCartItems.length > 0 ? stateCartItems : 
                         (cartItems && cartItems.length > 0 ? cartItems : [
    // Default data hanya untuk preview
    {
      id: 1,
      name: "Caramel Macchiato",
      price: 35000, 
      quantity: 2,
      image: "https://dinnerthendessert.com/wp-content/uploads/2023/10/Caramel-Macchiato-7-500x500.jpg"
    },
    {
      id: 3,
      name: "Chocolate Croissant",
      price: 22000, 
      quantity: 1,
      image: "https://sallysbakingaddiction.com/wp-content/uploads/2018/03/chocolate-croissants-2.jpg"
    }
  ]);
  
  // Gunakan data dari order summary jika ada
  const subtotal = stateOrderSummary.summary?.subtotal || 
                   currentCartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
  
  const tax = stateOrderSummary.summary?.tax || (subtotal * 0.11); 
  const deliveryFee = stateOrderSummary.summary?.deliveryFee || 10000; 
  // Hitung promo discount
  let promoDiscount = 0;
  if (stateAppliedPromo) {
    if (stateAppliedPromo.discountType === "percentage") {
      const discount = (subtotal * stateAppliedPromo.discountValue) / 100;
      promoDiscount = Math.min(discount, stateAppliedPromo.maxDiscount || discount);
    } else if (stateAppliedPromo.discountType === "fixed") {
      promoDiscount = stateAppliedPromo.discountValue;
    }
  } else if (stateOrderSummary.summary?.promoDiscount) {
    promoDiscount = stateOrderSummary.summary.promoDiscount;
  }
  
  // Hitung total akhir dengan tips
  const tipsAmount = deliveryTip || 0;
  const finalTotal = subtotal + tax + deliveryFee + platformFee + tipsAmount - promoDiscount;

  // Fungsi untuk generate order number
  const generateOrderNumber = () => {
    return `ORD-${Date.now().toString().slice(-8)}`;
  };

  // Fungsi untuk handle place order
  const handlePlaceOrder = () => {
    // Generate order number
    const orderNumber = generateOrderNumber();
    
    // Simpan data order lengkap
    const orderData = {
      orderNumber: orderNumber,
      cartItems: currentCartItems,
      orderSummary: {
        subtotal: subtotal,
        tax: tax,
        deliveryFee: deliveryFee,
        platformFee: platformFee,
        tips: tipsAmount,
        promoDiscount: promoDiscount,
        total: finalTotal,
        appliedPromo: stateAppliedPromo
      },
      estimatedDelivery: "25-40 minutes",
      deliveryDate: new Date().toLocaleDateString('id-ID', { 
        weekday: 'short', 
        year: 'numeric', 
        month: 'short', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      })
    };
    
    // Panggil callback untuk reset cart di App.jsx
    if (onOrderComplete) {
      onOrderComplete();
    }
    
    return orderData;
  };

  // Empty cart handling
  if (currentCartItems.length === 0) {
    return (
      <div className="min-h-screen bg-gradient-to-b from-amber-50 to-white pb-24">
        <header className="px-6 pt-10 pb-6 bg-white/80 backdrop-blur-sm sticky top-0 z-10 border-b border-gray-200">
          <div className="flex items-center gap-4">
            <Link to="/cart" className="text-gray-500">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="9" stroke="#9CA3AF" strokeWidth="1.5" fill="none"/>
                <path d="M15 18L9 12L15 6" stroke="#9CA3AF" strokeWidth="2" strokeLinecap="round"/>
              </svg>
            </Link>
            <div>
              <h1 className="text-2xl md:text-3xl font-bold text-amber-900">Checkout</h1>
              <p className="text-gray-600 mt-1">Keranjang Anda kosong</p>
            </div>
          </div>
        </header>
        
        <main className="px-6 mt-8">
          <div className="bg-white rounded-2xl p-8 shadow-lg text-center">
            <div className="w-24 h-24 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-6">
              <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="24" cy="24" r="22" stroke="#92400E" strokeWidth="1.5" fill="none" />
                <circle cx="18" cy="18" r="4" stroke="#92400E" strokeWidth="1.5" fill="none" />
                <circle cx="30" cy="18" r="4" stroke="#92400E" strokeWidth="1.5" fill="none" />
                <path d="M12 36L18 18" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M36 36L30 18" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
                <path d="M12 36H36" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
              </svg>
            </div>
            <h2 className="text-2xl font-bold text-gray-900 mb-3">Tidak ada item untuk checkout</h2>
            <p className="text-gray-600 mb-8 max-w-md mx-auto">
              Tambahkan beberapa minuman atau makanan ke keranjang terlebih dahulu.
            </p>
            <Link 
              to="/menu" 
              className="inline-block bg-amber-700 text-white px-8 py-3.5 rounded-2xl font-bold hover:bg-amber-800 active:scale-95 transition-all duration-300 shadow-lg hover:shadow-xl"
            >
              Lihat Menu
            </Link>
          </div>
        </main>
      </div>
    );
  }

  // Tips options dalam Rupiah
  const tipOptions = [5000, 10000, 15000];

  return (
    <div className="min-h-screen bg-gradient-to-b from-amber-50 to-white pb-24">
      {/* Header */}
      <header className="px-6 pt-10 pb-6 bg-white/80 backdrop-blur-sm sticky top-0 z-10 border-b border-gray-200">
        <div className="flex items-center gap-4">
          <Link to="/cart" className="text-gray-500">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="9" stroke="#9CA3AF" strokeWidth="1.5" fill="none"/>
              <path d="M15 18L9 12L15 6" stroke="#9CA3AF" strokeWidth="2" strokeLinecap="round"/>
            </svg>
          </Link>
          <div>
            <h1 className="text-2xl md:text-3xl font-bold text-amber-900">Checkout</h1>
            <p className="text-gray-600 mt-1">Review your order before payment</p>
          </div>
        </div>
      </header>

      {/* Main Content */}
      <main className="px-6 mt-6">
        {/* Order Summary */}
        <div className="bg-white rounded-2xl p-6 shadow-lg border border-amber-100 mb-6">
          <h2 className="text-xl font-bold text-gray-900 mb-4">Order Summary</h2>
          
          {/* Cart Items */}
          <div className="space-y-4 mb-6">
            {currentCartItems.map((item) => (
              <div key={item.id} className="flex justify-between items-center pb-3 border-b border-gray-100 last:border-0">
                <div className="flex items-center gap-3">
                  <div className="w-12 h-12 rounded-lg overflow-hidden">
                    <img 
                      src={item.image} 
                      alt={item.name}
                      className="w-full h-full object-cover"
                    />
                  </div>
                  <div>
                    <h3 className="font-medium text-gray-900">{item.name}</h3>
                    <p className="text-gray-500 text-sm">Qty: {item.quantity} √ó {formatRupiah(item.price)}</p>
                  </div>
                </div>
                <span className="font-bold text-amber-800">
                  {formatRupiah(item.price * item.quantity)}
                </span>
              </div>
            ))}
          </div>

          {/* Bill Details */}
          <div className="space-y-3">
            <div className="flex justify-between text-gray-600">
              <span>Total Item</span>
              <span>{formatRupiah(subtotal)}</span>
            </div>
            
            <div className="flex justify-between text-gray-600">
              <span>Tax</span>
              <span>{formatRupiah(tax)}</span>
            </div>
            
            {promoDiscount > 0 && (
              <div className="flex justify-between text-green-600">
                <div className="flex items-center gap-2">
                  <span>Discount {stateAppliedPromo?.code ? `(${stateAppliedPromo.code})` : ''}</span>
                </div>
                <span>-{formatRupiah(promoDiscount)}</span>
              </div>
            )}
            
            <div className="flex justify-between text-gray-600">
              <span>Delivery Cost</span>
              <span>{formatRupiah(deliveryFee)}</span>
            </div>
            
            {/* Delivery Tip Section */}
            <div className="pt-3 border-t border-gray-200">
              <h3 className="font-medium text-gray-900 mb-3">Give tips for drivers</h3>
              <p className="text-gray-500 text-sm mb-4">
                Appreciate your driver by leaving a tip. 100% of the tip goes to the driver.
              </p>
              <div className="flex gap-3 mb-3">
                {tipOptions.map((amount) => (
                  <button
                    key={amount}
                    onClick={() => setDeliveryTip(amount)}
                    className={`flex-1 py-3 rounded-xl text-center font-medium transition-all ${
                      deliveryTip === amount
                        ? 'bg-amber-700 text-white'
                        : 'bg-amber-100 text-amber-700 hover:bg-amber-200'
                    }`}
                  >
                    {formatRupiah(amount)}
                  </button>
                ))}
              </div>
              
              <div className="flex gap-3">
                <button
                  onClick={() => setDeliveryTip(null)}
                  className={`flex-1 py-3 rounded-xl text-center font-medium transition-all ${
                    deliveryTip === null
                      ? 'bg-gray-100 text-gray-700 border-2 border-gray-300'
                      : 'bg-white text-gray-600 border border-gray-300 hover:bg-gray-50'
                  }`}
                >
                  None
                </button>
                <button
                  onClick={() => {
                    const customAmount = parseFloat(prompt("Masukkan jumlah tips (Rupiah):"));
                    if (!isNaN(customAmount) && customAmount > 0) {
                      setDeliveryTip(customAmount);
                    }
                  }}
                  className="flex-1 py-3 rounded-xl text-center font-medium bg-white text-amber-700 border border-amber-300 hover:bg-amber-50"
                >
                  Custom
                </button>
              </div>
            </div>
            
            <div className="flex justify-between text-gray-600 pt-3 border-t border-gray-200">
              <span>Platform Cost</span>
              <span>{formatRupiah(platformFee)}</span>
            </div>
            
            {/* Total */}
            <div className="pt-4 border-t border-gray-200 mt-4">
              <div className="flex justify-between items-center">
                <span className="text-lg font-bold text-gray-900">Total</span>
                <span className="text-2xl font-bold text-amber-800">{formatRupiah(finalTotal)}</span>
              </div>
            </div>
          </div>
        </div>

        {/* Offers & Benefits */}
        <div className="bg-white rounded-2xl p-6 shadow-lg border border-amber-100 mb-6">
          <h2 className="text-xl font-bold text-gray-900 mb-4">Promotions & Benefits</h2>
          
          <div className="space-y-3">
            {/* Steal Deal Banner */}
            <div className="bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-200 rounded-xl p-4">
              <div className="flex items-center justify-between mb-2">
                <div className="flex items-center gap-2">
                  <span className="bg-red-600 text-white px-3 py-1 rounded-lg font-bold">
                    STEALDEAL
                  </span>
                  <span className="font-bold text-red-700">Apply</span>
                </div>
                <span className="text-lg font-bold text-red-700">Save Rp. 100,000</span>
              </div>
              <p className="text-gray-600 text-sm">
                Save an additional Rp. 100,000 on this order
              </p>
            </div>
            
            <button className="w-full text-amber-700 font-medium hover:text-amber-800 flex items-center justify-center gap-2 py-3">
              See other promotions
              <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="6" cy="6" r="5" stroke="#92400E" strokeWidth="1" fill="none"/>
                <path d="M5 4L7 6L5 8" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round"/>
              </svg>
            </button>
          </div>
        </div>

        {/* Note Section */}
        <div className="bg-yellow-50 border border-yellow-200 rounded-2xl p-5 mb-6">
          <h3 className="font-bold text-gray-900 mb-2">Note</h3>
          <p className="text-gray-700 text-sm mb-3">
            Review order and address details to avoid cancellation.
          </p>
          <p className="text-gray-600 text-xs">
            Note: If you cancel within 60 seconds of ordering, a 100% refund will be issued. No refunds will be issued for cancellations made after 60 seconds.
          </p>
        </div>

        {/* Place Order Button */}
        <div className="sticky bottom-20 bg-white/80 backdrop-blur-sm py-4 border-t border-gray-200 -mx-6 px-6">
          <div className="flex justify-between items-center mb-3">
            <div>
              <p className="text-gray-600 text-sm">Total</p>
              <p className="text-2xl font-bold text-amber-800">{formatRupiah(finalTotal)}</p>
            </div>
            <Link 
              to={{
                pathname: "/order-success",
                state: { 
                  orderData: handlePlaceOrder(),
                  fromCheckout: true 
                }
              }}
              onClick={() => {
                // Trigger order completion
                const orderData = handlePlaceOrder();
                return orderData;
              }}
              className="bg-gradient-to-r from-amber-700 to-amber-900 text-white py-3 px-8 rounded-2xl font-bold hover:shadow-2xl active:scale-[0.98] transition-all duration-300 inline-block"
            >
              Checkout
            </Link>
          </div>
          <p className="text-center text-gray-500 text-xs">
            By placing this order, you agree to our Terms & Conditions
          </p>
        </div>
      </main>

      {/* Bottom Navigation */}
      <nav className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-2xl py-3">
        <div className="flex justify-center">
          <div className="flex justify-between w-full max-w-md px-6">
            <Link to="/home" className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group">
              <div className="group-hover:scale-110 transition-transform duration-200">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="9" stroke="#9CA3AF" strokeWidth="1.5" fill="none" />
                  <path d="M9 17H15" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
                  <path d="M12 9V13" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
                  <path d="M9 13H15" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
                </svg>
              </div>
              <span className="text-xs font-medium mt-1">Home</span>
            </Link>
            
            <Link to="/menu" className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group">
              <div className="group-hover:scale-110 transition-transform duration-200">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="9" stroke="#9CA3AF" strokeWidth="1.5" fill="none" />
                  <path d="M8 12H16" stroke="#9CA3AF" strokeWidth="2" strokeLinecap="round" />
                  <path d="M10 8V12H14V8" stroke="#9CA3AF" strokeWidth="2" strokeLinecap="round" />
                  <path d="M8 16H16" stroke="#9CA3AF" strokeWidth="2" strokeLinecap="round" />
                </svg>
              </div>
              <span className="text-xs font-medium mt-1">Menu</span>
            </Link>
            
            <Link to="/cart" className="flex flex-col items-center text-amber-700 flex-1 group">
              <div className="group-hover:scale-110 transition-transform duration-200 relative">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="9" stroke="#92400E" strokeWidth="1.5" fill="none" />
                  <path d="M8 16H16" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
                  <path d="M10 10V12" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
                  <path d="M14 10V12" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
                  <path d="M7.5 16L8.5 10H15.5L16.5 16H7.5Z" 
                        stroke="#92400E" 
                        strokeWidth="1.5" 
                        fill="none" 
                        strokeLinejoin="round" />
                </svg>
              </div>
              <span className="text-xs font-bold mt-1">Cart</span>
            </Link>
            
            <Link to="/profile" className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group">
              <div className="group-hover:scale-110 transition-transform duration-200">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="9" stroke="#9CA3AF" strokeWidth="1.5" fill="none" />
                  <circle cx="12" cy="9" r="3" stroke="#9CA3AF" strokeWidth="1.5" fill="none" />
                  <path d="M6 20C6 16 9 13 12 13C15 13 18 16 18 20" 
                        stroke="#9CA3AF" 
                        strokeWidth="1.5" 
                        strokeLinecap="round" />
                </svg>
              </div>
              <span className="text-xs font-medium mt-1">Me</span>
            </Link>
          </div>
        </div>
      </nav>
    </div>
  );
};

export default CheckoutPage;
</file>

<file path="src/pages/FlashSalePage.jsx">
// src/pages/FlashSalePage.jsx
import React, { useState } from 'react';
import { useSearchParams, Link } from 'react-router-dom';

const FlashSalePage = ({ openChat }) => {
  const [searchParams] = useSearchParams();
  const [timeLeft, setTimeLeft] = useState({
    hours: 4,
    minutes: 23,
    seconds: 45
  });

  const flashSaleItems = [
    { id: 1, name: 'Caramel Macchiato', originalPrice: 5.99, salePrice: 2.99, stock: 15, sold: 85 },
    { id: 2, name: 'Espresso Double', originalPrice: 4.99, salePrice: 2.49, stock: 8, sold: 92 },
    { id: 3, name: 'Cappuccino Large', originalPrice: 6.49, salePrice: 3.25, stock: 12, sold: 88 },
    { id: 4, name: 'Croissant Combo', originalPrice: 8.99, salePrice: 4.49, stock: 5, sold: 95 },
  ];

  return (
    <div className="min-h-screen bg-gradient-to-b from-red-50 to-white pb-24">
      {/* Header */}
      <header className="px-6 pt-8 pb-4 bg-white sticky top-0 z-10 shadow-sm">
        <div className="flex justify-between items-center mb-4">
          <Link to="/home" className="p-2">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M15 18L9 12L15 6" stroke="#92400E" strokeWidth="2" strokeLinecap="round"/>
            </svg>
          </Link>
          <h1 className="text-xl font-bold text-gray-900">Flash Sale</h1>
          <button onClick={openChat} className="p-2">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="9" stroke="#92400E" strokeWidth="1.5" fill="none"/>
              <path d="M8 10H16M8 14H12M8 18H14" stroke="#92400E" strokeWidth="2" strokeLinecap="round"/>
            </svg>
          </button>
        </div>
        
        {/* Timer */}
        <div className="bg-gradient-to-r from-red-600 to-orange-600 rounded-2xl p-4 text-white text-center mb-6">
          <p className="text-sm mb-2">Sale ends in:</p>
          <div className="flex justify-center gap-3">
            <div className="flex flex-col items-center">
              <div className="bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2">
                <span className="text-2xl font-bold">{timeLeft.hours.toString().padStart(2, '0')}</span>
              </div>
              <span className="text-xs mt-1">Hours</span>
            </div>
            <span className="text-2xl font-bold self-center">:</span>
            <div className="flex flex-col items-center">
              <div className="bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2">
                <span className="text-2xl font-bold">{timeLeft.minutes.toString().padStart(2, '0')}</span>
              </div>
              <span className="text-xs mt-1">Minutes</span>
            </div>
            <span className="text-2xl font-bold self-center">:</span>
            <div className="flex flex-col items-center">
              <div className="bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2">
                <span className="text-2xl font-bold">{timeLeft.seconds.toString().padStart(2, '0')}</span>
              </div>
              <span className="text-xs mt-1">Seconds</span>
            </div>
          </div>
        </div>
      </header>

      {/* Flash Sale Items */}
      <main className="px-6">
        <div className="grid grid-cols-1 gap-4">
          {flashSaleItems.map(item => {
            const percentageSold = Math.round((item.sold / (item.sold + item.stock)) * 100);
            
            return (
              <div key={item.id} className="bg-white rounded-2xl p-4 shadow-lg border border-red-100">
                <div className="flex gap-4">
                  <div className="w-24 h-24 rounded-xl bg-gradient-to-br from-red-100 to-orange-100 flex items-center justify-center flex-shrink-0 relative">
                    <span className="text-4xl">üî•</span>
                    <div className="absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-full">
                      -{Math.round((1 - item.salePrice/item.originalPrice) * 100)}%
                    </div>
                  </div>
                  
                  <div className="flex-1">
                    <div className="flex justify-between items-start">
                      <div>
                        <h3 className="font-bold text-gray-900 text-lg">{item.name}</h3>
                        <div className="flex items-center gap-2 mt-1">
                          <span className="text-xl font-bold text-red-600">${item.salePrice.toFixed(2)}</span>
                          <span className="text-gray-400 line-through text-sm">${item.originalPrice.toFixed(2)}</span>
                        </div>
                      </div>
                    </div>
                    
                    {/* Progress Bar */}
                    <div className="mt-4">
                      <div className="flex justify-between text-xs text-gray-600 mb-1">
                        <span>Sold: {item.sold}</span>
                        <span>Stock: {item.stock} left</span>
                      </div>
                      <div className="w-full bg-gray-200 rounded-full h-2">
                        <div 
                          className="bg-gradient-to-r from-red-500 to-orange-500 h-2 rounded-full" 
                          style={{ width: `${percentageSold}%` }}
                        ></div>
                      </div>
                      <p className="text-xs text-gray-500 mt-1 text-right">
                        {percentageSold}% sold out
                      </p>
                    </div>
                    
                    <button className="w-full mt-4 bg-gradient-to-r from-red-600 to-orange-600 text-white py-3 rounded-xl font-bold hover:opacity-90 active:scale-95 transition-all">
                      Buy Now
                    </button>
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </main>
    </div>
  );
};

export default FlashSalePage;
</file>

<file path="src/pages/HomePage.jsx">
import React, { useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';

// Ikon SVG sesuai dengan style yang sudah ada
const HomeIcon = ({ active = false }) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M9 17H15" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
    <path d="M12 9V13" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
    <path d="M9 13H15" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const CoffeeIcon = ({ active = false }) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M8 12H16" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
    <path d="M10 8V12H14V8" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
    <path d="M8 16H16" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
  </svg>
);

const CartIcon = ({ count = 0, active = false }) => (
  <div className="relative">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
      <path d="M8 16H16" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
      <path d="M10 10V12" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
      <path d="M14 10V12" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
      <path d="M7.5 16L8.5 10H15.5L16.5 16H7.5Z" 
            stroke={active ? "#92400E" : "#9CA3AF"} 
            strokeWidth="1.5" 
            fill="none" 
            strokeLinejoin="round" />
    </svg>
    
    {/* Badge dengan jumlah item */}
    {count > 0 && (
      <div className="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold border-2 border-white shadow-md">
        {count > 9 ? '9+' : count}
      </div>
    )}
  </div>
);

const ProfileIcon = ({ active = false }) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <circle cx="12" cy="9" r="3" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M6 20C6 16 9 13 12 13C15 13 18 16 18 20" 
          stroke={active ? "#92400E" : "#9CA3AF"} 
          strokeWidth="1.5" 
          strokeLinecap="round" />
  </svg>
);


const CartIconHeader = ({ count = 0, active = false }) => (
  <div className="relative">
    <svg width="24" height="24"viewBox="0 0 24 24" fill="none"
      stroke={active ? "#92400E" : "#92400E"} strokeWidth="1.8"strokeLinecap="round" strokeLinejoin="round">
      <path d="M3 4h2l2.4 12.4a2 2 0 0 0 2 1.6h7.2a2 2 0 0 0 2-1.6L21 8H6" />
      <circle cx="9" cy="20" r="1" /> <circle cx="18" cy="20" r="1" /></svg>

    {count > 0 && (
      <div className="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold border-2 border-white">
        {count > 9 ? "9+" : count} </div>)}
  </div>
);

const ProfileIconHeader = ({ active = false }) => (
  <svg width="26" height="26" viewBox="0 0 24 24" fill="none"
    stroke={active ? "#92400E" : "#92400E"} strokeWidth="1.7" strokeLinecap="round"strokeLinejoin="round">
    {/* Head */}
    <circle cx="12" cy="8" r="3.5" />
    {/* Body */}
    <path d="M5 20c0-3.5 3.5-5.5 7-5.5s7 2 7 5.5" />
  </svg>
);


// Search Icon
const SearchIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="9" cy="9" r="7" stroke="#9CA3AF" strokeWidth="1.5" fill="none" />
    <path d="M14 14L17 17" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

// Flash Sale Icon
const FlashSaleIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke="#92400E" strokeWidth="1.5" fill="none" />
    <path d="M13 7L9 13H13L11 17" stroke="#92400E" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
  </svg>
);

// Member Icon
const MemberIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke="#92400E" strokeWidth="1.5" fill="none" />
    <circle cx="12" cy="9" r="2" stroke="#92400E" strokeWidth="1.5" fill="none" />
    <path d="M6 20C6 16 9 13 12 13C15 13 18 16 18 20" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

// Voucher Icon
const VoucherIcon = () => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke="#92400E" strokeWidth="1.5" fill="none" />
    <rect x="8" y="8" width="8" height="8" stroke="#92400E" strokeWidth="1.5" fill="none" />
    <path d="M8 12H16" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
    <path d="M12 8V16" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

// Coffee Category Icon
const CoffeeCategoryIcon = () => (
  <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="18" stroke="#92400E" strokeWidth="2" fill="none" />
    <path d="M12 16H28" stroke="#92400E" strokeWidth="2" strokeLinecap="round" />
    <path d="M14 12V16H26V12" stroke="#92400E" strokeWidth="2" strokeLinecap="round" />
    <path d="M12 24H28" stroke="#92400E" strokeWidth="2" strokeLinecap="round" />
    <ellipse cx="20" cy="20" rx="8" ry="6" stroke="#92400E" strokeWidth="2" fill="none" />
  </svg>
);

// Tea Category Icon
const TeaCategoryIcon = () => (
  <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="18" stroke="#92400E" strokeWidth="2" fill="none" />
    <rect x="14" y="12" width="12" height="16" rx="2" stroke="#92400E" strokeWidth="2" fill="none" />
    <path d="M12 28H28" stroke="#92400E" strokeWidth="2" strokeLinecap="round" />
    <line x1="20" y1="12" x2="20" y2="28" stroke="#92400E" strokeWidth="2" strokeLinecap="round" />
  </svg>
);

// Pastries Category Icon
const PastriesCategoryIcon = () => (
  <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="18" stroke="#92400E" strokeWidth="2" fill="none" />
    <path d="M14 16C14 13.5 16 12 18 12H22C24 12 26 13.5 26 16V24C26 26.5 24 28 22 28H18C16 28 14 26.5 14 24V16Z" 
          stroke="#92400E" strokeWidth="2" fill="none" />
    <path d="M14 20H26" stroke="#92400E" strokeWidth="2" strokeLinecap="round" />
    <circle cx="20" cy="16" r="1" fill="#92400E" />
    <circle cx="20" cy="24" r="1" fill="#92400E" />
  </svg>
);

// Voucher Modal Component - BARU
const VoucherModal = ({ isOpen, onClose }) => {
  const [activeTab, setActiveTab] = useState('available');
  
  const availableVouchers = [
    { id: 1, code: 'CAFFINITY25', discount: '25% OFF', description: 'On all drinks', validUntil: '2024-12-31', minPurchase: 10 },
    { id: 2, code: 'WELCOME10', discount: '10% OFF', description: 'First order only', validUntil: '2024-12-15', minPurchase: 5 },
    { id: 3, code: 'FREESHIP', discount: 'FREE Shipping', description: 'On orders above $15', validUntil: '2024-12-20', minPurchase: 15 },
  ];
  
  const usedVouchers = [
    { id: 4, code: 'SUMMER20', discount: '20% OFF', description: 'Used on 15 Nov 2024', validUntil: '2024-11-30', status: 'used' },
  ];

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50">
      <div 
        className="absolute inset-0 bg-black bg-opacity-50"
        onClick={onClose}
      />
      
      <div className="absolute inset-0 flex flex-col bg-white">
        <div className="flex items-center justify-between p-4 border-b border-gray-200 bg-white">
          <div className="flex items-center gap-3">
            <div className="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
              <span className="text-green-700 font-bold text-xl">üé´</span>
            </div>
            <div>
              <h2 className="font-bold text-gray-900">My Vouchers</h2>
              <p className="text-sm text-gray-600">Available discounts and coupons</p>
            </div>
          </div>
          <button 
            onClick={onClose}
            className="text-gray-500 hover:text-gray-700 p-2"
          >
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="9" stroke="currentColor" strokeWidth="1.5" fill="none"/>
              <line x1="8" y1="8" x2="16" y2="16" stroke="currentColor" strokeWidth="2" strokeLinecap="round"/>
              <line x1="8" y1="16" x2="16" y2="8" stroke="currentColor" strokeWidth="2" strokeLinecap="round"/>
            </svg>
          </button>
        </div>

        <div className="flex border-b border-gray-200">
          <button
            onClick={() => setActiveTab('available')}
            className={`flex-1 py-4 text-center font-medium ${
              activeTab === 'available' 
                ? 'text-green-700 border-b-2 border-green-700' 
                : 'text-gray-500'
            }`}
          >
            Available ({availableVouchers.length})
          </button>
          <button
            onClick={() => setActiveTab('used')}
            className={`flex-1 py-4 text-center font-medium ${
              activeTab === 'used' 
                ? 'text-gray-700 border-b-2 border-gray-700' 
                : 'text-gray-500'
            }`}
          >
            Used ({usedVouchers.length})
          </button>
        </div>

        <div className="flex-1 overflow-y-auto p-4">
          {activeTab === 'available' ? (
            <div className="space-y-4">
              {availableVouchers.map(voucher => (
                <div key={voucher.id} className="bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-4 shadow-sm">
                  <div className="flex justify-between items-start">
                    <div>
                      <div className="flex items-center gap-2 mb-2">
                        <span className="text-2xl font-bold text-green-700">{voucher.discount}</span>
                        <span className="bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded-full">
                          {voucher.code}
                        </span>
                      </div>
                      <p className="text-gray-800 font-medium">{voucher.description}</p>
                      <p className="text-sm text-gray-600 mt-2">
                        Min. purchase: ${voucher.minPurchase}
                      </p>
                      <p className="text-xs text-gray-500 mt-1">
                        Valid until: {voucher.validUntil}
                      </p>
                    </div>
                    <button 
                      onClick={() => {
                        navigator.clipboard.writeText(voucher.code);
                        alert(`Voucher code "${voucher.code}" copied to clipboard!`);
                      }}
                      className="bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 active:scale-95 transition-all"
                    >
                      Copy Code
                    </button>
                  </div>
                </div>
              ))}
              
              <div className="mt-6">
                <h3 className="font-bold text-gray-900 mb-3">Add Voucher Code</h3>
                <div className="flex gap-2">
                  <input
                    type="text"
                    placeholder="Enter voucher code"
                    className="flex-1 px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:border-green-500"
                  />
                  <button className="bg-amber-700 text-white px-6 py-3 rounded-xl font-medium hover:bg-amber-800 transition-colors active:scale-95">
                    Apply
                  </button>
                </div>
              </div>
            </div>
          ) : (
            <div className="space-y-4">
              {usedVouchers.map(voucher => (
                <div key={voucher.id} className="bg-gray-100 border border-gray-300 rounded-2xl p-4">
                  <div className="flex justify-between items-start">
                    <div>
                      <div className="flex items-center gap-2 mb-2">
                        <span className="text-2xl font-bold text-gray-500 line-through">{voucher.discount}</span>
                        <span className="bg-gray-200 text-gray-600 text-xs font-bold px-2 py-1 rounded-full">
                          {voucher.code}
                        </span>
                      </div>
                      <p className="text-gray-600">{voucher.description}</p>
                      <p className="text-sm text-gray-500 mt-2">
                        {voucher.validUntil}
                      </p>
                    </div>
                    <span className="bg-gray-300 text-gray-700 px-3 py-1 rounded-full text-sm font-medium">
                      Used
                    </span>
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>

        <div className="border-t border-gray-200 p-4 bg-white">
          <p className="text-xs text-gray-500 text-center">
            Vouchers are automatically applied at checkout
          </p>
        </div>
      </div>
    </div>
  );
};

const HomePage = () => {
  const [showChat, setShowChat] = useState(false);
  const [showVoucher, setShowVoucher] = useState(false);
  const [cartItems] = useState([]);
  const navigate = useNavigate();

  const totalCartItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);

  const categories = [
    { id: 'coffee', name: 'Coffee', icon: <CoffeeCategoryIcon /> },
    { id: 'tea', name: 'Tea', icon: <TeaCategoryIcon /> },
    { id: 'pastries', name: 'Pastries', icon: <PastriesCategoryIcon /> },
    { id: 'special', name: 'Special', icon: <CoffeeCategoryIcon /> }
  ];

  // QUICK ACTIONS - Hanya 2 item tersisa
  const quickActions = [
    { 
      id: 'member', 
      name: 'Member', 
      icon: <MemberIcon />,
      onClick: () => navigate('/profile?section=membership'),
      description: 'Exclusive benefits',
      hasNotification: false
    },
    { 
      id: 'voucher', 
      name: 'Voucher', 
      icon: <VoucherIcon />,
      onClick: () => setShowVoucher(true),
      description: 'Discount coupons',
      hasNotification: true,
      badge: '3'
    }
  ];

  return (
    <div className="min-h-screen bg-gradient-to-b from-amber-50 to-white pb-24">
      
      
      {/* Voucher Modal */}
      <VoucherModal isOpen={showVoucher} onClose={() => setShowVoucher(false)} />

      {/* Header */}
      <header className="px-6 pt-10 pb-6">
        <div className="flex justify-between items-center mb-8">
          <div>
            <h1 className="text-2xl md:text-3xl font-bold text-amber-900">Hello</h1>
            <p className="text-gray-600 mt-2">What would you like to order today?</p>
          </div>
          
          <div className="flex items-center gap-3">
            
            <button 
              onClick={() => navigate('/cart')}
              className="p-2 hover:bg-amber-50 rounded-full transition-colors relative active:scale-95"
              title="View Cart"
            >
              <CartIconHeader count={totalCartItems} />
            </button>
            
            <button 
              onClick={() => navigate('/profile')}
              className="p-2 hover:bg-amber-50 rounded-full transition-colors active:scale-95"
              title="My Profile"
            >
              <ProfileIconHeader />
            </button>
          </div>
        </div>
      </header>

      <main className="px-6">
        {/* Promo Banner */}
        <section className="mt-6">
          <div className="bg-gradient-to-r from-amber-700 to-amber-900 rounded-3xl p-6 text-white shadow-lg">
            <div className="flex justify-between items-start mb-4">
              <div>
                <h2 className="text-2xl font-bold mb-2">Buy 1 Get 1 Free!</h2>
                <p className="text-amber-100">All caramel drinks ‚Ä¢ Valid until 11:59 PM</p>
              </div>
              <div className="bg-white/20 px-3 py-1 rounded-full">
                <span className="text-sm font-bold">HOT</span>
              </div>
            </div>
            <button 
              className="w-full bg-white text-amber-800 py-3.5 rounded-xl font-bold text-lg hover:bg-amber-50 active:scale-[0.98] transition-all duration-300"
              onClick={() => navigate('/menu?category=special')}
            >
              CLAIM NOW
            </button>
          </div>
        </section>

        {/* Quick Actions - 2 items saja */}
        <section className="mt-8">
          <h2 className="text-xl font-bold text-gray-900 mb-4">Quick Actions</h2>
          <div className="grid grid-cols-2 gap-3 sm:gap-4">
            {quickActions.map(action => (
              <button
                key={action.id}
                onClick={action.onClick}
                className="relative group bg-white rounded-2xl p-4 sm:p-5 flex flex-col items-center justify-center shadow-sm hover:shadow-md transition-all duration-300 border border-amber-100 hover:border-amber-300 active:scale-95"
              >
                {action.hasNotification && action.badge && (
                  <div className={`absolute -top-2 -right-2 ${
                    action.badge === 'HOT' 
                      ? 'bg-red-500 animate-pulse' 
                      : 'bg-green-500'
                  } text-white text-xs font-bold px-2 py-1 rounded-full z-10`}>
                    {action.badge}
                  </div>
                )}
                
                <div className="mb-3 transform group-hover:scale-110 transition-transform duration-300">
                  {action.icon}
                </div>
                
                <span className="text-sm sm:text-base font-bold text-gray-900 group-hover:text-amber-700 transition-colors">
                  {action.name}
                </span>
                
                <span className="text-xs text-gray-500 mt-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-center px-1">
                  {action.description}
                </span>
              </button>
            ))}
          </div>
        </section>

        {/* Categories */}
        <section className="mt-8">
          <div className="flex justify-between items-center mb-4">
            <h2 className="text-xl font-bold text-gray-900">Categories</h2>
            <button 
              onClick={() => navigate('/menu')}
              className="text-amber-700 font-medium hover:text-amber-800 text-sm active:scale-95"
            >
              View All
            </button>
          </div>
          <div className="grid grid-cols-2 gap-4">
            {categories.map(category => (
              <button
                key={category.id}
                onClick={() => navigate(`/menu?category=${category.id}`)}
                className="bg-white rounded-2xl p-6 flex flex-col items-center justify-center shadow-sm hover:shadow-md transition-all duration-300 border border-amber-100 hover:border-amber-300 active:scale-95"
              >
                <div className="mb-4">
                  {category.icon}
                </div>
                <span className="text-lg font-bold text-gray-900">{category.name}</span>
                <span className="text-sm text-gray-500 mt-1">Explore menu</span>
              </button>
            ))}
          </div>
        </section>

        {/* Featured Items Section DIHAPUS dari sini */}
        
      </main>

      {/* Bottom Navigation */}
      {!showChat && (
        <nav className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-2xl py-3 z-30">
          <div className="flex justify-center">
            <div className="flex justify-between w-full max-w-md px-6">
              <Link 
                to="/home" 
                className="flex flex-col items-center text-amber-700 flex-1 group active:scale-95"
              >
                <div className="group-hover:scale-110 transition-transform duration-200">
                  <HomeIcon active={true} />
                </div>
                <span className="text-xs font-bold mt-1">Home</span>
              </Link>
              
              <Link 
                to="/menu" 
                className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group active:scale-95"
              >
                <div className="group-hover:scale-110 transition-transform duration-200">
                  <CoffeeIcon />
                </div>
                <span className="text-xs font-medium mt-1">Menu</span>
              </Link>
              
              <Link 
                to="/cart" 
                className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group relative active:scale-95"
              >
                <div className="group-hover:scale-110 transition-transform duration-200">
                  <CartIcon active={false} count={totalCartItems} />
                </div>
                <span className="text-xs font-medium mt-1">Cart</span>
              </Link>
              
              <Link 
                to="/profile" 
                className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group active:scale-95"
              >
                <div className="group-hover:scale-110 transition-transform duration-200">
                  <ProfileIcon />
                </div>
                <span className="text-xs font-medium mt-1">Me</span>
              </Link>
            </div>
          </div>
        </nav>
      )}
    </div>
  );
};

export default HomePage;
</file>

<file path="src/pages/index.js">
export { default as HomePage } from './HomePage';
export { default as MenuPage } from './MenuPage';
export { default as CartPage } from './CartPage';
export { default as ProfilePage } from './ProfilePage';
</file>

<file path="src/pages/Login.jsx">
// src/pages/Login.jsx
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';

const Login = () => {
  const navigate = useNavigate();
  
  const [isLoginMode, setIsLoginMode] = useState(true);
  const [formData, setFormData] = useState({
    email: '',
    password: '',
    confirmPassword: '',
    name: '',
    rememberMe: false
  });
  const [showPassword, setShowPassword] = useState(false);
  const [errors, setErrors] = useState({});
  const [isLoading, setIsLoading] = useState(false);

  const validateForm = () => {
    const newErrors = {};
    
    // Email validation
    if (!formData.email) {
      newErrors.email = 'Email is required';
    } else if (!/\S+@\S+\.\S+/.test(formData.email)) {
      newErrors.email = 'Email is invalid';
    }
    
    // Password validation
    if (!formData.password) {
      newErrors.password = 'Password is required';
    } else if (formData.password.length < 6) {
      newErrors.password = 'Password must be at least 6 characters';
    }
    
    // For register mode
    if (!isLoginMode) {
      if (!formData.name) {
        newErrors.name = 'Name is required';
      }
      
      if (!formData.confirmPassword) {
        newErrors.confirmPassword = 'Please confirm your password';
      } else if (formData.password !== formData.confirmPassword) {
        newErrors.confirmPassword = 'Passwords do not match';
      }
    }
    
    return newErrors;
  };

  const handleInputChange = (e) => {
    const { name, value, type, checked } = e.target;
    setFormData(prev => ({
      ...prev,
      [name]: type === 'checkbox' ? checked : value
    }));
    
    if (errors[name]) {
      setErrors(prev => ({ ...prev, [name]: '' }));
    }
  };

  const handleSubmit = async (e) => {
    e.preventDefault();

    const validationErrors = validateForm();
    if (Object.keys(validationErrors).length > 0) {
      setErrors(validationErrors);
      return;
    }

    setIsLoading(true);
    setErrors({});

    if (!isLoginMode) {
      // Register mode: call backend
      try {
        const res = await fetch('/api/auth/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            username: formData.name,
            email: formData.email,
            password: formData.password
          })
        });
        const data = await res.json();
        if (data.success) {
          setErrors({ submit: 'Registration successful! Please login.' });
          setIsLoginMode(true);
          setFormData({
            email: formData.email,
            password: '',
            confirmPassword: '',
            name: '',
            rememberMe: false
          });
        } else {
          setErrors({ submit: data.error || 'Registration failed' });
        }
      } catch (error) {
        setErrors({ submit: 'Network error. Please try again.' });
      } finally {
        setIsLoading(false);
      }
      return;
    }

    // Login mode: call backend
    try {
      const res = await fetch('/api/auth/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          email: formData.email,
          password: formData.password
        })
      });
      const data = await res.json();
      if (data.success && data.token && data.user) {
        // Save to localStorage
        localStorage.setItem('isAuthenticated', 'true');
        localStorage.setItem('user', JSON.stringify(data.user));
        localStorage.setItem('token', data.token);

        if (formData.rememberMe) {
          localStorage.setItem('rememberedEmail', formData.email);
        } else {
          localStorage.removeItem('rememberedEmail');
        }

        // Dispatch events for App.jsx to update state
        window.dispatchEvent(new Event('storage'));
        window.dispatchEvent(new CustomEvent('auth-change'));

        // Navigate to home
        setTimeout(() => {
          navigate('/home');
        }, 100);
      } else {
        setErrors({ submit: data.error || 'Invalid email or password' });
      }
    } catch (error) {
      setErrors({ submit: 'Network error. Please try again.' });
    } finally {
      setIsLoading(false);
    }
  };

  const handleForgotPassword = () => {
    alert('Password reset feature coming soon!');
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-amber-900 via-amber-800 to-amber-700 flex items-center justify-center p-4">
      <div className="w-full max-w-md">
        
        {/* Logo & Title */}
        <div className="text-center mb-8">
          <h2 className="text-2xl font-semibold text-amber-100 mb-2">
            {isLoginMode ? 'Sign in to Caffinity' : 'Create New Account'}
          </h2>
          <p className="text-amber-200 text-lg">
            {isLoginMode ? 'Or create a new account' : 'Join our coffee community'}
          </p>
        </div>

        {/* Form Container */}
        <div className="bg-white rounded-3xl shadow-2xl p-8">
          
          {/* Toggle Login/Register */}
          <div className="flex mb-8 border-b border-gray-200">
            <button
              onClick={() => setIsLoginMode(true)}
              disabled={isLoading}
              className={`flex-1 py-3 font-bold text-lg transition-colors ${
                isLoginMode 
                  ? 'text-amber-700 border-b-2 border-amber-700' 
                  : 'text-gray-500 hover:text-gray-700'
              }`}
            >
              Sign In
            </button>
            <button
              onClick={() => setIsLoginMode(false)}
              disabled={isLoading}
              className={`flex-1 py-3 font-bold text-lg transition-colors ${
                !isLoginMode 
                  ? 'text-amber-700 border-b-2 border-amber-700' 
                  : 'text-gray-500 hover:text-gray-700'
              }`}
            >
              Sign Up
            </button>
          </div>

          {/* Error Message */}
          {errors.submit && (
            <div className="mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
              <div className="flex">
                <svg className="h-5 w-5 text-red-500 mr-3" fill="currentColor" viewBox="0 0 20 20">
                  <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clipRule="evenodd" />
                </svg>
                <p className="text-sm text-red-700">{errors.submit}</p>
              </div>
            </div>
          )}

          <form onSubmit={handleSubmit} className="space-y-6">
            
            {/* Name Field (Register only) */}
            {!isLoginMode && (
              <div>
                <label className="block text-gray-700 mb-2 font-medium">
                  Full Name
                </label>
                <input
                  type="text"
                  name="name"
                  value={formData.name}
                  onChange={handleInputChange}
                  placeholder="Enter your full name"
                  className={`w-full px-4 py-3.5 bg-gray-50 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all ${
                    errors.name 
                      ? 'border-red-300 focus:border-red-500 focus:ring-red-100' 
                      : 'border-amber-200 focus:border-amber-500 focus:ring-amber-100'
                  }`}
                  disabled={isLoading}
                />
                {errors.name && (
                  <p className="mt-2 text-sm text-red-600">{errors.name}</p>
                )}
              </div>
            )}

            {/* Email Field */}
            <div>
              <label className="block text-gray-700 mb-2 font-medium">
                Email Address
              </label>
              <div className="relative">
                <input
                  type="email"
                  name="email"
                  value={formData.email}
                  onChange={handleInputChange}
                  placeholder="your@email.com"
                  className={`w-full px-4 py-3.5 bg-gray-50 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all pr-10 ${
                    errors.email 
                      ? 'border-red-300 focus:border-red-500 focus:ring-red-100' 
                      : 'border-amber-200 focus:border-amber-500 focus:ring-amber-100'
                  }`}
                  disabled={isLoading}
                />
                <div className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                  <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                  </svg>
                </div>
              </div>
              {errors.email && (
                <p className="mt-2 text-sm text-red-600">{errors.email}</p>
              )}
            </div>

            {/* Password Field */}
            <div>
              <label className="block text-gray-700 mb-2 font-medium">
                Password
              </label>
              <div className="relative">
                <input
                  type={showPassword ? "text" : "password"}
                  name="password"
                  value={formData.password}
                  onChange={handleInputChange}
                  placeholder="Enter your password"
                  className={`w-full px-4 py-3.5 bg-gray-50 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all pr-12 ${
                    errors.password 
                      ? 'border-red-300 focus:border-red-500 focus:ring-red-100' 
                      : 'border-amber-200 focus:border-amber-500 focus:ring-amber-100'
                  }`}
                  disabled={isLoading}
                />
                <button
                  type="button"
                  onClick={() => setShowPassword(!showPassword)}
                  className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-amber-700 transition-colors"
                  disabled={isLoading}
                >
                  {showPassword ? (
                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L6.59 6.59m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
                    </svg>
                  ) : (
                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                    </svg>
                  )}
                </button>
              </div>
              {errors.password && (
                <p className="mt-2 text-sm text-red-600">{errors.password}</p>
              )}
            </div>

            {/* Confirm Password Field (Register only) */}
            {!isLoginMode && (
              <div>
                <label className="block text-gray-700 mb-2 font-medium">
                  Confirm Password
                </label>
                <input
                  type={showPassword ? "text" : "password"}
                  name="confirmPassword"
                  value={formData.confirmPassword}
                  onChange={handleInputChange}
                  placeholder="Confirm your password"
                  className={`w-full px-4 py-3.5 bg-gray-50 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all ${
                    errors.confirmPassword 
                      ? 'border-red-300 focus:border-red-500 focus:ring-red-100' 
                      : 'border-amber-200 focus:border-amber-500 focus:ring-amber-100'
                  }`}
                  disabled={isLoading}
                />
                {errors.confirmPassword && (
                  <p className="mt-2 text-sm text-red-600">{errors.confirmPassword}</p>
                )}
              </div>
            )}

            {/* Remember Me & Forgot Password (Login only) */}
            {isLoginMode && (
              <div className="flex justify-between items-center">
                <label className="flex items-center cursor-pointer">
                  <div className="relative">
                    <input
                      type="checkbox"
                      name="rememberMe"
                      checked={formData.rememberMe}
                      onChange={handleInputChange}
                      className="sr-only"
                      disabled={isLoading}
                    />
                    <div className={`w-5 h-5 border-2 rounded flex items-center justify-center transition-all ${
                      formData.rememberMe 
                        ? 'bg-amber-600 border-amber-600' 
                        : 'border-gray-300'
                    }`}>
                      {formData.rememberMe && (
                        <svg className="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="3" d="M5 13l4 4L19 7" />
                        </svg>
                      )}
                    </div>
                  </div>
                  <span className="ml-2 text-gray-600 text-sm">Remember me</span>
                </label>
                
                <button 
                  type="button" 
                  onClick={handleForgotPassword}
                  className="text-amber-700 font-medium text-sm hover:text-amber-800 transition-colors"
                  disabled={isLoading}
                >
                  Forgot Password?
                </button>
              </div>
            )}

            {/* Submit Button */}
            <button
              type="submit"
              disabled={isLoading}
              className="w-full bg-gradient-to-r from-amber-600 to-amber-800 text-white py-4 rounded-2xl font-bold text-lg hover:shadow-xl active:scale-[0.98] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
            >
              {isLoading ? (
                <>
                  <svg className="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  {isLoginMode ? 'Signing in...' : 'Creating account...'}
                </>
              ) : (
                <>
                  {isLoginMode ? 'Sign In' : 'Create Account'}
                  <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                  </svg>
                </>
              )}
            </button>

            {/* Switch between Login/Register */}
            <div className="text-center pt-4">
              <p className="text-gray-600">
                {isLoginMode ? "Don't have an account? " : "Already have an account? "}
                <button
                  type="button"
                  onClick={() => setIsLoginMode(!isLoginMode)}
                  className="text-amber-700 font-bold hover:text-amber-800 transition-colors ml-1"
                  disabled={isLoading}
                >
                  {isLoginMode ? 'Sign Up' : 'Sign In'}
                </button>
              </p>
            </div>
          </form>
        </div>

        {/* Terms & Privacy */}
        <div className="mt-6 text-center">
          <p className="text-amber-200 text-xs">
            By continuing, you agree to our{' '}
            <button className="font-bold hover:text-white transition-colors">Terms of Service</button>
            {' '}and{' '}
            <button className="font-bold hover:text-white transition-colors">Privacy Policy</button>
          </p>
        </div>
      </div>
    </div>
  );
};

export default Login;
</file>

<file path="src/pages/MenuPage.jsx">
import React, { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';

// Fungsi format Rupiah
const formatRupiah = (amount) => {
  return new Intl.NumberFormat('id-ID', {
    style: 'currency',
    currency: 'IDR',
    minimumFractionDigits: 0,
    maximumFractionDigits: 0
  }).format(amount);
};

// Ikon SVG
const HomeIcon = ({ active = false }) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M9 17H15" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
    <path d="M12 9V13" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
    <path d="M9 13H15" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const CoffeeIcon = ({ active = false }) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M8 12H16" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
    <path d="M10 8V12H14V8" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
    <path d="M8 16H16" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
  </svg>
);

const CartIcon = ({ count = 0, active = false }) => (
  <div className="relative">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
      <path d="M8 16H16" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
      <path d="M10 10V12" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
      <path d="M14 10V12" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
      <path d="M7.5 16L8.5 10H15.5L16.5 16H7.5Z" 
            stroke={active ? "#92400E" : "#9CA3AF"} 
            strokeWidth="1.5" 
            fill="none" 
            strokeLinejoin="round" />
    </svg>
    
    {count > 0 && (
      <div className="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold border-2 border-white shadow-md">
        {count > 9 ? '9+' : count}
      </div>
    )}
  </div>
);

const ProfileIcon = ({ active = false }) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <circle cx="12" cy="9" r="3" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M6 20C6 16 9 13 12 13C15 13 18 16 18 20" 
          stroke={active ? "#92400E" : "#9CA3AF"} 
          strokeWidth="1.5" 
          strokeLinecap="round" />
  </svg>
);

const SearchIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="9" cy="9" r="7" stroke="#9CA3AF" strokeWidth="1.5" fill="none" />
    <path d="M14 14L17 17" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const CloseIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="10" cy="10" r="9" stroke="#9CA3AF" strokeWidth="2" fill="none" />
    <line x1="6" y1="6" x2="14" y2="14" stroke="#9CA3AF" strokeWidth="2" strokeLinecap="round" />
    <line x1="6" y1="14" x2="14" y2="6" stroke="#9CA3AF" strokeWidth="2" strokeLinecap="round" />
  </svg>
);

const StarIcon = ({ filled = true }) => (
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="8" cy="8" r="7" stroke={filled ? "#F59E0B" : "#E5E7EB"} strokeWidth="1" fill="none" />
    <path d="M8 3L9.5 6L13 6.5L10.5 9L11 13L8 11L5 13L5.5 9L3 6.5L6.5 6L8 3Z" 
          fill={filled ? "#F59E0B" : "none"} 
          stroke={filled ? "#F59E0B" : "#E5E7EB"} 
          strokeWidth="0.5" />
  </svg>
);

const ChevronIcon = () => (
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="8" cy="8" r="7" stroke="#92400E" strokeWidth="1" fill="none" />
    <path d="M6 6L8 8L10 10" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
    <path d="M6 10L8 8L10 6" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const MenuPage = ({ openChat, cartItems = [], setCartItems }) => {
  const [activeCategory, setActiveCategory] = useState('all');
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedProduct, setSelectedProduct] = useState(null);
  const [quantity, setQuantity] = useState(1);
  const [showSuccessToast, setShowSuccessToast] = useState(false);
  const [successMessage, setSuccessMessage] = useState('');
  const [isModalOpen, setIsModalOpen] = useState(false);
  
  const categories = [
    { id: 'all', name: 'All' },
    { id: 'coffee', name: 'Coffee' },
    { id: 'tea', name: 'Tea' },
    { id: 'pastries', name: 'Pastries' },
    { id: 'special', name: 'Special' }
  ];
  
  const menuItems = [
    { 
      id: 1, 
      name: "Caramel Macchiato", 
      category: "coffee", 
      price: 35000, 
      rating: 4.8, 
      description: "Rich espresso with vanilla syrup and caramel drizzle", 
      detailedDescription: "Our signature drink made with double shot of espresso, vanilla-flavored syrup, milk and caramel drizzle. Perfect balance of sweetness and coffee flavor.",
      image: "https://dinnerthendessert.com/wp-content/uploads/2023/10/Caramel-Macchiato-7-500x500.jpg",
      ingredients: ["Espresso", "Vanilla Syrup", "Steamed Milk", "Caramel Drizzle", "Ice"],
      calories: 250,
      size: "Medium (16oz)"
    },
    { 
      id: 2, 
      name: "Matcha Latte", 
      category: "tea", 
      price: 32000, 
      rating: 4.9, 
      description: "Premium matcha with steamed milk", 
      detailedDescription: "Made with ceremonial grade matcha powder, steamed milk, and a touch of honey. Rich in antioxidants and packed with flavor.",
      image: "https://mocktail.net/wp-content/uploads/2021/05/Iced-Matcha-Latte_1.jpg",
      ingredients: ["Ceremonial Matcha", "Steamed Milk", "Honey", "Vanilla"],
      calories: 180,
      size: "Medium (16oz)"
    },
    { 
      id: 3, 
      name: "Butter Croissant", 
      category: "pastries", 
      price: 22000, 
      rating: 4.7, 
      description: "Flaky, buttery French croissant", 
      detailedDescription: "Authentic French croissant made with pure butter, layered to perfection. Baked fresh daily.",
      image: "https://www.lalevain.com/wp-content/uploads/2021/11/Xsant.jpg",
      ingredients: ["Flour", "Butter", "Yeast", "Sugar", "Salt"],
      calories: 310,
      size: "Regular"
    },
    { 
      id: 4, 
      name: "Iced Americano", 
      category: "coffee", 
      price: 28000, 
      rating: 4.5, 
      description: "Chilled espresso with water", 
      detailedDescription: "Strong and refreshing espresso shots topped with cold water and ice. Perfect for hot days.",
      image: "https://diethood.com/wp-content/uploads/2023/08/iced-americano-3.jpg",
      ingredients: ["Espresso", "Water", "Ice"],
      calories: 15,
      size: "Large (20oz)"
    },
    { 
      id: 5, 
      name: "Cheesecake", 
      category: "pastries", 
      price: 35000, 
      rating: 4.8, 
      description: "A light, crisp pastry filled with smooth, creamy cheesecake.", 
      detailedDescription: "New York style cheesecake with graham cracker crust, topped with strawberry compote.",
      image: "https://natashaskitchen.com/wp-content/uploads/2025/09/Pumpkin-Cheesecake-11.jpg",
      ingredients: ["Cream Cheese", "Graham Cracker", "Sugar", "Eggs", "Strawberry"],
      calories: 420,
      size: "1 Slice"
    },
    { 
      id: 6, 
      name: "Cappuccino", 
      category: "coffee", 
      price: 30000, 
      rating: 4.7,  
      description: "Classic Italian coffee with steamed milk and rich foam", 
      detailedDescription: "Equal parts espresso, steamed milk, and milk foam. A classic favorite.",
      image: "https://img.freepik.com/free-photo/high-view-glass-cappucino-with-coffee-beans_23-2148251687.jpg?semt=ais_hybrid&w=500&h=500&fit=crop",
      ingredients: ["Espresso", "Steamed Milk", "Milk Foam"],
      calories: 120,
      size: "Medium (12oz)"
    },
    { 
      id: 7, 
      name: "Thai Tea", 
      category: "tea", 
      price: 29000, 
      rating: 4.8,  
      description: "Sweet and creamy Thai tea with condensed milk",  
      detailedDescription: "Authentic Thai tea blend with condensed milk and evaporated milk. Sweet and aromatic.",
      image: "https://japo.co.id/wp-content/uploads/2022/10/thai-teaa.jpg",
      ingredients: ["Thai Tea Leaves", "Condensed Milk", "Evaporated Milk", "Sugar"],
      calories: 280,
      size: "Medium (16oz)"
    },
    { 
      id: 8, 
      name: "Blueberry Muffins", 
      category: "pastries", 
      price: 25000,  
      rating: 4.6,  
      description: "Moist muffins bursting with fresh blueberries", 
      detailedDescription: "Freshly baked muffins loaded with juicy blueberries and topped with crunchy sugar.",
      image: "https://www.sprinklesomesugar.com/wp-content/uploads/2016/07/IMG_8404-2.jpg",
      ingredients: ["Flour", "Blueberries", "Butter", "Sugar", "Eggs"],
      calories: 320,
      size: "Regular"
    },
    { 
      id: 9, 
      name: "Gingerbread House", 
      category: "special",  
      price: 65000, 
      rating: 4.9,  
      description: "Festive gingerbread house decorated with icing and candy",  
      detailedDescription: "Hand-decorated gingerbread house perfect for the holiday season. Includes various candies and icing.",
      image: "https://partypinching.com/wp-content/uploads/2018/12/s8.jpg",
      ingredients: ["Gingerbread", "Royal Icing", "Assorted Candies", "Sugar"],
      calories: 850,
      size: "Small House"
    },
    { 
      id: 10, 
      name: "Iced Pumpkin Latte", 
      category: "special", 
      price: 38000,  
      rating: 4.7, 
      description: "Refreshing pumpkin spice latte served over ice",  
      detailedDescription: "Seasonal favorite with pumpkin spice syrup, espresso, milk, and whipped cream.",
      image: "https://coffeecopycat.com/wp-content/uploads/2023/10/IcedPumpkinSpiceLatte-1200-x-1200.jpg",
      ingredients: ["Espresso", "Pumpkin Spice Syrup", "Milk", "Whipped Cream", "Ice"],
      calories: 290,
      size: "Medium (16oz)"
    }
  ];

  // Hitung total item di cart
  const totalCartItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);

  // Fungsi pencarian
  const searchItems = (query) => {
    const lowerQuery = query.toLowerCase().trim();
    if (!lowerQuery) return menuItems;
    
    return menuItems.filter(item => 
      item.name.toLowerCase().includes(lowerQuery) ||
      item.description.toLowerCase().includes(lowerQuery) ||
      item.category.toLowerCase().includes(lowerQuery) ||
      item.detailedDescription.toLowerCase().includes(lowerQuery) ||
      item.ingredients.some(ingredient => 
        ingredient.toLowerCase().includes(lowerQuery)
      )
    );
  };

  // Filter berdasarkan kategori DAN pencarian
  const getFilteredItems = () => {
    let items = searchQuery ? searchItems(searchQuery) : menuItems;
    
    if (activeCategory !== 'all') {
      items = items.filter(item => item.category === activeCategory);
    }
    
    return items;
  };

  const filteredItems = getFilteredItems();

  const openProductDetail = (product) => {
    setSelectedProduct(product);
    setQuantity(1);
    setIsModalOpen(true);
    document.body.style.overflow = 'hidden';
  };

  const closeProductDetail = () => {
    setSelectedProduct(null);
    setIsModalOpen(false);
    document.body.style.overflow = 'auto';
  };

  useEffect(() => {
    return () => {
      document.body.style.overflow = 'auto';
    };
  }, []);

  const increaseQuantity = () => {
    setQuantity(prev => prev + 1);
  };

  const decreaseQuantity = () => {
    if (quantity > 1) {
      setQuantity(prev => prev - 1);
    }
  };

  // FUNGSI UNTUK MENAMBAH KE CART - MENGIRIM KE PARENT
  const addToCartFromDetail = () => {
    if (!selectedProduct) return;

    const newItem = {
      id: selectedProduct.id,
      name: selectedProduct.name,
      description: selectedProduct.description,
      price: selectedProduct.price,
      quantity: quantity,
      image: selectedProduct.image,
      category: selectedProduct.category
    };

    // Jika ada setCartItems dari props, gunakan itu
    if (setCartItems) {
      const existingItemIndex = cartItems.findIndex(item => item.id === selectedProduct.id);
      
      if (existingItemIndex >= 0) {
        const updatedCartItems = [...cartItems];
        updatedCartItems[existingItemIndex].quantity += quantity;
        setCartItems(updatedCartItems);
      } else {
        setCartItems([...cartItems, newItem]);
      }
    } else {
      // Fallback untuk standalone (jika tidak ada props)
      console.log("Item added locally:", newItem);
    }

    // Tampilkan toast sukses dengan format Rupiah
    setSuccessMessage(`${quantity} ${selectedProduct.name} ditambahkan ke keranjang! - ${formatRupiah(selectedProduct.price * quantity)}`);
    setShowSuccessToast(true);

    setTimeout(() => {
      setShowSuccessToast(false);
    }, 3000);

    closeProductDetail();
  };

  // FUNGSI QUICK ADD - JUGA MENGIRIM KE PARENT
  const quickAddToCart = (product) => {
    const newItem = {
      id: product.id,
      name: product.name,
      description: product.description,
      price: product.price,
      quantity: 1,
      image: product.image,
      category: product.category
    };

    if (setCartItems) {
      const existingItemIndex = cartItems.findIndex(item => item.id === product.id);
      
      if (existingItemIndex >= 0) {
        const updatedCartItems = [...cartItems];
        updatedCartItems[existingItemIndex].quantity += 1;
        setCartItems(updatedCartItems);
      } else {
        setCartItems([...cartItems, newItem]);
      }
    } else {
      console.log("Item added locally:", newItem);
    }

    // Tampilkan toast sukses dengan format Rupiah
    setSuccessMessage(`${product.name} ditambahkan ke keranjang! - ${formatRupiah(product.price)}`);
    setShowSuccessToast(true);

    setTimeout(() => {
      setShowSuccessToast(false);
    }, 3000);
  };

  const ProductDetailModal = () => {
    if (!selectedProduct || !isModalOpen) return null;

    return (
      <div className="fixed inset-0 z-50">
        <div 
          className="absolute inset-0 bg-black bg-opacity-50"
          onClick={closeProductDetail}
        />
        
        <div className="absolute inset-0 flex items-center justify-center p-4 pointer-events-none">
          <div 
            className="bg-white rounded-3xl w-full max-w-lg max-h-[85vh] overflow-hidden flex flex-col shadow-2xl pointer-events-auto relative z-10"
            onClick={(e) => e.stopPropagation()}
          >
            <div className="relative h-64 overflow-hidden">
              <img 
                src={selectedProduct.image} 
                alt={selectedProduct.name}
                className="w-full h-full object-cover"
              />
              <button 
                onClick={closeProductDetail}
                className="absolute top-4 right-4 bg-white/90 backdrop-blur-sm rounded-full p-3 hover:bg-white transition-colors shadow-lg"
              >
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="10" cy="10" r="9" stroke="#9CA3AF" strokeWidth="2" fill="none"/>
                  <line x1="6" y1="6" x2="14" y2="14" stroke="#9CA3AF" strokeWidth="2" strokeLinecap="round"/>
                  <line x1="6" y1="14" x2="14" y2="6" stroke="#9CA3AF" strokeWidth="2" strokeLinecap="round"/>
                </svg>
              </button>
              <div className="absolute bottom-4 left-4 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full flex items-center gap-2 shadow-lg">
                <StarIcon filled={true} />
                <span className="font-bold text-base">{selectedProduct.rating}</span>
              </div>
            </div>

            <div className="flex-1 overflow-y-auto p-6">
              <div className="mb-6">
                <div className="flex justify-between items-start mb-4">
                  <div>
                    <h2 className="text-2xl font-bold text-gray-900 mb-2">{selectedProduct.name}</h2>
                    <div className="flex items-center gap-2 mb-4">
                      <span className="px-4 py-2 bg-amber-100 text-amber-800 font-medium rounded-full text-sm">
                        {selectedProduct.category.charAt(0).toUpperCase() + selectedProduct.category.slice(1)}
                      </span>
                    </div>
                  </div>
                  <span className="text-3xl font-bold text-amber-800">
                    {formatRupiah(selectedProduct.price)}
                  </span>
                </div>
                
                <p className="text-gray-700 text-base leading-relaxed mb-6">
                  {selectedProduct.detailedDescription}
                </p>
              </div>

              <div className="mb-8">
                <h3 className="text-lg font-bold text-gray-900 mb-4 pb-2 border-b border-gray-200">Nutrition Information</h3>
                <div className="grid grid-cols-2 gap-4">
                  <div className="bg-gray-50 rounded-xl p-4">
                    <p className="text-sm text-gray-600 mb-1">Calories</p>
                    <p className="text-xl font-bold text-gray-900">{selectedProduct.calories} kcal</p>
                  </div>
                  <div className="bg-gray-50 rounded-xl p-4">
                    <p className="text-sm text-gray-600 mb-1">Size</p>
                    <p className="text-xl font-bold text-gray-900">{selectedProduct.size}</p>
                  </div>
                </div>
              </div>

              <div className="mb-8">
                <h3 className="text-lg font-bold text-gray-900 mb-4 pb-2 border-b border-gray-200">Ingredients</h3>
                <div className="grid grid-cols-3 gap-3">
                  {selectedProduct.ingredients.map((ingredient, index) => (
                    <div 
                      key={index} 
                      className="bg-amber-50 rounded-xl p-3 text-center border border-amber-100"
                    >
                      <span className="text-sm font-medium text-amber-800">{ingredient}</span>
                    </div>
                  ))}
                </div>
              </div>

              <div className="mb-6">
                <h3 className="text-lg font-bold text-gray-900 mb-4 text-center">Quantity</h3>
                <div className="flex justify-between items-center">
                  <div className="flex items-center gap-4">
                    <button 
                      onClick={decreaseQuantity}
                      className={`w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 ${
                        quantity <= 1 
                          ? 'bg-gray-100 text-gray-400 cursor-not-allowed' 
                          : 'bg-amber-100 text-amber-700 hover:bg-amber-200 active:scale-95'
                      }`}
                      disabled={quantity <= 1}
                    >
                      <span className="text-2xl font-bold">-</span>
                    </button>
                    
                    <div className="text-center">
                      <span className="text-4xl font-bold text-gray-900 min-w-[50px] inline-block">
                        {quantity}
                      </span>
                    </div>
                    
                    <button 
                      onClick={increaseQuantity}
                      className="w-12 h-12 rounded-full bg-amber-100 text-amber-700 flex items-center justify-center hover:bg-amber-200 active:scale-95 transition-all duration-300"
                    >
                      <span className="text-2xl font-bold">+</span>
                    </button>
                  </div>
                  
                  <div className="text-right">
                    <p className="text-gray-600 mb-1">Total Price</p>
                    <p className="text-3xl font-bold text-amber-800">
                      {formatRupiah(selectedProduct.price * quantity)}
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <div className="p-6 bg-white border-t border-gray-100">
              <button 
                onClick={addToCartFromDetail}
                className="w-full bg-amber-700 text-white py-4 rounded-2xl font-bold text-lg hover:bg-amber-800 active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-3 shadow-lg"
              >
                <span className="text-xl">+</span>
                <span>Add to Cart - {formatRupiah(selectedProduct.price * quantity)}</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  };

  const SuccessToast = () => {
    if (!showSuccessToast) return null;

    return (
      <div className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-xl shadow-lg z-[60] animate-fadeIn flex items-center gap-3">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="10" cy="10" r="9" stroke="white" strokeWidth="1.5" fill="none" />
          <path d="M7 10L10 13L13 7" stroke="white" strokeWidth="2" strokeLinecap="round" />
        </svg>
        <span className="font-medium">{successMessage}</span>
      </div>
    );
  };

  // Fungsi untuk menghandle pencarian saat Enter ditekan
  const handleKeyPress = (e) => {
    if (e.key === 'Enter') {
      e.preventDefault();
      // Trigger pencarian
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-b from-amber-50 to-white pb-24">
      <ProductDetailModal />
      <SuccessToast />

      <header className="px-6 pt-8 pb-4 bg-white/80 backdrop-blur-sm sticky top-0 z-10">
        <div className="flex flex-col md:flex-row md:items-center justify-between mb-4">
          <div className="flex items-center gap-3 mb-4 md:mb-0">
            <h1 className="text-2xl md:text-3xl font-bold text-amber-900">
              Menu
            </h1>
          </div>
          
          <div className="hidden md:flex items-center gap-2">
            <span className="text-sm text-gray-500">{totalCartItems} items</span>
          </div>
        </div>
        
        <div className="flex justify-center">
          <div className="relative w-full max-w-2xl">
            <span className="absolute left-4 top-1/2 transform -translate-y-1/2">
              <SearchIcon />
            </span>
            <input
              type="text"
              placeholder="Search your favorite coffee..."
              className="w-full pl-12 pr-10 py-3.5 rounded-2xl bg-gray-100 border border-gray-200 focus:ring-2 focus:ring-amber-500 focus:border-amber-300 focus:outline-none text-gray-800"
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              onKeyPress={handleKeyPress}
            />
            {searchQuery && (
              <button
                onClick={() => setSearchQuery('')}
                className="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors p-1"
                title="Clear search"
              >
                <CloseIcon />
              </button>
            )}
          </div>
        </div>
      </header>

      <main className="px-6">
        <section className="mt-4">
          <div className="flex justify-center overflow-x-auto gap-2 pb-3 no-scrollbar">
            {categories.map(cat => (
              <button
                key={cat.id}
                onClick={() => setActiveCategory(cat.id)}
                className={`px-5 py-3 rounded-xl whitespace-nowrap transition-all duration-300 flex-shrink-0 ${
                  activeCategory === cat.id
                    ? 'bg-amber-700 text-white shadow-md'
                    : 'bg-white text-gray-700 border border-gray-200 hover:border-amber-300 hover:bg-amber-50'
                }`}
              >
                <span className="font-medium">{cat.name}</span>
              </button>
            ))}
          </div>
        </section>

        <section className="mt-8">
          <div className="flex flex-col items-center mb-8">
            <h2 className="text-2xl font-bold text-gray-900 mb-2">
              {searchQuery ? `Search Results for "${searchQuery}"` : "Featured Drinks"}
            </h2>
            <span className={`font-medium ${filteredItems.length === 0 ? 'text-red-500' : 'text-amber-600'}`}>
              {filteredItems.length} {filteredItems.length === 1 ? 'item' : 'items'} found
            </span>
          </div>
          
          {filteredItems.length === 0 ? (
            <div className="text-center py-12">
              <div className="mb-6">
                <div className="w-24 h-24 mx-auto rounded-full bg-amber-100 flex items-center justify-center">
                  <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="9" stroke="#92400E" strokeWidth="1.5" fill="none" />
                    <path d="M8 12H16" stroke="#92400E" strokeWidth="2" strokeLinecap="round" />
                    <path d="M10 8V12H14V8" stroke="#92400E" strokeWidth="2" strokeLinecap="round" />
                    <path d="M8 16H16" stroke="#92400E" strokeWidth="2" strokeLinecap="round" />
                  </svg>
                </div>
              </div>
              <h3 className="text-xl font-bold text-gray-900 mb-2">No items found</h3>
              <p className="text-gray-600 mb-6">
                {searchQuery 
                  ? `No results for "${searchQuery}". Try different keywords.` 
                  : 'No items available in this category.'}
              </p>
              <button
                onClick={() => {
                  setSearchQuery('');
                  setActiveCategory('all');
                }}
                className="bg-amber-700 text-white px-6 py-3 rounded-xl font-medium hover:bg-amber-800 transition-colors active:scale-95"
              >
                View All Items
              </button>
            </div>
          ) : (
            <div className="flex justify-center">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-4xl">
                {filteredItems.map(item => (
                  <div key={item.id} 
                       className="bg-white rounded-2xl p-5 shadow-lg hover:shadow-xl transition-all duration-300 border border-amber-100">
                    <div className="relative w-full h-48 rounded-xl overflow-hidden mb-4">
                      <img 
                        src={item.image} 
                        alt={item.name}
                        className="w-full h-full object-cover hover:scale-110 transition-transform duration-500"
                      />
                      <div className="absolute top-3 right-3 bg-white/90 backdrop-blur-sm px-3 py-1.5 rounded-full flex items-center gap-1.5">
                        <StarIcon filled={true} />
                        <span className="font-bold text-sm">{item.rating}</span>
                      </div>
                    </div>
                    
                    <div>
                      <h3 className="font-bold text-xl text-gray-900 mb-2">{item.name}</h3>
                      <p className="text-gray-600 text-sm mb-3">{item.description}</p>
                      
                      <div className="mb-4">
                        <span className="px-4 py-1 bg-amber-100 text-amber-800 text-sm font-medium rounded-full">
                          {item.category.charAt(0).toUpperCase() + item.category.slice(1)}
                        </span>
                      </div>
                      
                      <div className="flex justify-between items-center">
                        <span className="text-2xl font-bold text-amber-800">
                          {formatRupiah(item.price)}
                        </span>
                        
                        <div className="flex gap-2">
                          <button 
                            onClick={() => openProductDetail(item)}
                            className="text-amber-700 text-sm font-medium hover:text-amber-800 px-3 py-2 rounded-lg hover:bg-amber-50 transition-colors flex items-center gap-2"
                          >
                            <span>Details</span>
                            <ChevronIcon />
                          </button>
                          <button 
                            onClick={() => quickAddToCart(item)}
                            className="bg-amber-700 text-white px-4 py-2.5 rounded-xl font-medium hover:bg-amber-800 active:scale-95 transition-all duration-300 flex items-center gap-2"
                          >
                            <span className="text-lg">+</span>
                            <span>Add</span>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          )}
        </section>
      </main>

      <nav className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-2xl py-3 z-40">
        <div className="flex justify-center">
          <div className="flex justify-between w-full max-w-md px-6">
            <Link 
              to="/home" 
              className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <HomeIcon />
              </div>
              <span className="text-xs font-medium mt-1">Home</span>
            </Link>
            
            <Link 
              to="/menu" 
              className="flex flex-col items-center text-amber-700 flex-1 group"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <CoffeeIcon active={true} />
              </div>
              <span className="text-xs font-bold mt-1">Menu</span>
            </Link>
            
            <Link 
              to="/cart" 
              className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group relative"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <CartIcon active={false} count={totalCartItems} />
              </div>
              <span className="text-xs font-medium mt-1">Cart</span>
            </Link>
            
            <Link 
              to="/profile" 
              className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <ProfileIcon />
              </div>
              <span className="text-xs font-medium mt-1">Me</span>
            </Link>
          </div>
        </div>
      </nav>
    </div>
  );
};

const styles = `
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out;
  }
`;

export default function MenuPageWithStyles(props) {
  return (
    <>
      <style>{styles}</style>
      <MenuPage {...props} />
    </>
  );
}
</file>

<file path="src/pages/OrderSuccessPage.jsx">
import React, { useEffect, useState } from 'react';
import { Link, useLocation } from 'react-router-dom';

const OrderSuccessPage = () => {
  const location = useLocation();
  const [orderData, setOrderData] = useState(null);
  
  // Helper function to format IDR
  const formatIDR = (amount) => {
    return `Rp ${amount.toLocaleString('id-ID')}`;
  };

  // Ambil data pesanan dari location state
  useEffect(() => {
    const stateOrderData = location.state?.orderData;
    
    if (stateOrderData) {
      // Data dari CheckoutPage (sudah dalam Rupiah)
      const finalOrderData = {
        ...stateOrderData,
        orderNumber: stateOrderData.orderNumber || `ORD-${Date.now().toString().slice(-8)}`,
        estimatedDelivery: stateOrderData.estimatedDelivery || "25-40 minutes",
        deliveryDate: stateOrderData.deliveryDate || new Date().toLocaleDateString('en-US', { 
          weekday: 'short', 
          year: 'numeric', 
          month: 'short', 
          day: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        })
      };
      
      setOrderData(finalOrderData);
      
      // Simpan ke order history di localStorage (dalam Rupiah)
      try {
        const orderHistory = JSON.parse(localStorage.getItem('coffee_shop_order_history')) || [];
        
        const newOrder = {
          id: Date.now(),
          orderNumber: finalOrderData.orderNumber,
          items: finalOrderData.cartItems?.map(item => item.name) || ["Order completed"],
          itemsDetailed: finalOrderData.cartItems || [], // Sudah dalam Rupiah, tidak perlu konversi
          total: finalOrderData.orderSummary?.total || 0, // Sudah dalam Rupiah
          orderSummary: finalOrderData.orderSummary, // Sudah dalam Rupiah
          date: new Date().toLocaleDateString('en-US', {
            weekday: 'short',
            year: 'numeric',
            month: 'short',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
          }),
          status: 'Completed',
          statusColor: 'bg-green-100 text-green-800'
        };
        
        orderHistory.unshift(newOrder);
        localStorage.setItem('coffee_shop_order_history', JSON.stringify(orderHistory));
        
        console.log('Order saved to history:', newOrder);
      } catch (error) {
        console.error('Error saving order to history:', error);
      }
      
    } else {
      // Data default (dalam Rupiah)
      const params = new URLSearchParams(location.search);
      const orderNumber = params.get('orderNumber') || `ORD-${Date.now().toString().slice(-8)}`;
      
      const defaultOrderData = {
        orderNumber: orderNumber,
        cartItems: [
          {
            id: 1,
            name: "Caramel Macchiato",
            price: 35000, // Harga dalam Rupiah (tanpa titik)
            quantity: 2,
            image: "https://dinnerthendessert.com/wp-content/uploads/2023/10/Caramel-Macchiato-7-500x500.jpg"
          },
          {
            id: 2,
            name: "Chocolate Croissant",
            price: 22000, // Harga dalam Rupiah (tanpa titik)
            quantity: 1,
            image: "https://sallysbakingaddiction.com/wp-content/uploads/2018/03/chocolate-croissants-2.jpg"
          }
        ],
        orderSummary: {
          subtotal: 92000, // (35000 * 2) + (22000 * 1) = 92000
          tax: 9200,       // 10% dari subtotal
          deliveryFee: 10000,
          platformFee: 3000,
          tips: 0,
          promoDiscount: 0,
          total: 115200     // 92000 + 9200 + 10000 + 3000 = 115200
        },
        estimatedDelivery: "25-40 minutes",
        deliveryDate: new Date().toLocaleDateString('en-US', { 
          weekday: 'short', 
          year: 'numeric', 
          month: 'short', 
          day: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        })
      };
      
      setOrderData(defaultOrderData);
      
      // Simpan default order ke history (dalam Rupiah)
      try {
        const orderHistory = JSON.parse(localStorage.getItem('coffee_shop_order_history')) || [];
        
        const newOrder = {
          id: Date.now(),
          orderNumber: defaultOrderData.orderNumber,
          items: defaultOrderData.cartItems.map(item => item.name),
          itemsDetailed: defaultOrderData.cartItems,
          total: defaultOrderData.orderSummary.total,
          orderSummary: defaultOrderData.orderSummary,
          date: defaultOrderData.deliveryDate,
          status: 'Completed',
          statusColor: 'bg-green-100 text-green-800'
        };
        
        orderHistory.unshift(newOrder);
        localStorage.setItem('coffee_shop_order_history', JSON.stringify(orderHistory));
      } catch (error) {
        console.error('Error saving default order:', error);
      }
    }
  }, [location]);

  // Jika belum ada data, tampilkan loading
  if (!orderData) {
    return (
      <div className="min-h-screen bg-gradient-to-b from-amber-50 to-white flex items-center justify-center">
        <div className="text-center">
          <div className="w-16 h-16 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mx-auto mb-4"></div>
          <p className="text-gray-600">Loading order details...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-b from-amber-50 to-white pb-24 flex flex-col items-center justify-center px-6">
      {/* Success Animation/Icon */}
      <div className="mb-8">
        <div className="w-32 h-32 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 relative">
          <svg 
            className="w-24 h-24 text-green-600" 
            viewBox="0 0 24 24" 
            fill="none" 
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle cx="12" cy="12" r="12" fill="#10B981" fillOpacity="0.2"/>
            <circle cx="12" cy="12" r="9" stroke="#10B981" strokeWidth="2" fill="none"/>
            <path 
              d="M7 12L10.5 15.5L17 9" 
              stroke="#10B981" 
              strokeWidth="2" 
              strokeLinecap="round"
              strokeLinejoin="round"
              style={{
                strokeDasharray: 24,
                strokeDashoffset: 24,
                animation: 'draw 0.5s ease-in-out forwards 0.3s'
              }}
            />
          </svg>
          
          <style>{`
            @keyframes draw {
              to { stroke-dashoffset: 0; }
            }
          `}</style>
        </div>
      </div>

      {/* Success Message */}
      <h1 className="text-3xl font-bold text-gray-900 mb-4 text-center">Order Received</h1>
      
      {/* Order Details */}
      <div className="bg-white rounded-2xl p-6 shadow-lg border border-green-100 w-full max-w-md mb-8">
        <div className="text-center mb-6">
          <div className="text-gray-600 mb-2">Order Number</div>
          <div className="text-xl font-bold text-amber-800">{orderData.orderNumber}</div>
        </div>
        
        {/* Order Timeline */}
        <div className="space-y-4 mb-6">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="8" cy="8" r="6" stroke="#10B981" strokeWidth="1.5" fill="none"/>
                  <path d="M5 8L7 10L11 6" stroke="#10B981" strokeWidth="1.5" strokeLinecap="round"/>
                </svg>
              </div>
              <div>
                <div className="font-medium text-gray-900">Order Placed</div>
                <div className="text-sm text-gray-500">Just now</div>
              </div>
            </div>
          </div>
          
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="8" cy="8" r="6" stroke="#92400E" strokeWidth="1.5" fill="none"/>
                  <path d="M5 8L7 10L11 6" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round"/>
                </svg>
              </div>
              <div>
                <div className="font-medium text-gray-900">Preparing Order</div>
                <div className="text-sm text-gray-500">Estimated: 5-10 minutes</div>
              </div>
            </div>
          </div>
          
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="8" cy="8" r="6" stroke="#9CA3AF" strokeWidth="1.5" fill="none"/>
                  <path d="M6 6H10" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round"/>
                  <path d="M6 10H10" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round"/>
                </svg>
              </div>
              <div>
                <div className="font-medium text-gray-900">Out for Delivery</div>
                <div className="text-sm text-gray-500">Estimated: 20-30 minutes</div>
              </div>
            </div>
          </div>
        </div>
        
        {/* Estimated Delivery */}
        <div className="bg-amber-50 rounded-xl p-4 border border-amber-200">
          <div className="text-center">
            <div className="text-gray-600 text-sm mb-1">Estimated Delivery Time</div>
            <div className="text-2xl font-bold text-amber-800">{orderData.estimatedDelivery}</div>
            <div className="text-gray-500 text-sm mt-1">{orderData.deliveryDate}</div>
          </div>
        </div>
      </div>

      {/* Recent Order Summary */}
      <div className="bg-white rounded-2xl p-6 shadow-lg border border-amber-100 w-full max-w-md mb-8">
        <h3 className="font-bold text-gray-900 mb-4">Your Order Summary</h3>
        
        <div className="space-y-4">
          {/* Items */}
          <div className="space-y-3">
            <p className="text-sm text-gray-500 mb-2">Items Ordered:</p>
            {orderData.cartItems ? (
              orderData.cartItems.map((item, index) => (
                <div key={item.id || index} className="flex justify-between items-center pb-3 border-b border-gray-100">
                  <div className="flex items-center gap-3">
                    <div className="w-10 h-10 rounded-lg overflow-hidden">
                      <img 
                        src={item.image} 
                        alt={item.name}
                        className="w-full h-full object-cover"
                      />
                    </div>
                    <div>
                      <div className="font-medium text-gray-900">{item.name}</div>
                      <div className="text-gray-500 text-sm">
                        Qty: {item.quantity} √ó {formatIDR(item.price)}
                      </div>
                    </div>
                  </div>
                  <div className="text-right">
                    <div className="font-bold text-amber-800">
                      {formatIDR(item.price * item.quantity)}
                    </div>
                  </div>
                </div>
              ))
            ) : (
              orderData.items?.map((item, index) => (
                <div key={index} className="flex justify-between items-center pb-3 border-b border-gray-100">
                  <div className="flex items-center gap-3">
                    <div className="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center">
                      <span className="text-amber-700 text-lg">üçµ</span>
                    </div>
                    <div className="font-medium text-gray-900">{item}</div>
                  </div>
                </div>
              )) || <div className="text-gray-500 text-center py-4">No items available</div>
            )}
          </div>
          
          {/* Order Summary Details */}
          {orderData.orderSummary && (
            <div className="pt-3 border-t border-gray-200">
              <div className="space-y-2">
                <div className="flex justify-between text-gray-600">
                  <span>Subtotal</span>
                  <span>{formatIDR(orderData.orderSummary.subtotal || 0)}</span>
                </div>
                <div className="flex justify-between text-gray-600">
                  <span>Tax</span>
                  <span>{formatIDR(orderData.orderSummary.tax || 0)}</span>
                </div>
                <div className="flex justify-between text-gray-600">
                  <span>Delivery Fee</span>
                  <span>{formatIDR(orderData.orderSummary.deliveryFee || 0)}</span>
                </div>
                <div className="flex justify-between text-gray-600">
                  <span>Platform Fee</span>
                  <span>{formatIDR(orderData.orderSummary.platformFee || 0)}</span>
                </div>
                {orderData.orderSummary.tips > 0 && (
                  <div className="flex justify-between text-gray-600">
                    <span>Tip</span>
                    <span>{formatIDR(orderData.orderSummary.tips)}</span>
                  </div>
                )}
                {orderData.orderSummary.promoDiscount > 0 && (
                  <div className="flex justify-between text-green-600">
                    <span>Promo Discount</span>
                    <span>-{formatIDR(orderData.orderSummary.promoDiscount)}</span>
                  </div>
                )}
              </div>
            </div>
          )}
          
          {/* Total */}
          <div className="flex justify-between items-center pt-3 border-t border-gray-200">
            <div className="font-bold text-gray-900">Total</div>
            <div className="text-2xl font-bold text-amber-800">
              {formatIDR(
                orderData.orderSummary?.total || 
                orderData.total || 
                0
              )}
            </div>
          </div>
        </div>
      </div>

      {/* Thank You Message */}
      <div className="bg-white rounded-2xl p-6 shadow-lg border border-amber-100 w-full max-w-md mb-8">
        <div className="text-center">
          <h2 className="text-2xl font-bold text-amber-900 mb-3">THANK YOU FOR USING</h2>
          <div className="text-2xl font-bold text-amber-700 mb-6">THIS APP</div>
          
          {/* Feedback Request */}
          <div className="mb-6">
            <div className="flex items-center justify-center gap-4 mb-4">
              {[1, 2, 3, 4, 5].map((star) => (
                <button
                  key={star}
                  className="w-10 h-10 text-2xl hover:scale-110 transition-transform duration-200"
                >
                  ‚≠ê
                </button>
              ))}
            </div>
            <p className="text-gray-600 text-sm">Rate your experience</p>
          </div>
          
          <div className="flex gap-3">
            <Link 
              to="/home"
              state={{ showSuccess: true }}
              className="flex-1 bg-gradient-to-r from-amber-700 to-amber-900 text-white py-3 rounded-xl font-bold text-center hover:shadow-lg transition-all duration-300"
            >
              OKay!
            </Link>
            <Link 
              to="/menu"
              className="flex-1 border-2 border-amber-700 text-amber-700 py-3 rounded-xl font-bold text-center hover:bg-amber-50 transition-colors duration-300"
            >
              Order More
            </Link>
          </div>
        </div>
      </div>

      {/* Navigation Buttons */}
      <div className="mt-8 w-full max-w-md">
        <Link 
          to="/home"
          state={{ showSuccess: true }}
          className="block w-full bg-gradient-to-r from-amber-700 to-amber-900 text-white py-4 rounded-2xl font-bold text-center hover:shadow-2xl active:scale-[0.98] transition-all duration-300 mb-4"
        >
          Back to Home
        </Link>
        
        <Link 
          to="/profile?tab=orders"
          className="block w-full border-2 border-amber-700 text-amber-700 py-3 rounded-2xl font-bold text-center hover:bg-amber-50 transition-colors duration-300"
        >
          View Order History
        </Link>
      </div>

      {/* Bottom Navigation */}
      <nav className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-2xl py-3">
        <div className="flex justify-center">
          <div className="flex justify-between w-full max-w-md px-6">
            <Link 
              to="/home" 
              className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="9" stroke="#9CA3AF" strokeWidth="1.5" fill="none" />
                  <path d="M9 17H15" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
                  <path d="M12 9V13" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
                  <path d="M9 13H15" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
                </svg>
              </div>
              <span className="text-xs font-medium mt-1">Home</span>
            </Link>
            
            <Link 
              to="/menu" 
              className="flex flex-col items-center text-amber-700 flex-1 group"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="9" stroke="#92400E" strokeWidth="1.5" fill="none" />
                  <path d="M8 12H16" stroke="#92400E" strokeWidth="2" strokeLinecap="round" />
                  <path d="M10 8V12H14V8" stroke="#92400E" strokeWidth="2" strokeLinecap="round" />
                  <path d="M8 16H16" stroke="#92400E" strokeWidth="2" strokeLinecap="round" />
                </svg>
              </div>
              <span className="text-xs font-bold mt-1">Menu</span>
            </Link>
            
            <Link 
              to="/cart" 
              className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="9" stroke="#9CA3AF" strokeWidth="1.5" fill="none" />
                  <path d="M8 16H16" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
                  <path d="M10 10V12" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
                  <path d="M14 10V12" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
                  <path d="M7.5 16L8.5 10H15.5L16.5 16H7.5Z" 
                        stroke="#9CA3AF" 
                        strokeWidth="1.5" 
                        fill="none" 
                        strokeLinejoin="round" />
                </svg>
              </div>
              <span className="text-xs font-medium mt-1">Cart</span>
            </Link>
            
            <Link 
              to="/profile" 
              className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="9" stroke="#9CA3AF" strokeWidth="1.5" fill="none" />
                  <circle cx="12" cy="9" r="3" stroke="#9CA3AF" strokeWidth="1.5" fill="none" />
                  <path d="M6 20C6 16 9 13 12 13C15 13 18 16 18 20" 
                        stroke="#9CA3AF" 
                        strokeWidth="1.5" 
                        strokeLinecap="round" />
                </svg>
              </div>
              <span className="text-xs font-medium mt-1">Me</span>
            </Link>
          </div>
        </div>
      </nav>
    </div>
  );
};

export default OrderSuccessPage;
</file>

<file path="src/pages/ProfilePage.jsx">
import React, { useState, useEffect } from 'react';
import { Link, useLocation, useNavigate } from 'react-router-dom';
import { orderService } from '../utils/orderService';

// Ikon SVG
const HomeIcon = ({ active = false }) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M9 17H15" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
    <path d="M12 9V13" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
    <path d="M9 13H15" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const CoffeeIcon = ({ active = false }) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M8 12H16" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
    <path d="M10 8V12H14V8" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
    <path d="M8 16H16" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="2" strokeLinecap="round" />
  </svg>
);

const CartIcon = ({ count = 0, active = false }) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <circle cx="9" cy="9" r="2" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <circle cx="15" cy="9" r="2" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M6 18L9 9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
    <path d="M18 18L15 9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
    <path d="M6 18H18" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" strokeLinecap="round" />
    {count > 0 && (
      <circle cx="18" cy="6" r="4" fill="#EF4444" stroke="white" strokeWidth="1">
        <text x="18" y="8" textAnchor="middle" fill="white" fontSize="6" fontWeight="bold">
          {count > 9 ? "9+" : count}
        </text>
      </circle>
    )}
  </svg>
);

const ProfileIcon = ({ active = false, size = "24" }) => (
  <svg width={size} height={size} viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="9" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <circle cx="12" cy="9" r="3" stroke={active ? "#92400E" : "#9CA3AF"} strokeWidth="1.5" fill="none" />
    <path d="M6 20C6 16 9 13 12 13C15 13 18 16 18 20" 
          stroke={active ? "#92400E" : "#9CA3AF"} 
          strokeWidth="1.5" 
          strokeLinecap="round" />
  </svg>
);

const StarIcon = () => (
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="8" cy="8" r="7" stroke="#F59E0B" strokeWidth="1" fill="none" />
    <path d="M8 3L9.5 6L13 6.5L10.5 9L11 13L8 11L5 13L5.5 9L3 6.5L6.5 6L8 3Z" 
          fill="#F59E0B" 
          stroke="#F59E0B" 
          strokeWidth="0.5" />
  </svg>
);

const PhoneIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="10" cy="10" r="9" stroke="#9CA3AF" strokeWidth="1.5" fill="none" />
    <path d="M7 6H13V14H7V6Z" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
    <path d="M8 6V5" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
    <path d="M12 6V5" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const LocationIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="10" cy="10" r="9" stroke="#9CA3AF" strokeWidth="1.5" fill="none" />
    <circle cx="10" cy="8" r="3" stroke="#9CA3AF" strokeWidth="1.5" fill="none" />
    <path d="M6 16C7 13 9 11 10 11C11 11 13 13 14 16" stroke="#9CA3AF" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const ArrowRightIcon = () => (
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="8" cy="8" r="7" stroke="currentColor" strokeWidth="1" fill="none" />
    <path d="M6 5L10 8L6 11" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const NotificationIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="10" cy="10" r="9" stroke="currentColor" strokeWidth="1.5" fill="none" />
    <path d="M10 6V10" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
    <path d="M10 12V13" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const SecurityIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="10" cy="10" r="9" stroke="currentColor" strokeWidth="1.5" fill="none" />
    <path d="M6 10L9 13L14 8" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
  </svg>
);

const PaymentIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="10" cy="10" r="9" stroke="currentColor" strokeWidth="1.5" fill="none" />
    <rect x="6" y="7" width="8" height="6" rx="1" stroke="currentColor" strokeWidth="1.5" />
    <path d="M6 10H14" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const HelpIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="10" cy="10" r="9" stroke="currentColor" strokeWidth="1.5" fill="none" />
    <circle cx="10" cy="7" r="1" fill="currentColor" />
    <path d="M10 9V14" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const EditIcon = () => (
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="8" cy="8" r="7" stroke="currentColor" strokeWidth="1" fill="none" />
    <path d="M9 5L11 7L7 11H5V9L9 5Z" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
    <path d="M10 6L11 7" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const SaveIcon = () => (
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="8" cy="8" r="7" stroke="currentColor" strokeWidth="1" fill="none" />
    <path d="M6 9L8 11L11 6" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const CancelIcon = () => (
  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="8" cy="8" r="7" stroke="currentColor" strokeWidth="1" fill="none" />
    <path d="M6 6L10 10" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
    <path d="M10 6L6 10" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const CameraIcon = () => (
  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="10" cy="10" r="9" stroke="white" strokeWidth="1.5" fill="none" />
    <circle cx="10" cy="10" r="7" fill="#92400E" />
    <path d="M13 8C13.5523 8 14 8.44772 14 9V11C14 11.5523 13.5523 12 13 12H7C6.44772 12 6 11.5523 6 11V9C6 8.44772 6.44772 8 7 8H8L9 7H11L12 8H13Z" 
          stroke="white" 
          strokeWidth="0.8" 
          fill="none" />
    <circle cx="10" cy="10" r="2" stroke="white" strokeWidth="0.8" fill="none" />
  </svg>
);

const UserCircleIcon = ({ size = "80" }) => (
  <svg width={size} height={size} viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="40" cy="40" r="38" stroke="#92400E" strokeWidth="3" fill="#FEF3C7" />
    <circle cx="40" cy="25" r="10" stroke="#92400E" strokeWidth="2" fill="none" />
    <path d="M20 60C25 45 35 35 40 35C45 35 55 45 60 60" 
          stroke="#92400E" 
          strokeWidth="2.5" 
          strokeLinecap="round"
          fill="none" />
  </svg>
);

const ProfilePage = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const [activeTab, setActiveTab] = useState('profile');
  const [isEditing, setIsEditing] = useState(false);
  const [showPasswordForm, setShowPasswordForm] = useState(false);
  const [showSuccessMessage, setShowSuccessMessage] = useState(false);
  const [showLogoutModal, setShowLogoutModal] = useState(false);
  const [showDeleteAccountModal, setShowDeleteAccountModal] = useState(false);
  
  // User data state
  const [user, setUser] = useState({
    name: "John Doe",
    email: "john.doe@email.com",
    memberSince: "January 2024",
    loyaltyPoints: 1250,
    phone: "+1 (555) 123-4567",
    address: "123 Coffee Street, Suite 456\nBrew City, BC 12345"
  });

  // Form state
  const [formData, setFormData] = useState({
    firstName: "John",
    lastName: "Doe",
    email: "john.doe@email.com",
    phone: "+1 (555) 123-4567",
    streetAddress: "123 Coffee Street, Suite 456",
    city: "Brew City",
    state: "BC",
    zipCode: "12345",
    currentPassword: "",
    newPassword: "",
    confirmPassword: ""
  });

  // Order history state
  const [orderHistory, setOrderHistory] = useState([]);

  // Favorite items dengan gambar
  const favorites = [
    { 
      id: 1, 
      name: "Caramel Macchiato", 
      type: "Coffee", 
      timesOrdered: 12,
      image: "https://dinnerthendessert.com/wp-content/uploads/2023/10/Caramel-Macchiato-7-500x500.jpg"
    },
    { 
      id: 2, 
      name: "Matcha Latte", 
      type: "Tea", 
      timesOrdered: 8,
      image: "https://mocktail.net/wp-content/uploads/2021/05/Iced-Matcha-Latte_1.jpg"
    },
    { 
      id: 3, 
      name: "Chocolate Croissant", 
      type: "Pastry", 
      timesOrdered: 5,
      image: "https://www.lalevain.com/wp-content/uploads/2021/11/Xsant.jpg"
    },
    { 
      id: 4, 
      name: "Iced Americano", 
      type: "Coffee", 
      timesOrdered: 4,
      image: "https://diethood.com/wp-content/uploads/2023/08/iced-americano-3.jpg"
    }
  ];

  // Fungsi untuk mendapatkan order history dari localStorage
  const getOrderHistory = () => {
    try {
      const orders = localStorage.getItem('coffee_shop_order_history');
      return orders ? JSON.parse(orders) : [];
    } catch (error) {
      console.error('Error getting order history:', error);
      return [];
    }
  };

  // Fungsi untuk menghapus semua order history
  const clearOrderHistory = () => {
    localStorage.removeItem('coffee_shop_order_history');
    setOrderHistory([]);
  };

  // Load order history dari storage
  useEffect(() => {
    const orders = getOrderHistory();
    setOrderHistory(orders);
    
    // Cek jika ada parameter tab dari URL
    const params = new URLSearchParams(location.search);
    const tabParam = params.get('tab');
    if (tabParam && ['profile', 'orders', 'favorites'].includes(tabParam)) {
      setActiveTab(tabParam);
    }
  }, [location]);

  // Handle edit button click
  const handleEditClick = () => {
    setIsEditing(true);
    // Parse current address into form fields
    const addressParts = user.address.split('\n');
    const [streetAddress, cityStateZip] = addressParts;
    
    if (cityStateZip) {
      const [city, stateZip] = cityStateZip.split(', ');
      const [state, zipCode] = stateZip ? stateZip.split(' ') : ['', ''];
      
      setFormData({
        ...formData,
        firstName: user.name.split(' ')[0] || '',
        lastName: user.name.split(' ')[1] || '',
        email: user.email,
        phone: user.phone,
        streetAddress: streetAddress || '',
        city: city || '',
        state: state || '',
        zipCode: zipCode || ''
      });
    }
  };

  // Handle form input change
  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setFormData({
      ...formData,
      [name]: value
    });
  };

  // Handle save
  const handleSave = (e) => {
    e.preventDefault();
    
    // Update user data
    const updatedUser = {
      ...user,
      name: `${formData.firstName} ${formData.lastName}`,
      email: formData.email,
      phone: formData.phone,
      address: `${formData.streetAddress}\n${formData.city}, ${formData.state} ${formData.zipCode}`
    };
    
    setUser(updatedUser);
    setIsEditing(false);
    setShowSuccessMessage(true);
    setShowPasswordForm(false);
    
    // Hide success message after 3 seconds
    setTimeout(() => {
      setShowSuccessMessage(false);
    }, 3000);
    
    // In real app, you would send data to backend here
    console.log('Updated user data:', updatedUser);
  };

  // Handle cancel
  const handleCancel = () => {
    setIsEditing(false);
    setShowPasswordForm(false);
  };

  // Handle password change
  const handlePasswordChange = (e) => {
    e.preventDefault();
    
    // In real app, validate and send to backend
    if (formData.newPassword !== formData.confirmPassword) {
      alert("New passwords don't match!");
      return;
    }
    
    console.log('Password change requested');
    // Reset password fields
    setFormData({
      ...formData,
      currentPassword: "",
      newPassword: "",
      confirmPassword: ""
    });
    
    setShowPasswordForm(false);
    alert("Password updated successfully!");
  };

  // Clear all orders
  const handleClearAllOrders = () => {
    if (window.confirm("Are you sure you want to clear all order history?")) {
      clearOrderHistory();
      setOrderHistory([]);
    }
  };

  // Refresh order history
  const refreshOrderHistory = () => {
    const orders = getOrderHistory();
    setOrderHistory(orders);
  };

  // Handle Sign Out
  const handleSignOut = () => {
    setShowLogoutModal(true);
  };

  // Handle Confirm Sign Out
  const handleConfirmSignOut = () => {
    console.log('User signed out');
    
    // Hapus data user dari localStorage
    localStorage.removeItem('user_token');
    localStorage.removeItem('user_session');
    localStorage.removeItem('user_profile');
    
    // Tutup modal
    setShowLogoutModal(false);
    
    // Tampilkan pesan sukses dan redirect
    alert('You have been signed out successfully!');
    navigate('/login'); // Atau '/home' sesuai kebutuhan
  };

  // Handle Delete Account
  const handleDeleteAccount = () => {
    setShowDeleteAccountModal(true);
  };

  // Handle Confirm Delete Account
  const handleConfirmDeleteAccount = () => {
    console.log('Account deletion requested');
    
    // Hapus semua data user dari localStorage
    localStorage.removeItem('user_token');
    localStorage.removeItem('user_session');
    localStorage.removeItem('user_profile');
    localStorage.removeItem('coffee_shop_order_history');
    localStorage.removeItem('cart_items');
    
    // Reset state user
    setUser({
      name: "",
      email: "",
      memberSince: "",
      loyaltyPoints: 0,
      phone: "",
      address: ""
    });
    
    // Reset form data
    setFormData({
      firstName: "",
      lastName: "",
      email: "",
      phone: "",
      streetAddress: "",
      city: "",
      state: "",
      zipCode: "",
      currentPassword: "",
      newPassword: "",
      confirmPassword: ""
    });
    
    // Tutup modal
    setShowDeleteAccountModal(false);
    
    // Tampilkan pesan sukses dan redirect
    alert('Your account has been deleted successfully. We\'re sorry to see you go!');
    navigate('/home'); // Redirect ke halaman home
  };

  // Handle change profile photo (icon only)
  const handleChangePhoto = () => {
    console.log('Change photo icon clicked');
    alert('In a real app, this would open file picker to upload new photo');
  };

  // Account Settings Component
  const AccountSettings = () => (
    <div className="mt-6 mb-6 mx-4">
      <div className="bg-white rounded-2xl p-5 shadow-lg">
        <h3 className="text-lg font-bold text-gray-900 mb-4">Account Settings</h3>
        <div className="space-y-3">
          <button className="w-full text-left p-3 rounded-xl hover:bg-gray-50 transition-colors duration-300 flex justify-between items-center group">
            <div className="flex items-center gap-3">
              <NotificationIcon />
              <span>Notifications</span>
            </div>
            <ArrowRightIcon />
          </button>
          <button className="w-full text-left p-3 rounded-xl hover:bg-gray-50 transition-colors duration-300 flex justify-between items-center group">
            <div className="flex items-center gap-3">
              <SecurityIcon />
              <span>Privacy & Security</span>
            </div>
            <ArrowRightIcon />
          </button>
          <button className="w-full text-left p-3 rounded-xl hover:bg-gray-50 transition-colors duration-300 flex justify-between items-center group">
            <div className="flex items-center gap-3">
              <PaymentIcon />
              <span>Payment Methods</span>
            </div>
            <ArrowRightIcon />
          </button>
          <button className="w-full text-left p-3 rounded-xl hover:bg-gray-50 transition-colors duration-300 flex justify-between items-center group">
            <div className="flex items-center gap-3">
              <HelpIcon />
              <span>Help & Support</span>
            </div>
            <ArrowRightIcon />
          </button>
        </div>
        
        {/* Danger Zone */}
        <div className="mt-6 pt-6 border-t border-gray-200">
          <button 
            onClick={handleSignOut}
            className="w-full text-amber-600 p-3 rounded-xl hover:bg-amber-50 transition-colors duration-300 font-medium flex items-center justify-between mb-2"
          >
            <span>Sign Out</span>

          </button>
          
          <button 
            onClick={handleDeleteAccount}
            className="w-full text-red-600 p-3 rounded-xl hover:bg-red-50 transition-colors duration-300 font-medium flex items-center justify-between"
          >
            <span>Delete Account</span>
          </button>
        </div>
      </div>
    </div>
  );

  return (
    <div className="min-h-screen bg-gradient-to-b from-amber-50 to-white pb-24 w-full">
      {/* Profile Tabs */}
      <div className="mx-4 pt-6">
        <div className="flex border-b border-gray-200">
          <button
            onClick={() => setActiveTab('profile')}
            className={`flex-1 py-3 text-center font-medium ${activeTab === 'profile' ? 'text-amber-700 border-b-2 border-amber-700' : 'text-gray-500'}`}
          >
            Profile
          </button>
          <button
            onClick={() => setActiveTab('orders')}
            className={`flex-1 py-3 text-center font-medium ${activeTab === 'orders' ? 'text-amber-700 border-b-2 border-amber-700' : 'text-gray-500'}`}
          >
            Orders {orderHistory.length > 0 && `(${orderHistory.length})`}
          </button>
          <button
            onClick={() => setActiveTab('favorites')}
            className={`flex-1 py-3 text-center font-medium ${activeTab === 'favorites' ? 'text-amber-700 border-b-2 border-amber-700' : 'text-gray-500'}`}
          >
            Favorites
          </button>
        </div>
      </div>

      {/* Success Message */}
      {showSuccessMessage && (
        <div className="mt-3 mx-4 p-3 bg-green-100 text-green-800 rounded-xl flex items-center gap-2">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="10" cy="10" r="9" stroke="#10B981" strokeWidth="1.5" fill="none" />
            <path d="M6 10L9 13L14 8" stroke="#10B981" strokeWidth="2" strokeLinecap="round" />
          </svg>
          <span className="font-medium">Profile updated successfully!</span>
        </div>
      )}

      {/* Modal Logout Confirmation */}
      {showLogoutModal && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-2xl p-6 w-full max-w-sm mx-auto animate-fadeIn">
            <div className="flex justify-center mb-4">
              <div className="w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="9" stroke="#92400E" strokeWidth="1.5" fill="none"/>
                  <path d="M8 12H15" stroke="#92400E" strokeWidth="2" strokeLinecap="round"/>
                  <path d="M12 8L16 12L12 16" stroke="#92400E" strokeWidth="2" strokeLinecap="round"/>
                </svg>
              </div>
            </div>
            
            <h3 className="text-xl font-bold text-gray-900 text-center mb-2">
              Sign Out
            </h3>
            <p className="text-gray-600 text-center mb-6">
              Are you sure you want to sign out of your account?
            </p>
            
            <div className="flex gap-3">
              <button
                onClick={() => setShowLogoutModal(false)}
                className="flex-1 border border-gray-300 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-50 transition-colors"
              >
                Cancel
              </button>
              <button
                onClick={handleConfirmSignOut}
                className="flex-1 bg-amber-600 text-white py-3 rounded-xl font-medium hover:bg-amber-700 transition-colors"
              >
                Sign Out
              </button>
            </div>
          </div>
        </div>
      )}

      {/* Modal Delete Account Confirmation */}
      {showDeleteAccountModal && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-2xl p-6 w-full max-w-sm mx-auto animate-fadeIn">
            <div className="flex justify-center mb-4">
              <div className="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="12" cy="12" r="9" stroke="#DC2626" strokeWidth="1.5" fill="none"/>
                  <path d="M15 9L9 15" stroke="#DC2626" strokeWidth="2" strokeLinecap="round"/>
                  <path d="M9 9L15 15" stroke="#DC2626" strokeWidth="2" strokeLinecap="round"/>
                </svg>
              </div>
            </div>
            
            <h3 className="text-xl font-bold text-gray-900 text-center mb-2">
              Delete Account
            </h3>
            <p className="text-gray-600 text-center mb-2">
              This action cannot be undone. All your data will be permanently deleted.
            </p>
            <p className="text-red-600 text-sm text-center mb-6">
              This includes: profile, order history, favorites, and loyalty points.
            </p>
            
            <div className="flex gap-3">
              <button
                onClick={() => setShowDeleteAccountModal(false)}
                className="flex-1 border border-gray-300 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-50 transition-colors"
              >
                Cancel
              </button>
              <button
                onClick={handleConfirmDeleteAccount}
                className="flex-1 bg-red-600 text-white py-3 rounded-xl font-medium hover:bg-red-700 transition-colors"
              >
                Delete Account
              </button>
            </div>
          </div>
        </div>
      )}

      {/* Profile Content */}
      <div className="mt-4 mx-4">
        {activeTab === 'profile' && (
          <>
            {!isEditing ? (
              // View Mode
              <div className="bg-white rounded-2xl p-5 shadow-lg mb-5">
                {/* Profile Icon Only (No Image) */}
                <div className="flex flex-col items-center mb-6">
                  <div className="relative mb-4">
                    <div className="w-32 h-32 flex items-center justify-center">
                      <UserCircleIcon size="80" />
                    </div>
                  </div>
                  
                  {/* User Info under icon */}
                  <div className="text-center">
                    <h2 className="text-2xl font-bold text-gray-900">{user.name}</h2>
                    <p className="text-gray-600 mt-1">{user.email}</p>
                    <div className="flex items-center justify-center gap-2 mt-3">
                      <span className="bg-amber-100 text-amber-800 text-xs px-3 py-1.5 rounded-full flex items-center gap-1">
                        <StarIcon />
                        Gold Member
                      </span>
                      <span className="text-gray-500 text-sm">Since {user.memberSince}</span>
                    </div>
                  </div>
                </div>

                {/* Loyalty Points */}
                <div className="bg-gradient-to-r from-amber-500 to-amber-700 rounded-xl p-4 text-white mb-5">
                  <div className="flex justify-between items-center">
                    <div>
                      <p className="text-amber-100 text-sm">Loyalty Points</p>
                      <p className="text-2xl font-bold">{user.loyaltyPoints.toLocaleString()} pts</p>
                    </div>
                    <div className="text-right">
                      <p className="text-amber-100 text-sm">Next Reward</p>
                      <p className="text-xl font-bold">1500 pts</p>
                    </div>
                  </div>
                  <div className="mt-4">
                    <div className="h-2 bg-white/30 rounded-full overflow-hidden">
                      <div 
                        className="h-full bg-white rounded-full transition-all duration-500"
                        style={{ width: `${(user.loyaltyPoints / 1500) * 100}%` }}
                      ></div>
                    </div>
                    <p className="text-amber-100 text-xs mt-2 text-center">
                      {1500 - user.loyaltyPoints} more points for free drink!
                    </p>
                  </div>
                </div>

                {/* Contact Info */}
                <div className="space-y-4">
                  <div className="flex items-center gap-3">
                    <PhoneIcon />
                    <div>
                      <p className="text-sm text-gray-500">Phone</p>
                      <p className="font-medium">{user.phone}</p>
                    </div>
                  </div>
                  <div className="flex items-start gap-3">
                    <LocationIcon />
                    <div>
                      <p className="text-sm text-gray-500">Address</p>
                      <p className="font-medium whitespace-pre-line">{user.address}</p>
                    </div>
                  </div>
                </div>

                {/* Edit Profile Button */}
                <button 
                  onClick={handleEditClick}
                  className="mt-6 w-full border-2 border-amber-700 text-amber-700 py-3 rounded-xl font-medium hover:bg-amber-50 transition-colors duration-300 flex items-center justify-center gap-2"
                >
                  <EditIcon />
                  Edit Profile
                </button>
              </div>
            ) : (
              // Edit Mode
              <div className="bg-white rounded-2xl p-5 shadow-lg mb-5">
                <h2 className="text-xl font-bold text-gray-900 mb-5">Edit Profile</h2>
                
                <form onSubmit={handleSave}>
                  {/* Personal Information */}
                  <div className="mb-5">
                    <h3 className="text-lg font-semibold text-gray-800 mb-4">Personal Information</h3>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          First Name
                        </label>
                        <input
                          type="text"
                          name="firstName"
                          value={formData.firstName}
                          onChange={handleInputChange}
                          className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
                          required
                        />
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Last Name
                        </label>
                        <input
                          type="text"
                          name="lastName"
                          value={formData.lastName}
                          onChange={handleInputChange}
                          className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
                          required
                        />
                      </div>
                    </div>
                    
                    <div className="mt-4">
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        Email Address
                      </label>
                      <input
                        type="email"
                        name="email"
                        value={formData.email}
                        onChange={handleInputChange}
                        className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
                        required
                      />
                    </div>
                    
                    <div className="mt-4">
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        Phone Number
                      </label>
                      <input
                        type="tel"
                        name="phone"
                        value={formData.phone}
                        onChange={handleInputChange}
                        className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
                        required
                      />
                    </div>
                  </div>

                  {/* Address Information */}
                  <div className="mb-5">
                    <h3 className="text-lg font-semibold text-gray-800 mb-4">Address Information</h3>
                    
                    <div className="mb-4">
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        Street Address
                      </label>
                      <input
                        type="text"
                        name="streetAddress"
                        value={formData.streetAddress}
                        onChange={handleInputChange}
                        className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
                        required
                      />
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          City
                        </label>
                        <input
                          type="text"
                          name="city"
                          value={formData.city}
                          onChange={handleInputChange}
                          className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
                          required
                        />
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          State/Province
                        </label>
                        <input
                          type="text"
                          name="state"
                          value={formData.state}
                          onChange={handleInputChange}
                          className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
                          required
                        />
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          ZIP/Postal Code
                        </label>
                        <input
                          type="text"
                          name="zipCode"
                          value={formData.zipCode}
                          onChange={handleInputChange}
                          className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
                          required
                        />
                      </div>
                    </div>
                  </div>

                  {/* Password Change Section */}
                  {!showPasswordForm ? (
                    <button
                      type="button"
                      onClick={() => setShowPasswordForm(true)}
                      className="w-full border border-amber-600 text-amber-600 py-3 rounded-xl font-medium hover:bg-amber-50 transition-colors duration-300 mb-5"
                    >
                      Change Password
                    </button>
                  ) : (
                    <div className="mb-5 p-4 border border-gray-200 rounded-xl">
                      <h3 className="text-lg font-semibold text-gray-800 mb-4">Change Password</h3>
                      
                      <div className="space-y-4">
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-1">
                            Current Password
                          </label>
                          <input
                            type="password"
                            name="currentPassword"
                            value={formData.currentPassword}
                            onChange={handleInputChange}
                            className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-1">
                            New Password
                          </label>
                          <input
                            type="password"
                            name="newPassword"
                            value={formData.newPassword}
                            onChange={handleInputChange}
                            className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-1">
                            Confirm New Password
                          </label>
                          <input
                            type="password"
                            name="confirmPassword"
                            value={formData.confirmPassword}
                            onChange={handleInputChange}
                            className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"
                          />
                        </div>
                        
                        <button
                          type="button"
                          onClick={handlePasswordChange}
                          className="w-full bg-amber-600 text-white py-3 rounded-xl font-medium hover:bg-amber-700 transition-colors duration-300"
                        >
                          Update Password
                        </button>
                        
                        <button
                          type="button"
                          onClick={() => setShowPasswordForm(false)}
                          className="w-full border border-gray-300 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-50 transition-colors duration-300"
                        >
                          Cancel Password Change
                        </button>
                      </div>
                    </div>
                  )}

                  {/* Action Buttons */}
                  <div className="flex gap-4">
                    <button
                      type="submit"
                      className="flex-1 bg-amber-700 text-white py-3 rounded-xl font-medium hover:bg-amber-800 transition-colors duration-300 flex items-center justify-center gap-2"
                    >
                      <SaveIcon />
                      Save Changes
                    </button>
                    
                    <button
                      type="button"
                      onClick={handleCancel}
                      className="flex-1 border border-gray-300 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-50 transition-colors duration-300 flex items-center justify-center gap-2"
                    >
                      <CancelIcon />
                      Cancel
                    </button>
                  </div>
                </form>
              </div>
            )}

          </>
        )}

{activeTab === 'orders' && (
  <div className="space-y-4">
    <div className="flex justify-between items-center mb-4">
      <h2 className="text-xl font-bold text-gray-900">Order History</h2>
      {orderHistory.length > 0 && (
        <button
          onClick={refreshOrderHistory}
          className="text-sm text-amber-600 hover:text-amber-800"
          title="Refresh orders"
        >
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="8" cy="8" r="6" stroke="currentColor" strokeWidth="1.5" fill="none"/>
            <path d="M8 4V8L10 10" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round"/>
            <path d="M10.5 5.5L13 3" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round"/>
          </svg>
        </button>
      )}
    </div>
    
    {orderHistory.length === 0 ? (
      // Tampilan ketika belum ada pesanan
      <div className="bg-white rounded-2xl p-8 text-center shadow-lg">
        <div className="w-24 h-24 mx-auto rounded-full bg-amber-100 flex items-center justify-center mb-4">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="9" stroke="#92400E" strokeWidth="1.5" fill="none" />
            <path d="M8 16H16" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
            <path d="M10 10V12" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
            <path d="M14 10V12" stroke="#92400E" strokeWidth="1.5" strokeLinecap="round" />
            <path d="M7.5 16L8.5 10H15.5L16.5 16H7.5Z" 
                  stroke="#92400E" 
                  strokeWidth="1.5" 
                  fill="none" 
                  strokeLinejoin="round" />
          </svg>
        </div>
        <h3 className="text-xl font-bold text-gray-900 mb-2">No Orders Yet</h3>
        <p className="text-gray-600 mb-6">
          You haven't placed any orders yet. Start exploring our menu!
        </p>
        <Link 
          to="/menu" 
          className="inline-block bg-amber-700 text-white px-6 py-3 rounded-xl font-medium hover:bg-amber-800 transition-colors"
        >
          Browse Menu
        </Link>
      </div>
    ) : (
      // Tampilan ketika ada pesanan
      <>
        {/* Debugging - pindahkan console.log ke sini */}
        {console.log('Type of orderHistory:', typeof orderHistory)}
        {console.log('Value of orderHistory:', orderHistory)}
        
        {/* Handle both array and object */}
        {(Array.isArray(orderHistory) ? orderHistory : [orderHistory]).map(order => (
          <div key={order.id} className="bg-white rounded-2xl p-5 shadow-lg hover:shadow-xl transition-all duration-300">
            <div className="flex justify-between items-start mb-4">
              <div>
                <h3 className="font-bold text-gray-900">Order #{order.orderNumber}</h3>
                <p className="text-gray-500 text-sm mt-1">{order.date}</p>
              </div>
              <span className={`px-3 py-1 rounded-full text-xs font-medium ${order.statusColor || 'bg-green-100 text-green-800'}`}>
                {order.status || "Completed"}
              </span>
            </div>
            
            <div className="mb-4">
              <p className="text-sm text-gray-500 mb-2">Items:</p>
              <div className="flex flex-wrap gap-2">
                {(Array.isArray(order.items) ? order.items : []).slice(0, 3).map((item, index) => (
                  <span key={index} className="bg-amber-50 text-amber-800 text-sm px-3 py-1 rounded-full">
                    {item}
                  </span>
                ))}
                {order.items?.length > 3 && (
                  <span className="bg-gray-100 text-gray-600 text-sm px-3 py-1 rounded-full">
                    +{order.items.length - 3} more
                  </span>
                )}
              </div>
            </div>
            
            {/* Order Details (jika ada itemsDetailed) */}
            {order.itemsDetailed && order.itemsDetailed.length > 0 && (
              <div className="mb-4">
                <p className="text-sm text-gray-500 mb-2">Order Details:</p>
                <div className="space-y-2">
                  {order.itemsDetailed.slice(0, 2).map((item, index) => (
                    <div key={index} className="flex justify-between items-center text-sm">
                      <span className="text-gray-700">{item.name} √ó {item.quantity}</span>
                      <span className="font-medium">Rp {(item.price * item.quantity).toLocaleString('id-ID')}</span>
                    </div>
                  ))}
                  {order.itemsDetailed.length > 2 && (
                    <div className="text-center text-gray-500 text-sm">
                      ... and {order.itemsDetailed.length - 2} more items
                    </div>
                  )}
                </div>
              </div>
            )}
            
            <div className="flex justify-between items-center">
              <div>
                <p className="text-sm text-gray-500">Total</p>
                <p className="text-xl font-bold text-amber-800">Rp {(order.total || 0).toLocaleString('id-ID')}</p>
              </div>
            </div>
          </div>
        ))}
        
        {/* Clear orders button */}
        <div className="text-center">
          <button
            onClick={handleClearAllOrders}
            className="text-sm text-red-600 hover:text-red-800"
          >
            Clear All Orders
          </button>
        </div>
      </>
    )}
  </div>
)}

        {activeTab === 'favorites' && (
          <div className="space-y-4">
            <h2 className="text-xl font-bold text-gray-900 mb-4">Your Favorites</h2>
            {favorites.map(item => (
              <div key={item.id} className="bg-white rounded-2xl p-5 shadow-lg hover:shadow-xl transition-all duration-300">
                <div className="flex items-center justify-between mb-3">
                  <div className="flex items-center gap-3">
                    <div className="w-12 h-12 rounded-xl overflow-hidden">
                      <img 
                        src={item.image} 
                        alt={item.name}
                        className="w-full h-full object-cover"
                        onError={(e) => {
                          // Fallback jika gambar gagal dimuat
                          e.target.style.display = 'none';
                          e.target.parentElement.innerHTML = `
                            <div class="w-full h-full flex items-center justify-center bg-gradient-to-br from-amber-200 to-amber-300">
                              <span class="text-xl font-bold">${item.name.charAt(0)}</span>
                            </div>
                          `;
                        }}
                      />
                    </div>
                    <div>
                      <h3 className="font-bold text-gray-900">{item.name}</h3>
                      <p className="text-gray-500 text-sm">{item.type}</p>
                    </div>
                  </div>
                  <span className="bg-red-50 text-red-600 text-sm px-3 py-1 rounded-full flex items-center gap-1">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="#DC2626" xmlns="http://www.w3.org/2000/svg">
                      <path d="M6 2L7.5 4.5L10 5L8 7L8.5 10L6 8.5L3.5 10L4 7L2 5L4.5 4.5L6 2Z" 
                            stroke="#DC2626" strokeWidth="0.5"/>
                    </svg>
                    {item.timesOrdered} times
                  </span>
                </div>
                
                <div className="flex justify-between items-center mt-4">
                  <button className="flex-1 border border-amber-200 text-amber-700 py-2 rounded-xl font-medium hover:bg-amber-50 mr-2">
                    Order Again
                  </button>
                  <button className="flex-1 border border-gray-300 text-gray-700 py-2 rounded-xl font-medium hover:bg-gray-50">
                    Remove
                  </button>
                </div>
              </div>
            ))}
            
            <div className="bg-gradient-to-r from-amber-100 to-amber-50 rounded-2xl p-6 text-center">
              <div className="w-16 h-16 bg-amber-200 rounded-full flex items-center justify-center mx-auto mb-4">
                <StarIcon />
              </div>
              <h3 className="font-bold text-gray-900 mb-2">Discover New Favorites</h3>
              <p className="text-gray-600 mb-4">Try our seasonal specials and limited edition drinks!</p>
              <Link 
                to="/menu" 
                className="inline-block bg-amber-700 text-white px-6 py-2.5 rounded-xl font-medium hover:bg-amber-800 transition-colors"
              >
                Explore Menu
              </Link>
            </div>
          </div>
        )}
      </div>

      {/* Account Settings - Hanya tampil di tab Profile dan bukan mode edit */}
      {activeTab === 'profile' && !isEditing && <AccountSettings />}

      {/* Bottom Navigation */}
      <nav className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-2xl py-3">
        <div className="flex justify-center">
          <div className="flex justify-between w-full max-w-md px-6">
            <Link 
              to="/home" 
              className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <HomeIcon />
              </div>
              <span className="text-xs font-medium mt-1">Home</span>
            </Link>
            
            <Link 
              to="/menu" 
              className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <CoffeeIcon />
              </div>
              <span className="text-xs font-medium mt-1">Menu</span>
            </Link>
            
            <Link 
              to="/cart" 
              className="flex flex-col items-center text-gray-500 hover:text-amber-700 transition-colors flex-1 group relative"
            >
              <div className="group-hover:scale-110 transition-transform duration-200">
                <CartIcon count={4} />
              </div>
              <span className="text-xs font-medium mt-1">Cart</span>
            </Link>
            
            <Link 
              to="/profile" 
              className="flex flex-col items-center text-amber-700 flex-1 group relative"
            >
              <div className="absolute -top-2 left-1/2 transform -translate-x-1/2">
                <svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="4" cy="4" r="4" fill="#92400E"/>
                </svg>
              </div>
              <div className="group-hover:scale-110 transition-transform duration-200">
                <ProfileIcon active={true} />
              </div>
              <span className="text-xs font-bold mt-1">Me</span>
            </Link>
          </div>
        </div>
      </nav>

      {/* Tambahkan style animasi */}
      <style jsx>{`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }
        
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
      `}</style>
    </div>
  );
};

export default ProfilePage;
</file>

<file path="src/pages/Register.jsx">
import { useState } from 'react';
import { useNavigate } from 'react-router-dom';


function Register() {
  const [username, setUsername] = useState('');
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [message, setMessage] = useState('');
  const navigate = useNavigate();

  const handleSubmit = async (e) => {
    e.preventDefault();
    setMessage('');
    try {
      const res = await fetch('/api/auth/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, email, password })
      });
      const data = await res.json();
      if (data.success) {
        setMessage('Registrasi berhasil!');
        setTimeout(() => {
          navigate('/login');
        }, 1000);
      } else {
        setMessage(data.error || 'Registrasi gagal');
      }
    } catch (err) {
      setMessage('Terjadi kesalahan jaringan');
    }
  };

  return (
    <div>
      <h2>Register</h2>
      <form onSubmit={handleSubmit}>
        <input
          type="text"
          placeholder="Username"
          value={username}
          onChange={(e) => setUsername(e.target.value)}
          required
        />
        <input
          type="email"
          placeholder="Email"
          value={email}
          onChange={(e) => setEmail(e.target.value)}
          required
        />
        <input
          type="password"
          placeholder="Password"
          value={password}
          onChange={(e) => setPassword(e.target.value)}
          required
        />
        <button type="submit">Register</button>
      </form>
      {message && <p>{message}</p>}
    </div>
  );
}

export default Register;
</file>

<file path="src/utils/api.js">
import axios from 'axios';

// Base URL untuk backend
const API_BASE_URL = 'http://localhost:5000/api';

// Buat instance axios
const api = axios.create({
  baseURL: API_BASE_URL,
  headers: {
    'Content-Type': 'application/json',
  },
});

// Interceptor untuk menambahkan token ke setiap request
api.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => {
    return Promise.reject(error);
  }
);

// Interceptor untuk handle errors
api.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      // Token expired atau invalid
      localStorage.removeItem('token');
      localStorage.removeItem('user');
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);

// Auth API calls
export const authAPI = {
  register: (userData) => api.post('/auth/register', userData),
  login: (credentials) => api.post('/auth/login', credentials),
  forgotPassword: (email) => api.post('/auth/forgot-password', { email }),
};

// Products API calls
export const productAPI = {
  getAll: (params) => api.get('/products', { params }),
  getById: (id) => api.get(`/products/${id}`),
  getFlashSale: () => api.get('/products/flash-sale'),
};

// Cart API calls
export const cartAPI = {
  getCart: () => api.get('/cart'),
  addToCart: (productId, quantity = 1) => 
    api.post('/cart', { product_id: productId, quantity }),
  updateCartItem: (cartItemId, quantity) => 
    api.put(`/cart/${cartItemId}`, { quantity }),
  removeFromCart: (cartItemId) => api.delete(`/cart/${cartItemId}`),
  clearCart: () => api.delete('/cart'),
};

// Orders API calls
export const orderAPI = {
  createOrder: (orderData) => api.post('/orders', orderData),
  getOrders: () => api.get('/orders'),
  getOrderById: (orderId) => api.get(`/orders/${orderId}`),
};

// User API calls
export const userAPI = {
  getProfile: () => api.get('/users/profile'),
  updateProfile: (userData) => api.put('/users/profile', userData),
};

export default api;
</file>

<file path="src/utils/format.js">
// src/utils/format.js
export const formatPrice = (price) => {
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD',
    minimumFractionDigits: 2
  }).format(price);
};

export const formatDate = (date) => {
  return new Intl.DateTimeFormat('en-US', {
    month: 'short',
    day: 'numeric',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  }).format(new Date(date));
};

export const truncateText = (text, maxLength = 100) => {
  if (text.length <= maxLength) return text;
  return text.substring(0, maxLength) + '...';
};
</file>

<file path="src/utils/orderService.js">
// utils/orderService.js
import api from './api';

// Simpan cart sementara di localStorage (opsional)
const CART_KEY = 'coffee_shop_cart_temp';

// Cart Service (local storage fallback)
export const cartService = {
  // Get cart from localStorage (temporary)
  getCart: () => {
    try {
      const cart = localStorage.getItem(CART_KEY);
      return cart ? JSON.parse(cart) : [];
    } catch (error) {
      console.error('Error getting cart from localStorage:', error);
      return [];
    }
  },

  // Save cart to localStorage (temporary)
  saveCart: (cartItems) => {
    try {
      localStorage.setItem(CART_KEY, JSON.stringify(cartItems));
      return true;
    } catch (error) {
      console.error('Error saving cart to localStorage:', error);
      return false;
    }
  },

  // Clear cart from localStorage
  clearCart: () => {
    localStorage.removeItem(CART_KEY);
  }
};

// Order Service (API calls)
export const orderService = {
  // Create new order
  createOrder: async (orderData) => {
    try {
      const response = await api.post('/orders', orderData);
      return {
        success: true,
        data: response.data.data,
        message: response.data.message
      };
    } catch (error) {
      console.error('Error creating order:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Failed to create order',
        error: error.response?.data
      };
    }
  },

  // Get all orders for current user
  getUserOrders: async () => {
    try {
      const response = await api.get('/orders');
      return {
        success: true,
        data: response.data.data,
        count: response.data.count
      };
    } catch (error) {
      console.error('Error getting orders:', error);
      return {
        success: false,
        data: [],
        message: error.response?.data?.message || 'Failed to fetch orders'
      };
    }
  },

  // Get single order by ID
  getOrderById: async (orderId) => {
    try {
      const response = await api.get(`/orders/${orderId}`);
      return {
        success: true,
        data: response.data.data
      };
    } catch (error) {
      console.error('Error getting order:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Failed to fetch order'
      };
    }
  },

  // Cancel order
  cancelOrder: async (orderId) => {
    try {
      const response = await api.put(`/orders/${orderId}/cancel`);
      return {
        success: true,
        data: response.data.data,
        message: response.data.message
      };
    } catch (error) {
      console.error('Error cancelling order:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Failed to cancel order'
      };
    }
  },

  // Generate order number (client-side fallback)
  generateOrderNumber: () => {
    const date = new Date();
    const dateStr = date.getFullYear().toString().slice(-2) + 
                   (date.getMonth() + 1).toString().padStart(2, '0') + 
                   date.getDate().toString().padStart(2, '0');
    const random = Math.floor(Math.random() * 10000).toString().padStart(4, '0');
    return `ORD-${dateStr}${random}`;
  }
};

// Product Service
export const productService = {
  // Get all products
  getProducts: async (params = {}) => {
    try {
      const response = await api.get('/products', { params });
      return {
        success: true,
        data: response.data.data,
        count: response.data.count
      };
    } catch (error) {
      console.error('Error getting products:', error);
      return {
        success: false,
        data: [],
        message: error.response?.data?.message || 'Failed to fetch products'
      };
    }
  },

  // Get product by ID
  getProductById: async (productId) => {
    try {
      const response = await api.get(`/products/${productId}`);
      return {
        success: true,
        data: response.data.data
      };
    } catch (error) {
      console.error('Error getting product:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Failed to fetch product'
      };
    }
  },

  // Get featured products
  getFeaturedProducts: async () => {
    try {
      const response = await api.get('/products/featured');
      return {
        success: true,
        data: response.data.data
      };
    } catch (error) {
      console.error('Error getting featured products:', error);
      return {
        success: false,
        data: [],
        message: 'Failed to fetch featured products'
      };
    }
  },

  // Get flash sale products
  getFlashSaleProducts: async () => {
    try {
      const response = await api.get('/products/flash-sale');
      return {
        success: true,
        data: response.data.data
      };
    } catch (error) {
      console.error('Error getting flash sale products:', error);
      return {
        success: false,
        data: [],
        message: 'Failed to fetch flash sale products'
      };
    }
  }
};

// Auth Service
export const authService = {
  // Register new user
  register: async (userData) => {
    try {
      const response = await api.post('/auth/register', userData);
      // Save token and user data
      if (response.data.data.token) {
        localStorage.setItem('token', response.data.data.token);
        localStorage.setItem('user', JSON.stringify(response.data.data.user));
      }
      return {
        success: true,
        data: response.data.data,
        message: response.data.message
      };
    } catch (error) {
      console.error('Error registering:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Registration failed'
      };
    }
  },

  // Login user
  login: async (credentials) => {
    try {
      const response = await api.post('/auth/login', credentials);
      // Save token and user data
      if (response.data.data.token) {
        localStorage.setItem('token', response.data.data.token);
        localStorage.setItem('user', JSON.stringify(response.data.data.user));
      }
      return {
        success: true,
        data: response.data.data,
        message: response.data.message
      };
    } catch (error) {
      console.error('Error logging in:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Login failed'
      };
    }
  },

  // Get user profile
  getProfile: async () => {
    try {
      const response = await api.get('/auth/profile');
      return {
        success: true,
        data: response.data.data
      };
    } catch (error) {
      console.error('Error getting profile:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Failed to fetch profile'
      };
    }
  },

  // Update profile
  updateProfile: async (profileData) => {
    try {
      const response = await api.put('/auth/profile', profileData);
      // Update user in localStorage
      const currentUser = JSON.parse(localStorage.getItem('user') || '{}');
      localStorage.setItem('user', JSON.stringify({
        ...currentUser,
        ...response.data.data.user
      }));
      return {
        success: true,
        data: response.data.data,
        message: response.data.message
      };
    } catch (error) {
      console.error('Error updating profile:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Failed to update profile'
      };
    }
  },

  // Logout
  logout: () => {
    localStorage.removeItem('token');
    localStorage.removeItem('user');
  },

  // Check if user is authenticated
  isAuthenticated: () => {
    return !!localStorage.getItem('token');
  },

  // Get current user
  getCurrentUser: () => {
    try {
      const user = localStorage.getItem('user');
      return user ? JSON.parse(user) : null;
    } catch (error) {
      return null;
    }
  }
};

// User Service
export const userService = {
  // Get user favorites
  getFavorites: async () => {
    try {
      const response = await api.get('/users/favorites');
      return {
        success: true,
        data: response.data.data,
        count: response.data.count
      };
    } catch (error) {
      console.error('Error getting favorites:', error);
      return {
        success: false,
        data: [],
        message: 'Failed to fetch favorites'
      };
    }
  },

  // Add to favorites
  addToFavorites: async (productId) => {
    try {
      const response = await api.post(`/users/favorites/${productId}`);
      return {
        success: true,
        message: response.data.message
      };
    } catch (error) {
      console.error('Error adding to favorites:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Failed to add to favorites'
      };
    }
  },

  // Remove from favorites
  removeFromFavorites: async (productId) => {
    try {
      const response = await api.delete(`/users/favorites/${productId}`);
      return {
        success: true,
        message: response.data.message
      };
    } catch (error) {
      console.error('Error removing from favorites:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Failed to remove from favorites'
      };
    }
  },

  // Update password
  updatePassword: async (passwordData) => {
    try {
      const response = await api.put('/users/password', passwordData);
      return {
        success: true,
        message: response.data.message
      };
    } catch (error) {
      console.error('Error updating password:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Failed to update password'
      };
    }
  }
};

// Cart API Service (jika menggunakan cart di backend)
export const cartApiService = {
  // Get cart from backend
  getCart: async () => {
    try {
      const response = await api.get('/cart');
      return {
        success: true,
        data: response.data.data
      };
    } catch (error) {
      console.error('Error getting cart:', error);
      return {
        success: false,
        data: { items: [], itemCount: 0, totalPrice: 0 }
      };
    }
  },

  // Add to cart in backend
  addToCart: async (itemData) => {
    try {
      const response = await api.post('/cart', itemData);
      return {
        success: true,
        data: response.data.data,
        message: response.data.message
      };
    } catch (error) {
      console.error('Error adding to cart:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Failed to add to cart'
      };
    }
  },

  // Update cart item in backend
  updateCartItem: async (itemId, updates) => {
    try {
      const response = await api.put(`/cart/${itemId}`, updates);
      return {
        success: true,
        data: response.data.data,
        message: response.data.message
      };
    } catch (error) {
      console.error('Error updating cart item:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Failed to update cart item'
      };
    }
  },

  // Remove from cart in backend
  removeFromCart: async (itemId) => {
    try {
      const response = await api.delete(`/cart/${itemId}`);
      return {
        success: true,
        data: response.data.data,
        message: response.data.message
      };
    } catch (error) {
      console.error('Error removing from cart:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Failed to remove from cart'
      };
    }
  },

  // Clear cart in backend
  clearCart: async () => {
    try {
      const response = await api.delete('/cart');
      return {
        success: true,
        message: response.data.message
      };
    } catch (error) {
      console.error('Error clearing cart:', error);
      return {
        success: false,
        message: error.response?.data?.message || 'Failed to clear cart'
      };
    }
  }
};

// Fallback jika backend belum ready (development mode)
export const isBackendAvailable = async () => {
  try {
    await api.get('/health');
    return true;
  } catch (error) {
    console.warn('Backend not available, using localStorage fallback');
    return false;
  }
};
</file>

<file path="sw.js">
// public/sw.js - Service Worker minimal
const CACHE_NAME = 'caffinity-v1';

// Cache untuk halaman penting
const urlsToCache = [
  '/',
  '/index.html',
  '/manifest.json'
];

// Install service worker
self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then((cache) => {
        console.log('Cache opened');
        return cache.addAll(urlsToCache);
      })
  );
});

// Fetch event - serve dari cache jika ada
self.addEventListener('fetch', (event) => {
  event.respondWith(
    caches.match(event.request)
      .then((response) => {
        // Return cached response jika ada, atau fetch dari network
        return response || fetch(event.request);
      })
  );
});

// Aktifkan service worker
self.addEventListener('activate', (event) => {
  console.log('Service worker activated');
});
</file>

<file path="tailwind.config.js">
// tailwind.config.js
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,jsx,ts,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        'coffee': {
          50: '#FEFCE8',
          100: '#FEF3C7',
          200: '#FDE68A',
          300: '#FCD34D',
          400: '#FBBF24',
          500: '#F59E0B',
          600: '#D97706',
          700: '#B45309',
          800: '#92400E',
          900: '#78350F',
        },
      },
      fontFamily: {
        'sans': ['Inter', 'system-ui', 'sans-serif'],
        'display': ['Poppins', 'sans-serif'],
      },
      borderRadius: {
        'xl': '1rem',
        '2xl': '1.5rem',
        '3xl': '2rem',
      },
      animation: {
        'bounce-slow': 'bounce 2s infinite',
        'pulse-slow': 'pulse 3s infinite',
        'slide-in': 'slideIn 0.3s ease-out',
        'fade-in': 'fadeIn 0.5s ease-out',
      },
      keyframes: {
        slideIn: {
          '0%': { transform: 'translateY(-10px)', opacity: '0' },
          '100%': { transform: 'translateY(0)', opacity: '1' },
        },
        fadeIn: {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' },
        },
      },
      screens: {
        'xs': '475px',
        '3xl': '1920px',
      },
      boxShadow: {
        'soft': '0 2px 15px rgba(0, 0, 0, 0.08)',
        'medium': '0 4px 25px rgba(0, 0, 0, 0.12)',
        'hard': '0 10px 40px rgba(0, 0, 0, 0.15)',
      },
    },
  },
  plugins: [],
}
</file>

<file path="vite.config.js">
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    port: 3000, 
    host: true,  
    open: true, 
    proxy: {
      '/api': {
        target: 'http://localhost:5000',
        changeOrigin: true,
      }
    }
  }
})
</file>

</files>
